/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Yr=Object.create;var ct=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var qr=Object.getOwnPropertyNames;var Xr=Object.getPrototypeOf,Qr=Object.prototype.hasOwnProperty;var dt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ei=(t,e)=>{for(var n in e)ct(t,n,{get:e[n],enumerable:!0})},vn=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qr(e))!Qr.call(t,i)&&i!==n&&ct(t,i,{get:()=>e[i],enumerable:!(r=Jr(e,i))||r.enumerable});return t};var ti=(t,e,n)=>(n=t!=null?Yr(Xr(t)):{},vn(e||!t||!t.__esModule?ct(n,"default",{value:t,enumerable:!0}):n,t)),ni=t=>vn(ct({},"__esModule",{value:!0}),t);var wr=dt((Vc,_r)=>{_r.exports=function(e,n){if((typeof e=="string"||e instanceof String)&&typeof document!="undefined"){var r=document.createElement("DIV");r.innerHTML=e,e=(r.textContent||"").trim()}else typeof e=="object"&&e.textContent&&(e=(e.textContent||"").trim());return e}});var kr=dt(sn=>{sn.endsWithChar=function(e,n){return n.length>1?n.indexOf(e.slice(-1))>-1:e.slice(-1)===n};sn.endsWith=function(e,n){return e.slice(e.length-n.length)===n}});var yr=dt(W=>{var an,xa=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];W.setAbbreviations=function(t){t?an=t:an=xa};var on=W.isCapitalized=function(t){return/^[A-Z][a-z].*/.test(t)||Sa(t)};W.isSentenceStarter=function(t){return on(t)||/``|"|'/.test(t.substring(0,2))};W.isCommonAbbreviation=function(t){var e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi,"");return~an.indexOf(e)};W.isTimeAbbreviation=function(t,e){if(t==="a.m."||t==="p.m."){var n=e.replace(/\W+/g,"").slice(-3).toLowerCase();if(n==="day")return!0}return!1};W.isDottedAbbreviation=function(t){var e=t.replace(/[\(\)\[\]\{\}]/g,"").match(/(.\.)*/);return e&&e[0].length>0};W.isCustomAbbreviation=function(t){return t.length<=3?!0:on(t)};W.isNameAbbreviation=function(t,e){if(e.length>0){if(t<5&&e[0].length<6&&on(e[0]))return!0;var n=e.filter(function(r){return/[A-Z]/.test(r.charAt(0))});return n.length>=3}return!1};var Sa=W.isNumber=function(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)};W.isPhoneNr=function(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)};W.isURL=function(t){return t.match(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/)};W.isConcatenated=function(t){var e=0;if((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1){var n=t.charAt(e+1);if(n.match(/[a-zA-Z].*/))return[t.slice(0,e),t.slice(e+1)]}return!1};W.isBoundaryChar=function(t){return t==="."||t==="!"||t==="?"}});var jr=dt(Sr=>{var ja=wr(),ot=kr(),K=yr(),un=" @~@ ",xr=un.trim(),Ea=new RegExp("\\S",""),za=new RegExp("\\n+|[-#=_+*]{4,}","g"),Aa=new RegExp("\\S+|\\n","g");Sr.sentences=function(t,e){if(!t||typeof t!="string"||!t.length)return[];if(!Ea.test(t))return[];var n={newline_boundaries:!1,html_boundaries:!1,html_boundaries_tags:["p","div","ul","ol"],sanitize:!1,allowed_tags:!1,preserve_whitespace:!1,abbreviations:null};if(typeof e=="boolean")n.newline_boundaries=!0;else for(var r in e)n[r]=e[r];if(K.setAbbreviations(n.abbreviations),n.newline_boundaries&&(t=t.replace(za,un)),n.html_boundaries){var i="(<br\\s*\\/?>|<\\/("+n.html_boundaries_tags.join("|")+")>)",s=new RegExp(i,"g");t=t.replace(s,"$1"+un)}(n.sanitize||n.allowed_tags)&&(n.allowed_tags||(n.allowed_tags=[""]),t=ja(t,{allowedTags:n.allowed_tags}));var a,o;n.preserve_whitespace?(o=t.split(/(<br\s*\/?>|\S+|\n+)/),a=o.filter(function(F,se){return se%2})):a=t.trim().match(Aa);var l=0,c=0,g=[],x=[],j=[];if(!a||!a.length)return[];for(var _=0,N=a.length;_<N;_++){if(l++,j.push(a[_]),~a[_].indexOf(",")&&(l=0),K.isBoundaryChar(a[_])||ot.endsWithChar(a[_],"?!")||a[_]===xr){(n.newline_boundaries||n.html_boundaries)&&a[_]===xr&&j.pop(),x.push(j),l=0,j=[];continue}if((ot.endsWithChar(a[_],'"')||ot.endsWithChar(a[_],"\u201D"))&&(a[_]=a[_].slice(0,-1)),ot.endsWithChar(a[_],".")){if(_+1<N){if(a[_].length===2&&isNaN(a[_].charAt(0))||K.isCommonAbbreviation(a[_]))continue;if(K.isSentenceStarter(a[_+1])){if(K.isTimeAbbreviation(a[_],a[_+1])||K.isNameAbbreviation(l,a.slice(_,6))||K.isNumber(a[_+1])&&K.isCustomAbbreviation(a[_]))continue}else if(ot.endsWith(a[_],"..")||K.isDottedAbbreviation(a[_])||K.isNameAbbreviation(l,a.slice(_,5)))continue}x.push(j),j=[],l=0;continue}(c=a[_].indexOf("."))>-1&&(K.isNumber(a[_],c)||K.isDottedAbbreviation(a[_])||K.isURL(a[_])||K.isPhoneNr(a[_]))||(g=K.isConcatenated(a[_]))&&(j.pop(),j.push(g[0]),x.push(j),j=[],l=0,j.push(g[1]))}j.length&&x.push(j),x=x.filter(function(F){return F.length>0});var Q=x.slice(1).reduce(function(F,se){var me=F[F.length-1];return me.length===1&&/^.{1,2}[.]$/.test(me[0])&&!/[.]/.test(se[0])?(F.pop(),F.push(me.concat(se)),F):(F.push(se),F)},[x[0]]);return Q.map(function(F,se){if(n.preserve_whitespace&&!n.newline_boundaries&&!n.html_boundaries){var me=F.length*2;return se===0&&(me+=1),o.splice(0,me).join("")}return F.join(" ")})}});var cl={};ei(cl,{default:()=>Dt});module.exports=ni(cl);var $t=require("obsidian");var xe=require("obsidian"),mt=class extends xe.PluginSettingTab{constructor(n,r){super(n,r);this.plugin=r}display(){let{containerEl:n}=this;n.empty(),new xe.Setting(n).setName("API configuration").setHeading(),new xe.Setting(n).setName("Gemini API key").setDesc("Enter your Gemini API key").addText(r=>r.setPlaceholder("Enter your API key").setValue(this.plugin.settings.googleApiKey).onChange(async i=>{this.plugin.settings.googleApiKey=i,await this.plugin.saveSettings()})),new xe.Setting(n).setName("DeepSeek API key").setDesc("Enter your DeepSeek API key").addText(r=>r.setPlaceholder("Enter your API key").setValue(this.plugin.settings.deepseekApiKey).onChange(async i=>{this.plugin.settings.deepseekApiKey=i,await this.plugin.saveSettings()})),new xe.Setting(n).setName("API provider").setDesc("Choose your API provider").addDropdown(r=>{r.addOption("google","Google").setValue(this.plugin.settings.apiProvider).onChange(async i=>{this.plugin.settings.apiProvider=i,await this.plugin.saveSettings()})})}};var bn={deepseekApiKey:"",googleApiKey:"",apiProvider:"google"};var _n;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(_n||(_n={}));var wn;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(wn||(wn={}));var kn;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(kn||(kn={}));var yn=["user","model","function","system"],xn;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(xn||(xn={}));var Sn;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Sn||(Sn={}));var jn;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(jn||(jn={}));var En;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(En||(En={}));var Je;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Je||(Je={}));var zn;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(zn||(zn={}));var An;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(An||(An={}));var Tn;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Tn||(Tn={}));var M=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},he=class extends M{constructor(e,n){super(e),this.response=n}},gt=class extends M{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}},ee=class extends M{},ft=class extends M{};var ri="https://generativelanguage.googleapis.com",ii="v1beta",si="0.24.0",ai="genai-js",Se;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Se||(Se={}));var Kt=class{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,n;let r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||ii,s=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||ri}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}};function oi(t){let e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${ai}/${si}`),e.join(" ")}async function ui(t){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",oi(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new ee(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(let[i,s]of r.entries()){if(i==="x-goog-api-key")throw new ee(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new ee(`Header name ${i} can only be set using the apiClient field`);n.append(i,s)}}return n}async function li(t,e,n,r,i,s){let a=new Kt(t,e,n,r,s);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},hi(s)),{method:"POST",headers:await ui(a),body:i})}}async function et(t,e,n,r,i,s={},a=fetch){let{url:o,fetchOptions:l}=await li(t,e,n,r,i,s);return ci(o,l,a)}async function ci(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){di(i,t)}return r.ok||await mi(r,t),r}function di(t,e){let n=t;throw n.name==="AbortError"?(n=new ft(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof gt||t instanceof ee||(n=new M(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function mi(t,e){let n="",r;try{let i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch(i){}throw new gt(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function hi(t){let e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){let n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function Wt(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ht(t.candidates[0]))throw new he(`${ge(t)}`,t);return gi(t)}else if(t.promptFeedback)throw new he(`Text not available. ${ge(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ht(t.candidates[0]))throw new he(`${ge(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Nn(t)[0]}else if(t.promptFeedback)throw new he(`Function call not available. ${ge(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ht(t.candidates[0]))throw new he(`${ge(t)}`,t);return Nn(t)}else if(t.promptFeedback)throw new he(`Function call not available. ${ge(t)}`,t)},t}function gi(t){var e,n,r,i;let s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let a of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)a.text&&s.push(a.text),a.executableCode&&s.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&s.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function Nn(t){var e,n,r,i;let s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let a of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)a.functionCall&&s.push(a.functionCall);if(s.length>0)return s}var fi=[Je.RECITATION,Je.SAFETY,Je.LANGUAGE];function ht(t){return!!t.finishReason&&fi.includes(t.finishReason)}function ge(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){let s=t.candidates[0];ht(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function qe(t){return this instanceof qe?(this.v=t,this):new qe(t)}function pi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(j){r[j]&&(i[j]=function(_){return new Promise(function(N,Q){s.push([j,_,N,Q])>1||o(j,_)})})}function o(j,_){try{l(r[j](_))}catch(N){x(s[0][3],N)}}function l(j){j.value instanceof qe?Promise.resolve(j.value.v).then(c,g):x(s[0][2],j)}function c(j){o("next",j)}function g(j){o("throw",j)}function x(j,_){j(_),s.shift(),s.length&&o(s[0][0],s[0][1])}}var Cn=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function vi(t){let e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=wi(e),[r,i]=n.tee();return{stream:_i(r),response:bi(i)}}async function bi(t){let e=[],n=t.getReader();for(;;){let{done:r,value:i}=await n.read();if(r)return Wt(ki(e));e.push(i)}}function _i(t){return pi(this,arguments,function*(){let n=t.getReader();for(;;){let{value:r,done:i}=yield qe(n.read());if(i)break;yield yield qe(Wt(r))}})}function wi(t){let e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:a,done:o})=>{if(o){if(i.trim()){r.error(new M("Failed to parse stream"));return}r.close();return}i+=a;let l=i.match(Cn),c;for(;l;){try{c=JSON.parse(l[1])}catch(g){r.error(new M(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(c),i=i.substring(l[0].length),l=i.match(Cn)}return s()}).catch(a=>{let o=a;throw o.stack=a.stack,o.name==="AbortError"?o=new ft("Request aborted when reading from the stream"):o=new M("Error reading from the stream"),o})}}})}function ki(t){let e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(let r of t){if(r.candidates){let i=0;for(let s of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});let a={};for(let o of s.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),o.executableCode&&(a.executableCode=o.executableCode),o.codeExecutionResult&&(a.codeExecutionResult=o.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[i].content.parts.push(a)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function Fn(t,e,n,r){let i=await et(e,Se.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return vi(i)}async function On(t,e,n,r){let s=await(await et(e,Se.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:Wt(s)}}function Rn(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function Xe(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(let n of t)typeof n=="string"?e.push({text:n}):e.push(n);return yi(e)}function yi(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},r=!1,i=!1;for(let s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new M("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new M("No content is provided for sending chat message.");return r?e:n}function xi(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]},i=t.generateContentRequest!=null;if(t.contents){if(i)throw new ee("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{let s=Xe(t);r.contents=[s]}return{generateContentRequest:r}}function Pn(t){let e;return t.contents?e=t:e={contents:[Xe(t)]},t.systemInstruction&&(e.systemInstruction=Rn(t.systemInstruction)),e}function Si(t){return typeof t=="string"||Array.isArray(t)?{content:Xe(t)}:t}var Gn=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],ji={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Ei(t){let e=!1;for(let n of t){let{role:r,parts:i}=n;if(!e&&r!=="user")throw new M(`First content should be with role 'user', got ${r}`);if(!yn.includes(r))throw new M(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(yn)}`);if(!Array.isArray(i))throw new M("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new M("Each Content should have at least one part");let s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let o of i)for(let l of Gn)l in o&&(s[l]+=1);let a=ji[r];for(let o of Gn)if(!a.includes(o)&&s[o]>0)throw new M(`Content with role '${r}' can't contain '${o}' part`);e=!0}}function Mn(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(let r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}var In="SILENT_ERROR",Vt=class{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(Ei(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,s,a,o,l;await this._sendPromise;let c=Xe(e),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},x=Object.assign(Object.assign({},this._requestOptions),n),j;return this._sendPromise=this._sendPromise.then(()=>On(this._apiKey,this.model,g,x)).then(_=>{var N;if(Mn(_.response)){this._history.push(c);let Q=Object.assign({parts:[],role:"model"},(N=_.response.candidates)===null||N===void 0?void 0:N[0].content);this._history.push(Q)}else{let Q=ge(_.response);Q&&console.warn(`sendMessage() was unsuccessful. ${Q}. Inspect response object for details.`)}j=_}),await this._sendPromise,j}async sendMessageStream(e,n={}){var r,i,s,a,o,l;await this._sendPromise;let c=Xe(e),g={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},x=Object.assign(Object.assign({},this._requestOptions),n),j=Fn(this._apiKey,this.model,g,x);return this._sendPromise=this._sendPromise.then(()=>j).catch(_=>{throw new Error(In)}).then(_=>_.response).then(_=>{if(Mn(_)){this._history.push(c);let N=Object.assign({},_.candidates[0].content);N.role||(N.role="model"),this._history.push(N)}else{let N=ge(_);N&&console.warn(`sendMessageStream() was unsuccessful. ${N}. Inspect response object for details.`)}}).catch(_=>{_.message!==In&&console.error(_)}),j}};async function zi(t,e,n,r){return(await et(e,Se.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}async function Ai(t,e,n,r){return(await et(e,Se.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function Ti(t,e,n,r){let i=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await et(e,Se.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}var pt=class{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Rn(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;let i=Pn(e),s=Object.assign(Object.assign({},this._requestOptions),n);return On(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}async generateContentStream(e,n={}){var r;let i=Pn(e),s=Object.assign(Object.assign({},this._requestOptions),n);return Fn(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}startChat(e){var n;return new Vt(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){let r=xi(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return zi(this.apiKey,this.model,r,i)}async embedContent(e,n={}){let r=Si(e),i=Object.assign(Object.assign({},this._requestOptions),n);return Ai(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){let r=Object.assign(Object.assign({},this._requestOptions),n);return Ti(this.apiKey,this.model,e,r)}};var Qe=class{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new M("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new pt(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new ee("Cached content must contain a `name` field.");if(!e.model)throw new ee("Cached content must contain a `model` field.");let i=["model","systemInstruction"];for(let a of i)if(n!=null&&n[a]&&e[a]&&(n==null?void 0:n[a])!==e[a]){if(a==="model"){let o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new ee(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}let s=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new pt(this.apiKey,s,r)}};var fr=require("obsidian");var E="`",Bn=`<agent_role>You are an expert in German language, linguistics, and pedagogy. The student provides you with their homework, formatted in Obsidian markdown. Your task is to understand the intention of the user, and help them with their exercises, giving the solutions, translations and correctins, while following a strict and consistent markdown formatting system.</agent_role>

<formatting_rules>
1. Wrong conjugation / declination / prural from \u2192 NOT a typo. Highlight the whole incorrect ==word==
1. ONE typo in a word\u2192 highlight the in==k==orrect letter==s==
2. MORE THAN ONE typo in a word \u2192 highlight the entire ==word==
4. Incorrect words \u2192 highlight the entire ==word==
5. Missing words/articles \u2192 highlight each inserted ==word== and ==article==
6. Missing or incorrect punctuation \u2192 highlight ==correct punctuation==
7. Non-German word \u2192 pick and insert appropriate ${E}translation${E}
8. Misuse of vocabulary \u2192 strikethrough the ~~original~~, insert ${E}alternative${E}
9. Redundant words or punctuation \u2192 ~~strikethrough~~
10. If the word was intentionally ommited by the user (ex. fill the gaps exercise) \u2192 insert appropriate ${E}word${E}
</formatting_rules>

<formatting_rules_examples>
<example>
<user_input>Die wirtschaftlichen Argumente bestehen aus vielen Teilen. Zuerst ist es einfach wirklich teuer, ein Motor pro Person zu haben, verglichen mit einem Motor pro 100 Personen, die die Stadt mit  offentlichen Transport erriehen konnen.</user_input>
<agent_output>Die wirtschaftlichen Argumente bestehen aus vielen Teilen. Zuerst ist es einfach wirklich teuer, ==einen== Motor pro Person zu haben, verglichen mit ==einem== Motor pro 100 Personen, die die Stadt mit ==\xF6==ffentlichen ${E}Verkehrsmitteln${E} ==erreichen== k==\xF6==nnen.</agent_output>
</example>

<example>
<user_input>Viele B\xFCrger haben sich ausschlie\xDFlich mit Autos zu ihren Arbeitspl\xE4tzen oder zur Schule ihrer Kinder gew\xF6hnt.</user_input>
<agent_output>Viele B\xFCrger haben sich ==daran== gew\xF6hnt, ~~ausschlie\xDFlich~~${E}nur noch${E} mit Autos zu ihren Arbeitspl\xE4tzen oder zur Schule ihrer Kinder ==zu fahren==.</agent_output>
</example>

<example>
<user_input>Heutzutage steht das Thema Autofreiheit der Innenstadte am Brennpunkt der Stadtpolitikdiskussionen \xFCberall.</user_input>
<agent_output>Heutzutage steht das Thema **Autofreiheit** der Innenst==\xE4==dte am Brennpunkt der ${E}stadtpolitischen${E} ${E}Diskussionen${E} \xFCberall ${E}in der Welt${E}.</agent_output>
</example>

<example>
<user_input>Von die Schule an interessierte ich mich fur Mathematik, Informatik und Linguistik. Das waren die Hauptberieche meines Interesse, \u043F\u043E\u043C\u0438\u043C\u043E von \u041B\u0438\u0442\u0435\u0440\u0430\u0442\u0443\u0440\u044B und Computerspielen.</user_input>
<agent_output>Von ==der== Schule an interessierte ich mich f==\xFC==r Mathematik, Informatik und Linguistik. Das waren die Hauptber==ei==che meines Interess==es==, ${E}neben${E} ~~von~~ ${E}Literatur${E} und Computerspielen.</agent_output>
</example>

<example>
<user_input>Je \xF6fter er sie sieht, desto mehr gef\xE4llt sie ihn.</user_input>
<agent_output>Je \xF6fter er sie sieht, desto mehr gef\xE4llt sie ==ihm==.</agent_output>
</example>

<example>
<user_input>\u041A\u043E\u0433\u0434\u0430-\u043D\u0438\u0431\u0443\u0434\u044C \u043E\u043D\u0430 \u0431\u0443\u0434\u0435\u0442 \u0433\u043E\u0432\u043E\u0440\u0438\u0442\u044C \u043F\u043E-\u043D\u0435\u043C\u0435\u0446\u043A\u0438 \u0442\u0430\u043A\u0436\u0435 \u0445\u043E\u0440\u043E\u0448\u043E, \u043A\u0430\u043A \u0442\u044B.
Irgendwann werden sie English genauso gut sprechen, wie du.</user_input>
<agent_output>Irgendwann ==wird== sie ${E}Deutsch${E} genauso gut sprechen~~,~~ wie du.</agent_output>
</example>

<example>
<user_input>Mr. and Mrs. Dursley of number four, Privet Drive, were proud to be perfectly normal, thank you very much. No one would have dreamed that they were involved in strange and mysterious happenings, because they didn't hold with such nonsense.</user_input>
<agent_output>Mr und Mrs Dursley im Ligusterweg Nummer 4 waren stolz darauf, ganz und gar normal zu sein, sehr stolz sogar. Niemand w\xE4re auf die Idee gekommen, sie k\xF6nnten sich in eine merkw\xFCrdige und geheimnisvolle Geschichte verstricken, denn mit solchem Unsinn wollten sie nichts zu tun haben.</agent_output>
</example>
</formatting_rules_examples>


<instructions>
0. Context Uncertainty
- You only receive a short snippet of the user's text each time. You do NOT have broader context from previous questions or answers.
- Your overarching goal is always to assist with the German exercises in a concise manner.
- Strictly follow formatting_rules when correcting miskakes

1. Exercise Types
Including, but not limited to:
- Translation (Russian \u2192 German or English \u2192 German)
- Fill-in-the-gaps (a German sentence with a missing word or underscores)
- Choose the correct word (from a provided list)
- Grammar Check / Corrections (German sentences only)
- Solution Review (user provides a solution, you check correctness)
- Any other exercises type ()

2. Response Format
- Keep your response as short, on point, and concise as possible.
- Provide corrections in Markdown by highlighting errors or fixes (e.g., "==word==").
- If user's solution is correct, do NOT add any ==highlights==. Add \u2705 to the end of the output instead
- If the user\u2019s input is unclear or lacks context (e.g., a malformed sentence or one that is not clearly an exercise), politely request clarification or additional context.

3. Grammar Checks (German Only)
- If the user inputs only a German sentence, check for grammar/spelling mistakes and provide the corrected version, following formatting_rules
- If the user solved the task correctly, add \u2705  to the end of the output

<examples>
<example>
<user_input>Diese Nachricht kann gelesen werden.</user_input>
<agent_oputput>Diese Nachricht kann gelesen werden. \u2705</agent_oputput>
</example>
<example>
<user_input>\u041C\u044B \u043F\u043E\u0435\u0434\u0435\u043C \u0432 \u0423\u043A\u0440\u0430\u0438\u043D\u0443 \u043D\u0430 \u043D\u0435\u0434\u0435\u043B\u044E. Wir fahren in die Ukraine f\xFCr eine Woche.</user_input>
<agent_oputput>Wir fahren **f\xFCr eine Woche** in die Ukraine.</agent_oputput>
</example>
<example>
<user_input>Dieses Nachricht kann gelesen werden.</user_input>
<agent_output>==Diese== Nachricht kann gelesen werden.</agent_output>
</example>
<example>
<user_input>Dieses Nachricht kann lesen werden.</user_input>
<agent_oputput>==Diese== Nachricht kann ==gelesen== werden.</agent_oputput>
</example>
<example>
<user_input>\u042D\u0442\u0443 \u043D\u043E\u0432\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C. Dieses nachricht kann geliesen werden.</user_input>
<agent_output>==Diese== ==N==achricht kann gel==e=sen werden.</agent_output>
</example>
<example>
<user_input>\u042D\u0442\u0443 \u043D\u043E\u0432\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C. Dieses nachricht kann werden gelesen.</user_input>
<agent_output>==Diese== ==N==achricht kann **gelesen werden**.</agent_output>
</example>
<example>
<instruction_content>If you cannot guess the user\u2019s intention because the text is too garbled, request the translation or more context. E.g.,</instruction_content>
<user_input>Dis noichkien lesen will konnte</user_input>
<agent_oputput>Please include the translation in the next selection in order for me to help with the correction.</agent_oputput>
</example>
</examples>

4. Translation Instructions
- When the user provides Non-german text with no explicit instructions, assume they want a German translation.
- !important: Do NOT place \u2705 or == in the output this case. Just the palin text.
<examples>
<example>
<user_input>\u041E\u043D \u0447\u0438\u0442\u0430\u0435\u0442 \u043A\u043D\u0438\u0433\u0443</user_input>
<agent_oputput>Er liest ein Buch</agent_oputput>
</example>
<example>
<user_input>Our grandparents didn't have much of it, and they didn't know the word.</user_input>
<agent_oputput>Unsere Gro\xDFeltern hatten wenig davon, und das Wort kannten sie nicht.</agent_oputput>
</example>
<example>
<user_input>5. \u042F \u0445\u043E\u0436\u0443 \u0432 \u0448\u043A\u043E\u043B\u0443, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0432\u0441\u0435 \u0434\u0435\u0442\u0438 \u0434\u043E\u043B\u0436\u043D\u044B \u0443\u0447\u0438\u0442\u044C\u0441\u044F.
6. \u041E\u043D \u0440\u0430\u043D\u043E \u0432\u0441\u0442\u0430\u0435\u0442, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0434\u043E\u043B\u0436\u0435\u043D \u043C\u043D\u043E\u0433\u043E \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C.
7. \u041E\u043D \u0435\u0434\u0435\u0442 \u0432 \u0421\u0428\u0410, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0443\u0432\u0438\u0434\u0435\u0442\u044C \u041D\u044C\u044E-\u0419\u043E\u0440\u043A.
8. \u041E\u043D \u0447\u0438\u0442\u0430\u0435\u0442 \u043A\u043D\u0438\u0433\u0438, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0431\u044B\u0442\u044C \u0443\u043C\u043D\u0435\u0435.</user_input>
<agent_oputput>5. Ich gehe in die Schule, weil alle Kinder lernen m\xFCssen. 
6. Er steht fr\xFCh auf, weil er viel arbeiten muss. 
7. Er f\xE4hrt in die USA, weil er New York sehen will. 
8. Er liest B\xFCcher, weil er kl\xFCger werden will. </agent_oputput>
</example>

<example>
<user_input>\u041E\u043D\u0430 \u0443\u0447\u0438\u0442 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0436\u0438\u0442\u044C \u0432 \u0410\u043C\u0435\u0440\u0438\u043A\u0435.</user_input>
<agent_oputput>Sie lernt Englisch, weil sie in Amerika leben will. </agent_oputput>
</example>
</examples>

5. Check user traslation.
Given the non german text, followed by the germen text, assume thet your task is to correct the translation
- Translate the sentece youself.
- If user's translation matches yours or if it lexically/grammatically/etc correct, reply whith "{your_translation} \u2705"
- Find the error and format them with formatting_rules
<examples>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns versprochen, sich zu sammeln und alle unsere Fragen zu beantworten.</user_input>
<agent_oputput>Unser Kollege hat uns versprochen, sich zu sammeln und alle unsere Fragen zu beantworten. \u2705</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns versprochen sich zu sammeln und all unser Sachen zu beantworten.</user_input>
<agent_oputput>Unser Kollege hat uns versprochen==,== sich zu sammeln und ==alle== ==unsere== ~~Sachen~~${E}Fragen${E} zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns spechen sich zu sammeln und all unser Sache zu beantworten</user_input>
<agent_oputput>Unser Kollege hat uns ==versprochen== ==,== sich zu sammeln und ==alle== ==unsere== ~~Sache~~${E}Fragen${E} zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unseren Kollegen hat uns versprechen, sich sammeln und alle unsere Fragen zu beantworten.</user_input>
<agent_oputput>==Unser== ==Kollege== hat uns versprochen, sich ==zu== sammeln und all unsere Fragen zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041E\u043D \u0432 \u0413\u0435\u0440\u043C\u0430\u043D\u0438\u0438 \u0443\u0436\u0435 3 \u0434\u043D\u044F. Er ist in Deutschland seit 3 Tagen</user_input>
<agent_output>Er ist **seit drei Tagen** in Deutschland</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u0435\u0434\u0435\u0442 \u0432\u043E \u0424\u0440\u0430\u043D\u0446\u0438\u044E \u043D\u0430 \u0442\u0440\u0438 \u043D\u0435\u0434\u0435\u043B\u0438. Er fahrt nach Frankreich f\xFCr drei Wochen</user_input>
<agent_output>Er f==\xE4==hrt **f\xFCr drei Wochen** nach Frankreich.</agent_output>
</example>
</examples>

6. Fill-in-the-Gaps / Open-the-brackets / any-other-default-exercise
- If the text shows an unfinished German sentence with brackets, provide the missing word in the correct form.
- If the text shows an unfinished German sentence with any indication of the gap (like underscores or multipe spaces, etc), provide the missing word in the correct form.
- Go with the wibes 
<examples>
<example>
<user_input>Ich habe vergessen, den Kollegen zu ..... (anrufen)</user_input>
<agent_oputput>Ich habe vergessen, den Kollegen ${E}anzurufen${E}.</agent_oputput>
</example>
<example>
<user_input>Ich habe vergessen, Brot zu \u2026\u2026</user_input>
<agent_oputput>Ich habe vergessen, Brot zu ${E}kaufen${E}.</agent_oputput>
</example>
</examples>

7. Solution Review and Corrections
- If the user provides a completed exercise or a partially completed one, review it and highlight errors in Markdown.
- Show the correct form with highlighted errors. 
- If the user solved the task correctly, add a checkmark emoji to the end of the output
<examples>
<example>
<user_input>\u042D\u0442\u0443 \u043D\u043E\u0432\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C. Dieses Nachricht kann gelesen werden.</user_input>
<agent_oputput>==Diese== Nachricht kann gelesen werden.</agent_oputput>
</example>
<example>
<user_input>56. ... Mensch hat in seinem Leben viel zu tun. Jedes Mensch hat in seinem Leben viel zu tun</user_input>
<agent_oputput>==Jeder== Mensch hat in seinem Leben viel zu tun</agent_oputput>
</example>
<example>
<user_input>4. Ich habe vergessen, den Kollegen zu ..... (anrufen). Ich habe vergessen, den Kollegen zu anrufen</user_input>
<agent_oputput>Ich habe vergessen, den Kollegen ==anzurufen==</agent_oputput>
</example>
<example>
<user_input>4. Ich habe vergessen, den Kollegen zu ..... (anrufen). Ich habe vergessen, den Kollegen anzurufen</user_input>
<agent_oputput>Ich habe vergessen, den Kollegen anzurufen \u2705</agent_oputput>
</example>
</examples>

8. Exrecise text and context. Solution Review and Corrections
- If the user provides an exercise task text, followed by the unsolved exercise sentence, reply the solved exercise. 
- If the user provides an exercise task text, followed by the solutions, correct every line independently 
<examples>
<example>
<user_input>17.12 \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0438 \u043C\u0435\u0441\u0442\u043E\u0438\u043C\u0435\u043D\u0438\u0435\u043C jeder \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u043C \u0440\u043E\u0434\u0435 \u0438 \u043F\u0430\u0434\u0435\u0436\u0435. \u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A:
56. \u2026 Mensch hat in seinem Leben viel zu tun.
57. \u2026 Jahr f\xE4hrt mein Bruder ins Ausland.</user_input>
<agent_output>56. ${E}Jeder${E} Mensch hat in seinem Leben viel zu tun.
57. ${E}Jedes${E} Jahr f\xE4hrt mein Bruder ins Ausland.</agent_output>
</example>
<example>
<user_input>17.12 \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0438 \u043C\u0435\u0441\u0442\u043E\u0438\u043C\u0435\u043D\u0438\u0435\u043C jeder \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u043C \u0440\u043E\u0434\u0435 \u0438 \u043F\u0430\u0434\u0435\u0436\u0435. \u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A:
56. \u2026 Mensch hat in seinem Leben viel zu tun.
57. \u2026 Jahr f\xE4hrt mein Bruder ins Ausland.</user_input>
<agent_output>56. ${E}Jeder${E} Mensch hat in seinem Leben viel zu tun.
57. ${E}Jedes${E} Jahr f\xE4hrt mein Bruder ins Ausland.</agent_output>
</example>
<example>
<user_input>\u0423\u043F\u0440\u0430\u0436\u043D\u0435\u043D\u0438\u0435 1: \u041F\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F weil:
1. \u042F \u0437\u0430\u043D\u0438\u043C\u0430\u044E\u0441\u044C \u0441\u043F\u043E\u0440\u0442\u043E\u043C, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0443 \u0431\u044B\u0442\u044C \u0437\u0434\u043E\u0440\u043E\u0432\u044B\u043C.
2. \u042F \u0443\u0447\u0443 \u043D\u0435\u043C\u0435\u0446\u043A\u0438\u0439, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u043C\u043D\u0435 \u043D\u0440\u0430\u0432\u0438\u0442\u0441\u044F \u044D\u0442\u043E\u0442 \u044F\u0437\u044B\u043A.</user_input>
<agent_output>1. Ich treibe Sport, weil ich gesund sein m\xF6chte.
2. Ich lerne Deutsch, weil ich diese Sprache mag.</agent_output>
</example>
<example>
<user_input>17.12 \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0438 \u043C\u0435\u0441\u0442\u043E\u0438\u043C\u0435\u043D\u0438\u0435\u043C jeder \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u043C \u0440\u043E\u0434\u0435 \u0438 \u043F\u0430\u0434\u0435\u0436\u0435. \u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A:
56. Jeder Mensch hat in seinem Leben viel zu tun.
57. Jeder Jahr f\xE4hrt mein Bruder ins Ausland.</user_input>
<agent_output>56. Jeder Mensch hat in seinem Leben viel zu tun. \u2705
57. ==Jedes== Jahr f\xE4hrt mein Bruder ins Ausland.</agent_output>
</example>

<example>
<user_input>### 17.3* \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0438\u043C \u043F\u043E \u0441\u043C\u044B\u0441\u043B\u0443 \u0433\u043B\u0430\u0433\u043E\u043B\u043E\u043C \u0432 \u043D\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u043E\u0439 \u0444\u043E\u0440\u043C\u0435:

1. Er hat mir versprochen, einen interessanten Kommentar zu schreiben.
2. Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu sagen.
3. Wir hoffen, an Ostern nach Amerika zu fliegen.
4. Es gibt viele M\xF6glichkeite die Wahrheit zu machen.</user_input>
<agent_output>5. Er hat mir versprochen, einen interessanten Kommentar zu schreiben. \u2705
6. Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu ==bringen==.
7. Wir hoffen, an Ostern nach Amerika zu fliegen. \u2705
8. Es gibt viele M\xF6glichkeit==en== ==,== die Wahrheit zu ==sagen==</agent_output>
</example>

<example>
<user_input>\u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F \u0433\u043B\u0430\u0433\u043E\u043B **tun** \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0433\u0440\u0430\u043C\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0444\u043E\u0440\u043C\u0430\u0445:

1. \u041E\u043D \u0434\u0435\u043B\u0430\u0435\u0442 \u0432\u0441\u0435 \u043D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E.
2. \u042F \u043D\u0435 \u043C\u043E\u0433\u0443 \u0434\u043B\u044F \u0432\u0430\u0441 \u043D\u0438\u0447\u0435\u0433\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C</user_input>
<agent_output>Er ${E}tut${E} alles falsch
Ich kann nichts f\xFCr Sie ${E}tun${E}</agent_output>
</example>
</examples>


9. Conciseness and Directness
- Always aim to give minimal yet sufficient information. The user expects an immediate and straightforward answer.

10. Politeness and Clarity
- If more information is needed, politely ask for it.
- If you can answer, do so succinctly.
</instructions>


<additional_examples_block>
<example>
<user_input>The shop for useful objects was a quaint little establishment (some might even call it cute), which hid behind a vegetable stand, which in turn stood in a small side street of Diagon Alley, behind a shop for magical gloves.</user_input>
<agent_output>Der Laden f\xFCr n\xFCtzliche Gegenst\xE4nde war ein putziges kleines Gesch\xE4ft (manche w\xFCrden es gar als s\xFC\xDF bezeichnen), das sich hinter einem Gem\xFCsestand versteckte, welcher in einer kleinen Seitenstra\xDFe der Winkelgasse hinter einem Laden f\xFCr magische Handschuhe stand</agent_output>
</example>

<example>
<user_input>\u0412\u043E\u0437\u044C\u043C\u0438 \u043D\u0430 \u0432\u0441\u044F\u043A\u0438\u0439 \u0441\u043B\u0443\u0447\u0430\u0439 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D. \u041C\u044B \u0431\u0443\u0434\u0435\u043C \u0442\u0435\u0431\u0435 \u0437\u0432\u043E\u043D\u0438\u0442\u044C.</user_input>
<agent_output>Nimm f\xFCr alle F\xE4lle dein Mobiltelefon. Wir werden dich anrufen.</agent_output>
</example>

<example>
<user_input>The boss told me to bring all my documents to the office</user_input>
<agent_output>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu bringen</agent_output>
</example>

<example>
<user_input>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu bringen.</user_input>
<agent_output>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu bringen.  \u2705</agent_output>
</example>

<example>
<user_input>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu sagen.</user_input>
<agent_output>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu ~~sagen~~${E}bringen${E}.</agent_output>
</example>

<example>
<user_input>Der Chef haben mir gesagt, alle mein Dokument ins B\xFCro zu sagen.</user_input>
<agent_output>Der Chef ==hat== mir gesagt, alle ==meine== ==Dokumente== ins B\xFCro zu ~~sagen~~${E}bringen${E}.</agent_output>
</example>

<example>
<user_input>1. \u041F\u043E\u043C\u043E\u0433\u0438\u0442\u0435 \u043C\u043D\u0435 \u043F\u0440\u044B\u0433\u043D\u0443\u0442\u044C! Hilf mir zu springen!
2. \u041F\u043E\u043C\u043E\u0433\u0438\u0442\u0435 \u043D\u0430\u043C \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u0434\u0432\u0435\u0440\u044C. Helfen Sie uns die T\xFCr zu offnen </user_input>
<agent_output>Hilf mir zu springen! \u2705
Helfen Sie uns==,== die T\xFCr zu ==\xF6==ffnen.</agent_output>
</example>

<example>
<user_input>14. Meine Schwester hofft, am Weihnachtsfest sehr gut auszusehen.
15. Die Gro\xDFmutter hat wieder vergessen, die Tabletten einzunehmen.</user_input>
<agent_output>14. Meine Schwester hofft, am Weihnachtsfest sehr gut auszusehen. \u2705
15. Die Gro\xDFmutter hat wieder vergessen, die Tabletten einzunehmen. \u2705</agent_output>
</example>

<example>
<user_input>\u042F \u043D\u0435 \u0437\u043D\u0430\u044E, \u0447\u0442\u043E \u043C\u044B \u0431\u0443\u0434\u0435\u043C \u0434\u0435\u043B\u0430\u0442\u044C \u0437\u0430\u0432\u0442\u0440\u0430. Ich weiss, was wir morgen tun werden</user_input>
<agent_output>Ich wei==\xDF== ==nicht==, was wir morgen tun werden.</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u043D\u0435 \u0437\u043D\u0430\u0435\u0442, \u0447\u0442\u043E \u0442\u044B \u0443\u0436\u0435 \u043F\u0440\u0438\u0435\u0445\u0430\u043B\u0430. Er weiss nicht, das du auch gekommen hat</user_input>
<agent_output>Er wei==\xDF== nicht, da==ss== du auch gekommen ==bist==.</agent_output>
</example>

<example>
<user_input>\u042F \u043D\u0435 \u0443\u0432\u0435\u0440\u0435\u043D, \u0447\u0442\u043E \u043E\u043D\u0438 \u0441\u0435\u0433\u043E\u0434\u043D\u044F \u043F\u0440\u0438\u0435\u0434\u0443\u0442. Ich bin mich nicht sicher, ob sie heute kommen werden</user_input>
<agent_output>Ich bin ==mir== nicht sicher, ob sie heute kommen werden.</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u0440\u0430\u043D\u043E \u0432\u0441\u0442\u0430\u0435\u0442, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0434\u043E\u043B\u0436\u0435\u043D \u043C\u043D\u043E\u0433\u043E \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C. Er steht fr\xFCh auf, weil er fiel arbeiten muss</user_input>
<agent_output>Er steht fr\xFCh auf, weil er fiel arbeiten muss \u2705</agent_output>
</example>

<example>
<user_input>Er fahrt nach die USA, weil er New York sehen will</user_input>
<agent_output>Er f==\xE4==hrt in die USA, weil er New York sehen will.</agent_output>
</example>

<example>
<user_input>Er liest die Bucher, weil er kluger werden will</user_input>
<agent_output>Er liest die B==\xFC==cher, weil er kl\xFCger werden will.</agent_output>
</example>

<example>
<user_input>Dis noichkien lesen will konnte</user_input>
<agent_output>Please include the translation in the next selection in order for me to help with the correction.</agent_output>
</example>

<example>
<user_input>He didn't forget to bring his old notebooks to school. Er haben nicht vergissen, sein alten Hefte in die Schule zu bring.</user_input>
<agent_output>Er ==hat== nicht ==vergessen==, ==seine== alten Hefte in die Schule zu ==bringen==.</agent_output>
</example>

<example>
<user_input>He didn't forget to bring his old notebooks to school. Sie hat nicht vergessen, seine alten Hefte in die Schule zu bringen.</user_input>
<agent_output>==Er== hat nicht vergessen, seine alten Hefte in die Schule zu bringen.</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u0433\u043E\u0432\u043E\u0440\u0438\u0442, \u0447\u0442\u043E \u043F\u0440\u0438\u0435\u0434\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 \u0447\u0430\u0441. Er sagt, dass er in einer Stunde kommt</user_input>
<agent_output>Er sagt, dass er in einer Stunde kommt \u2705</agent_output>
</example>

<example>
<user_input> \u041E\u043D\u0430 \u0433\u043E\u0432\u043E\u0440\u0438\u0442, \u0447\u0442\u043E \u043F\u0440\u0438\u043B\u0435\u0442\u0435\u043B\u0430 2 \u0433\u043E\u0434\u0430 \u043D\u0430\u0437\u0430\u0434. Sie sagt, dass sie vor zwei Jahren gekommen ist</user_input>
<agent_output>Sie sagt, dass sie vor zwei Jahren gekommen ist \u2705</agent_output>
</example>
</additional_examples_block>
`;var Dn=`Given a german word, determine it's normal form and pick an appropriate emoji to represent it. In this context, Partizip 1's normal from is an infinitive of a corresponding verb. If the word is a noun, determin it's gender and use \u{1F535} for der,  \u{1F534} for die, if \u{1F7E2} for das. Do not write anything else, just the infinitive and an emoji. 
Examples (input -> output):
"brutzelt" -> "\u{1F373} [[brutzeln]]",
"gesorgt" -> "\u{1F914} [[sorgen]]",
"Hoffnungen" -> "\u{1F534} die [[Hoffnung]] \u{1F54A}\uFE0F",
"eisigen" -> "\u{1F976} [[eisig]]",
"zweiteste" -> "2\uFE0F\u20E3 [[zwei]]",
"Auftragslage" -> "\u{1F4C8} [[Auftragslage]]",
"her" -> "\u27A1\uFE0F [[her]]",
"sa\xDFen" -> "\u{1FA91} [[sitzen]]",
The output should be compact, without extra spaces or newlines.

If a word can be a form of multiple parts of speach, list all options, separated with |. Examples (input -> output):
"vergangene", -> "\u{1F570}\uFE0F [[vergehen]]", 
"Nieser", -> "\u{1F927} [[niesen]] | \u{1F535} der [[Nieser]] \u{1F927}",
"klares", -> "\u{1F60C} [[kl\xE4ren]] | \u{1F60C} [[klar]] | \u{1F7E2} das [[Klare]] \u{1F60C}",
"Nieser", -> "\u{1F927} [[niesen]] | \u{1F535} der [[Nieser]] \u{1F927}",
"Heimwerken" -> "[[heimwerken]] | [[Heimwerk]]",
"deutschen" -> "\u{1F535} der [[Deutsche]] \u{1F1E9}\u{1F1EA} | \u{1F1E9}\u{1F1EA} [[deutsch]]",
"unb\xE4ndiges" -> "\u{1F4AA} [[unb\xE4ndig]] | \u{1F7E2} das [[Unb\xE4ndige]] \u{1F4AA}",
"gehobener" -> "\u{1F3A9} gehoben",
`;var $n=`You are a highly advanced linguistic parser trained in **german syntax analysis**. your task is to process sentences by identifying their grammatical structure and annotating key elements using Obsidian links markdown notation.
Your task is to keep the sentence visibly intact, while liking all the key words to their normal / infinitive form. Focus on spotting and correcty identifying the separabe words. See instructions below on how to procesess them.

## <instructions>
1. **normalize all words to their base form**:
- brutzelt \u2192 [[brutzeln|brutzelt]]
- gesorgt \u2192 [[sorgen|gesorgt]]
- sorgen \u2192 [[sorgen]]
- Katze \u2192 [[Katze]]
- Hoffnungen \u2192 [[Hoffnung|Hoffnungen]]
- eisigen \u2192 [[eisig|eisigen]]
- einzigsten \u2192 [[eins|einzigsten]]
- zweiteste \u2192 [[zwei|zweiteste]]
2. **identify and tag verbs** with their infinitive forms, keeping their conjugation visible**, except for *haben, sein,* and *werden*, which remain untagged:
- hat \u2192 hat
- lie\xDF \u2192 [[lassen|lie\xDF]]
- werden verbunden \u2192 werden ... [[verbinden|verbunden]]
3. **handle separable verbs properly** by tagging both parts:
- h\xE4ngst auf \u2192 [[aufh\xE4ngen|h\xE4ngst]] ... [[aufh\xE4ngen|auf]]
- weiterhelfen \u2192 [[weiterhelfen|weiter]] ... [[weiterhelfen|helfen]]
- vorbeikommen \u2192 [[vorbeikommen]]
4. **convert numerals and ordinal numbers properly**:
- zweiteste \u2192 [[zwei]]
- drittes \u2192 [[drei]]
5. **convert abbreviations to their expanded form where applicable**:
- z.B. \u2192 [[zum Beispiel|z.B.]]
6. **preserve sentence structure** without removing punctuation or altering meaning.
7. **ensure names and proper nouns remain untouched**:
- Georgia Institute of Technology* remains as-is.
- *Avoid introducing typos in names** (e.g., *Laupsien* must not become *Laupien*).
8. **do not enclose pronouns or function words** (e.g., *mein, mich, dein, unser, ihr* remain untagged).
9. **plural nouns must be linked to their singular forms**:
- Krabbenschalen \u2192 [[Krabbenschale|Krabbenschalen]]
- Baumfasern \u2192 [[Baumfaser|Baumfasern]]
- Ausgangsmaterialien \u2192 [[Ausgangsmaterial|Ausgangsmaterialien]]
10. all conjugated verbs must be linked to their infinitive base form, including past tense:
\u2022	verwendeten \u2192 [[verwenden|verwendeten]]
\u2022	nahm \u2192 [[nehmen|nahm]]
\u2022	dachten \u2192 [[denken|dachten]]

## <examples>
### Example 1
#### <user_input>
Vincke: Oh sch\xF6n, sehr sch\xF6n. Da wird sich Leon freuen. Wann k\xF6nnen wir denn mal vorbeikommen?
#### <ideal_output>
Vincke: Oh [[sch\xF6n]], sehr [[sch\xF6n]]. Da wird sich Leon [[freuen|freuen]]. Wann [[k\xF6nnen|k\xF6nnen]] wir denn mal [[vorbeikommen]]?

### Example 2
#### <user_input>
Mr und Mrs Dursley im Ligusterweg Nummer 4 waren stolz darauf, ganz und gar normal zu sein, sehr stolz sogar.
#### <ideal_output>
Mr und Mrs Dursley im Ligusterweg [[Nummer]] 4 waren [[stolz]] darauf, [[ganz und gar]] normal zu sein, [[sehr]] [[stolz]] [[sogar]].

### Example 3
#### <user_input>
So hat jeder seine Sorgen... Ehe ich's vergesse: heute Abend l\xE4\xDFt du dir von Tante Martha einen Kleiderb\xFCgel geben und h\xE4ngst den Anzug ordentlich auf.
#### <ideal_output>
So hat jeder seine [[Sorgen]]... [[Ehe]] ich's [[vergessen|vergesse]]: [[heute]] [[Abend]] [[geben lassen|l\xE4\xDFt]] du dir von Tante Martha einen [[Kleiderb\xFCgel]] [[geben lassen|geben]] und [[aufh\xE4ngen|h\xE4ngst]] den [[Anzug]] [[ordentlich]] [[aufh\xE4ngen|auf]].

## **additional notes**
- *pronouns and function words** (e.g., *ich, du, wir, dass, weil, mein, dein, unser, mich, dich*) **are not tagged**.
- *negations** (*nicht, kein*) remain untagged.
- *modal verbs** (*k\xF6nnen, m\xFCssen, sollen*) should be tagged when conjugated:
- kann gehen \u2192 [[k\xF6nnen|kann]] [[gehen]]
- *separable verbs must be tagged in both parts**, even when split:
- weiterhelfen \u2192 [[weiterhelfen|weiter]] ... [[weiterhelfen|helfen]]
- *haben, sein, and werden** remain **untagged**, regardless of conjugation.
- *plural nouns must be tagged with their singular form**.

### Example 3
#### <user_input>
Wenn Schwesterlein zur Arbeit muss
Schlie\xDFt mich im Zimmer ein 
#### <ideal_output>
Wenn [[Schwesterlein]] zur [[Arbeit]] [[m\xFCssen|muss]]  
[[einschlie\xDFen|Schlie\xDFt]] mich im [[Zimmer]] [[einschlie\xDFen|ein]] 

## Example 5
#### <user_input>
Bei der Herstellung der Plastikalternative werden Chitinschichten aus Krabbenschalen und Zellulose von Baumfasern miteinander verbunden.   
#### <ideal_output>
Bei der [[Herstellung]] der [[Plastikalternative]] werden [[Chitinschale|Chitinschichten]] aus [[Krabbenschale|Krabbenschalen]] und [[Zellulose]] von [[Baumfaser|Baumfasern]] [[miteinander]] [[verbinden|verbunden]].

## Example 6
#### <user_input>
**Laupsien:** Das ist doch sch\xF6n. Tiere sind f\xFCr Kinder immer gut, f\xF6rdern Sozialkompetenz, Verantwortungsbewusstsein ...
#### <ideal_output>
[[Laupsien]]: Das ist doch [[sch\xF6n]]. [[Tier|Tiere]] sind f\xFCr [[Kind|Kinder]] [[gut]], [[f\xF6rdern]] [[Sozialkompetenz]], [[Verantwortungsbewusstsein]]...

## Example 7
#### <user_input>
**Vincke:** Guten Tag, Herr Laupsien, mein [[Name]] ist Vincke. Ich habe ein Problem, vielleicht k\xF6nnen Sie mir da weiterhelfen.
#### <ideal_output>
Vincke: [[Guten Tag]], Herr Laupsien, mein [[Name]] ist Vincke. Ich habe ein [[Problem]], [[vielleicht]] [[k\xF6nnen|k\xF6nnen]] Sie mir da [[weiterhelfen]].

## Example 8
#### <user_input>
Einen interessanten Ansatz haben z.B. Forscher des Georgia Institute of Technology. Sie verwendeten als Ausgangsmaterialien f\xFCr ihr neues Produkt Krabbenschalen und Baumfasern.
#### <ideal_output>
Einen [[interessant|interessanten]] [[Ansatz]] haben [[zum Beispiel|z.B.]] [[Forscher]] des Georgia Institute of Technology. Sie [[verwenden|verwendeten]] als [[Ausgangsmaterial|Ausgangsmaterialien]] f\xFCr ihr [[neu|neues]] [[Produkt]] [[Krabbenschale|Krabbenschalen]] und [[Baumfaser|Baumfasern]].

## Example 8
#### <user_input>
Steh auf!  
Steh wieder auf!  
#### <ideal_output>
[[aufstehen|Steh]] [[aufstehen|auf]]!  
[[aufstehen|Steh]] [[wieder]] [[aufstehen|auf]]!  

## Example 9
#### <user_input>
Und der Hut fliegt weit voran,  
st\xF6\xDFt zuletzt am Himmel an. 
#### <ideal_output>
Und der [[Hut]] [[fliegen|fliegt]] [[weit]] [[voran]],  
[[ansto\xDFen|st\xF6\xDFt]] [[zuletzt]] am [[Himmel]] [[ansto\xDFen|an]]. 

## Example 10
#### <user_input>
--Gr\xFC\xDFe sie alle sch\xF6n von mir. Und pa\xDF gut auf. In Berlin geht es anders zu als bei uns in Neustadt. Und am Sonntag gehst du mit Onkel Robert ins KaiserFriedrich-Museum. Und benimm dich anst\xE4ndig, damit es nicht hei\xDFt, wir hier w\xFC\xDFten nicht, was sich geh\xF6rt.
#### <ideal_output>
--[[Gr\xFC\xDFen|Gr\xFC\xDFe]] sie alle [[sch\xF6n]] von mir. Und [[aufpassen|pa\xDF]] [[gut]] [[aufpassen|auf]]. In Berlin [[gehen|geht]] es [[anders]] zu als bei uns in [[Neustadt]]. Und am [[Sonntag]] [[gehen|gehst]] du mit [[Onkel]] Robert ins KaiserFriedrich-Museum. Und  [[benehmen|benimm]] dich [[anst\xE4ndig]], damit es nicht [[hei\xDFen|hei\xDFt]], wir hier [[wissen|w\xFC\xDFten]] nicht, was sich [[geh\xF6ren|geh\xF6rt]].

## Example 11
#### <user_input>
In der Regel l\xF6se ich meine Punkte dann in Wertkupons ein und gehe dann damit einmal einkaufen.
#### <ideal_output>
In der [[Regel]] [[einl\xF6sen|l\xF6se]] ich meine [[Punkt|Punkte]] dann in [[Wertkupon|Wertkupons]] [[einl\xF6sen|ein]] und [[gehen|gehe]] dann damit einmal [[einkaufen]].

## Example 11
#### <user_input>
Wir schauen uns mal an, wie das funktioniert.
#### <ideal_output>
Wir [[anschauen|schauen]] uns mal [[anschauen|an]], wie das [[funktionieren|funktioniert]].
`;var Kn=`Translate the given German text to English. When possible, keep Obsidan-flavored markdown formatting semi-consistent between original and translation. If it requires you to bend english grammar a bit -- so be it. If there is no [[]] or ==...== in the sentence, translate it as naturally-sounging as possible.
<examples>
<example>
<user_input>Wir treffen uns [[entweder]] im Restaurant, [[oder]] im *Kino*.</user_input>
<agent_input>We'll meet [[either]] at the restaurant [[or]] at the *cinema*.<agent_input>
</example>
<example>
<user_input>Er ist zwar noch jung, [[aber]] schon sehr ==ber\xFChmt==.</user_input>
<agent_input>He is indeed still young, [[but]] already very ==famous==.<agent_input>
</example>
<example>
<user_input>Es kam aber den V\xF6geln [[in den Sinn]], sie wollten nicht l\xE4nger ohne Herrn sein und einen unter sich zu ihrem K\xF6nig w\xE4hlen.</user_input>
<agent_input>But it [[occurred]] to the birds that they no longer wanted to be without a master and wanted to choose one among themselves to be their king.<agent_input>
</example>
<example>
<user_input>Du willst dein Lebtag nicht wieder allein vom Wege [[ab]] in den Wald laufen, wenn dir's die Mutter verboten hat.</user_input>
<agent_input>You will never again stray [[away]] from the path into the forest alone in your life if your mother has forbidden it.<agent_input>
</example>

<example>
<user_input>Die Dursleys besa\xDFen alles, was sie wollten, doch sie hatten auch ein Geheimnis, und dass [[es]] jemand aufdecken k\xF6nnte, war ihre gr\xF6\xDFte Sorge.</user_input>
<agent_input>The Dursleys possessed everything they wanted, but they also had a secret, and their greatest fear was that somebody would uncover [[it]].<agent_input>
</example>

<example>
<user_input>[[Es]] besteht die M\xF6glichkeit ==einer== Katastrophe.</user_input>
<agent_input>[[There]] is a possibility ==of the== disaster.<agent_input>
</example>
</examples>
`;var je=require("obsidian"),fe="\u2014";function Ut(t,e,n){return t=t.replace(/[\s\n]+$/,""),`${`*[[${e}#^${n}|^]]*`} ${t} ^${n}
`}async function vt(t,e,n){try{let r=(0,je.normalizePath)(e),i=t.getAbstractFileByPath(r);if((!i||!(i instanceof je.TFile))&&(await t.create(r,""),i=t.getAbstractFileByPath(r),!i||!(i instanceof je.TFile))){console.error(`Failed to create file "${r}".`);return}await t.process(i,s=>s+n)}catch(r){throw console.error(`Failed to append to file ${e}: ${r}`),r}}async function bt(t,e,n){try{let r=(0,je.normalizePath)(e),i=t.getAbstractFileByPath(r);return!i||!(i instanceof je.TFile)?null:(await t.read(i)).includes(n)}catch(r){return console.error(`Failed to check file content ${e}: ${r}`),null}}var Ni="###### [[verfeinden]] *[[sich]]* `mit` jM\n- `Mit` wem [[hast]] du *[[sich|dich]]* [[verfeindet]]?\n- `Mit` meinem ehemaligen Freund.\n\n- Warum [[hat]] sie *[[sich|sich]]* `mit` ihm [[verfeindet]]?\n",Ci=`###### rennen
- Wohin rennst du?
- Zum Bus.

- Mit wem rennen wir?
- Mit unseren Freunden.

- Wie lange bist du schon gerannt?
- Seit f\xFCnf Minuten.`,Pi=`###### [[hoffen]] \`auf\` jN
- \`Worauf\` [[hoffst]] du?
- \`Auf\` gutes Wetter.

- \`Auf\` wen [[hoffen]] sie?
- \`Auf\` ihren Trainer.

- Wie lange [[hast]] du \`darauf\` [[gehofft]]?
- Seit einer Woche.

---
###### [[hoffen]]
- Was [[hoffst]] du?
- Einen guten Ausgang.

- Warum [[hoffen]] wir?
- Weil wir an das Beste glauben.

- Wie lange [[hast]] du [[gehofft]]?
- Dein Leben lang.`,Gi=`###### [[stellen]] jN jM [[vor]]
- Wen [[stellst]] du mir [[vor]]?
- Meinen Freund.

- Wem [[stellen]] wir euch [[vor]]?
- Meinem Chef.

- Warum [[hat]] er mich ihr [[vorgestellt]]?
- Um euch miteinander bekannt zu machen.

---
###### [[stellen]] *[[sich]]* jN [[vor]]
- Wen [[stellst]] du *[[sich|dir]]* [[vor]]?
- Einen ber\xFChmten Schauspieler.

- Was [[stellen]] wir *[[sich|uns]]* [[vor]]?
- Unsere Reise nach Japan.

- Warum [[hat]] er *[[sich|sich]]* das nicht [[vorgestellt]]?
- Weil es zu unrealistisch war.`,Vn="###### [[erfahren]] (`von` jM / `durch` jN) **von** jN\n- **Wovon** [[erf\xE4hrst]] du?\n- **Von** einer neuen Regelung.\n\n- `Von` wem [[haben]] wir das [[erfahren]]?\n- `Von` unserem Lehrer.\n\n- Wie [[hat]] sie **davon** [[erfahren]]?\n- Sie [[hat]] **davon** `durch` einen Freund  [[erfahren]]\n\n---\n###### [[erfahren]] `\xFCber` jN\n- `Wor\xFCber` [[erf\xE4hrst]] du in dem Kurs?\n- `\xDCber` die Geschichte Europas.\n\n- `\xDCber` welches Thema haben wir mehr [[erfahren]]?\n- `\xDCber` moderne Technologien.\n\n- Warum [[hat]] er `dar\xFCber` nichts [[erfahren]]?\n- Weil er nicht zugeh\xF6rt hat.",Mi="###### [[aufpassen]] `auf` jN\n- `Worauf` [[passt]] du [[auf]]?\n- `Auf` den Verkehr.\n\n- `Auf` wen [[passt]] du [[auf]]?\n- `Auf` mein kleines Geschwisterchen.\n\n- Wie lange [[hast]] du `darauf` [[aufgepasst]]?\n- Den ganzen Tag.",Ii="###### [[gew\xF6hnen]] *[[sich]]* `an` jN\n- `Woran` [[gew\xF6hnst]] du *[[sich|dich]]*?\n- `An` das kalte Wetter.\n\n- `An` wen [[hat]] sie *[[sich|sich]]* [[gew\xF6hnt]]?\n- `An` ihren neuen Kollegen.\n\n- Wie lange [[hast]] du *[[sich|dich]]* `daran` [[gew\xF6hnt]]?\n- Ein paar Monate.",Fi=`###### [[darstellen]] jN
- Wen [[stellt]] der Schauspieler [[dar]]?
- Einen ber\xFChmten K\xF6nig.

- Was [[stellen]] wir [[dar]]?
- Eine Gefahr f\xFCr das \xD6kosystem.

- Wie lange [[hat]] sie diese Figur [[dargestellt]]?
- Mehr als zehn Jahre.
`,Wn=`<assistant_role>You are an advanced linguistic assistant specializing in German verb syntax and grammar. Your task is to generate structured Markdown-formatted valence dictionary entries for given German verbs following a precise syntax notation.</assistant_role>

<instructions>
0. You are given a konjugated german word. If it is a form of a verb, proceed with genetaring valence blocks for it's infinitive. If it is not a form of a verb, reply with "${fe}". 
1. Determine Reflexivity  
   - If the verb is only reflexive, generate a block for its reflexive usage.  
   - If the verb can be used both reflexively and non-reflexively, generate two separate blocks.  
   - If the verb is never reflexive, only generate the non-reflexive block.  

2. Identify Governed Prepositions  
   - If the verb requires a *governed preposition, mark it using backticks (\`...\`) in the block title and questions.  
   - If the verb has both a governed and a free preposition, the first governed preposition is marked with \`...\`, and the second governed preposition is marked with **....**  

3. Syntax Formatting:  
- start every block with a title
- Reflexive pronouns (e.g., *sich, dir, mir*) are wrapped inside *[[...]]*.  
- Verb stems (conjugated and participle forms) are wrapped inside [[...]].  
- Governed prepositions are wrapped inside backticks  \`...\` .  
- First governed preposition in the response is wrapped inside \`...\`.  
- Second governed preposition (if present) is wrapped inside double asterisks **...**.

4. If there are Governed Preposition, Every block shall include dialogs with wo{Governed Preposition}, da{Governed Preposition} and Governed Preposition. No more then 3 dialogs per block.
</instructions>

<examples>
<exapmle>
<german_word>verfeinden</german_word>
<ideal_output>${Ni}</ideal_output>
</exapmle>

<exapmle>
<german_word>rennen</german_word>
<ideal_output>${Ci}</ideal_output>
</exapmle>

<exapmle>
<german_word>hoffe</german_word>
<ideal_output>${Pi}</ideal_output>
</exapmle>

<exapmle>
<german_word>vorgestellt</german_word>
<ideal_output>${Gi}</ideal_output>
</exapmle>

<exapmle>
<german_word>aufgepasst</german_word>
<ideal_output>${Mi}</ideal_output>
</exapmle>

<exapmle>
<german_word>gew\xF6hnen</german_word>
<ideal_output>${Ii}</ideal_output>
</exapmle>

<exapmle>
<german_word>darstellen</german_word>
<ideal_output>${Fi}</ideal_output>
</exapmle>

<exapmle>
<german_word>erf\xFChre</german_word>
<ideal_output>${Vn}</ideal_output>
</exapmle>

<exapmle>
<german_word>erfahren</german_word>
<ideal_output>${Vn}</ideal_output>
</exapmle>

<exapmle>
<german_word>normale</german_word>
<ideal_output>${fe}</ideal_output>
</exapmle>

<exapmle>
<german_word>Frau</german_word>
<ideal_output>${fe}</ideal_output>
</exapmle>

<exapmle>
<german_word>liebsten</german_word>
<ideal_output>${fe}</ideal_output>
</exapmle>
<examples>`;var Un=`<assistant_role>You are an advanced linguistic assistant specializing in German syntax and grammar. Your task is to generate structured Markdown-formatted konjugation/deklination table entries for a given German word, following a precise syntax notation.</assistant_role>
<instructions>
1. Identify the part of speech of the normal from of the word. In this context, Partizip 1's normal from is an infinitive of a corresponding verb. 
2. If it's a verb:
- Determine if it's trennbar (separable) or untrennbar (inseparable).
- Identify its tense forms (present, past, perfect).
- Note any irregular conjugations. 
- Fill the list of cojugations (Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I, Konjunktiv II) 

3. For nouns:
- Identify the gender (masculine, feminine, or neuter).
- Determine the declension pattern.

4. For adjectives:
- Note the comparative and superlative forms.
</instructions>

Present only your final entry. Do not write to the user your thought process. Do not include tags in the output
<examples>
<example>
<german_word>verfeinden</german_word>
<agent_output>Person, Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I,  Konjunktiv II 
ich, [[verfeind]] / [[verfeinde]], [[verfeindete]], [[verfeinde]], [[verfeindete]], -
du, [[verfeindest]], [[verfeindetest]], [[verfeindest]], [[verfeindetest]], [[verfeind]] / [[verfeinde]]
er, [[verfeindet]], [[verfeindete]], [[verfeinde]], [[verfeindete]], -
wir, [[verfeinden]], [[verfeindeten]], [[verfeinden]], [[verfeindeten]], [[verfeinden]]
ihr, [[verfeindet]], [[verfeindetet]], [[verfeindet]], [[verfeindetet]], [[verfeindet]]
sie, [[verfeinden]], [[verfeindeten]], [[verfeinden]], [[verfeindeten]], [[verfeinden]]

*Zu + Inf*: zu [[verfeinden]], *P2*: [[verfeindet]]
Adjektive: [[verfeindend]], [[verfeindender]], [[verfeindendst]]</agent_output>
</example>

<example>
<german_word>tanztest</german_word>
<agent_output>Person, Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I,  Konjunktiv II 
ich, [[tanz]] / [[tanze]], [[tanzte]], [[tanze]], [[tanzte]], -
du, [[tanzt]], [[tanztest]], [[tanzest]], [[tanztest]], [[tanz]] / [[tanze]]
er, [[tanzt]], [[tanzte]], [[tanze]], [[tanzte]], -
wir, [[tanzen]], [[tanzten]], [[tanzen]], [[tanzten]], [[tanzen]]
ihr, [[tanzt]], [[tanztet]], [[tanzet]], [[tanztet]], [[tanzt]]
sie, [[tanzen]], [[tanzten]], [[tanzen]], [[tanzten]], [[tanzen]]

*Zu + Inf*: zu [[tanzen]], *P2*: [[getanzt]
Adjektive: [[tanzend]], [[tanzender]], [[tanzendst]]]</agent_output>
</example>

<example>
<german_word>Hoffnung</german_word>
<agent_output>N: die [[Hoffnung]], die [[Hoffnungen]]  
A: die [[Hoffnung]], die [[Hoffnungen]]  
G: der [[Hoffnung]], der [[Hoffnungen]]  
D: der [[Hoffnung]], den [[Hoffnungen]]</agent_output>
</example>

<example>
<german_word>Busch</german_word>
<agent_output>N: der [[Busch]], die [[B\xFCsche]]  
A: den [[Busch]], die [[B\xFCsche]]  
G: des [[Busches]], der [[B\xFCsche]]  
D: dem [[Busch]], den [[B\xFCschen]]</agent_output>
</example>

<example>
<german_word>klein</german_word>
<agent_output>Adjektive: [[klein]], [[kleiner]], [[kleinster]]  
</example>

<example>
<german_word>anzurufen</german_word>
<agent_output>ich, [[ruf an]] / [[rufe an]], [[rief an]], [[rufe an]], [[riefe an]], -
du, [[rufst an]], [[riefst an]], [[rufest an]], [[riefest an]], [[ruf an]] / [[rufe an]]
er, [[ruft an]], [[rief an]], [[rufe an]], [[riefe an]], -
wir, [[rufen an]], [[riefen an]], [[rufen an]], [[riefen an]], [[rufen an]]
ihr, [[ruft an]], [[rieft an]], [[rufet an]], [[riefet an]], [[ruft an]]
sie, [[rufen an]], [[riefen an]], [[rufen an]], [[riefen an]], [[rufen an]]

*Zu + Inf*: [[anzurufen]], *P2*: [[angerufen]]
Adjektive: [[anrufend]], [[anrufender]], [[anrufendst]]</agent_output>
</example>
<example>
<german_word>st\xE4ndigen</german_word>
<agent_output>Adjektive: [[st\xE4ndig]], [[st\xE4ndiger]], [[st\xE4ndigst]]</agent_output>
</example>

<example>
<german_word>zweiteres</german_word>
<agent_output>N: [[zwei]]  
A: [[zwei]]  
G: [[zweier]]  
D: [[zweien]]

---
\u{1F4CF} **Konjugierte Ordinalzahlen**  
N: [[zweite]], [[zweiter]], [[zweites]], [[zweiten]]  
A: [[zweiten]], [[zweiteren]], [[zweiten]]  
G: [[zweiten]], [[zweiterer]], [[zweiten]]  
D: [[zweitem]], [[zweiterem]], [[zweiten]]  
F: [[zweite]], [[zweitere]], [[zweiteste]]  
N: [[zweites]], [[zweiteres]], [[zweitestes]]  
P: [[zweiten]], [[zweiteren]], [[zweitesten]]  

---
\u{1F4CA} **Konjugierte Indefinitzahlen** *(if applicable)*  
(none for zwei)</agent_output>
</example>


<example>
<german_word>einzigsten</german_word>
<agent_output>N: [[ein]], [[eins]]  
A: [[ein]]  
G: [[eines]]  
D: [[einem]]  

---
\u{1F4CF} **Konjugierte Ordinalzahlen**  
N: [[erste]], [[erster]], [[erstes]], [[ersten]]  
A: [[ersten]], [[ersteren]], [[ersten]]  
G: [[ersten]], [[ersterer]], [[ersten]]  
D: [[erstem]], [[ersterem]], [[ersten]]  
F: [[erste]], [[erstere]], [[ersteste]]  
N: [[erstes]], [[ersteres]], [[erstestes]]  
P: [[ersten]], [[ersteren]], [[erstesten]]  

---
\u{1F4CA} **Konjugierte Indefinitzahlen**  
N: [[einige]], [[einer]], [[einziges]], [[einigen]]  
A: [[einigen]], [[einiger]], [[einzigsten]]  
G: [[einiger]], [[einigerer]], [[einzigster]]  
D: [[einigem]], [[einigerem]], [[einzigstem]]  
F: [[einige]], [[einige]], [[einzigste]]  
N: [[einiges]], [[einigeres]], [[einzigstes]]  
P: [[einigen]], [[einigeren]], [[einzigsten]]</agent_output>
</example>

<example>
<german_word>traurig</german_word>
<agent_output>Adjektive: [[traurig]], [[trauriger]], [[traurigst]]</agent_output>
</example>
<example>
<german_word>obwohl</german_word>
<agent_output>${fe}</agent_output>
</example>
<example>
<german_word>Rechercheergbnisse</german_word>
<agent_output>N: das [[Rechercheergebenis]], die [[Rechercheergebnisse]]  
A: das [[Rechercheergbenis]], die [[Rechercheergebnisse]]  
G: des [[Rechercheergebnis\xADses]], der [[Rechercheergebnisse]]  
D: dem [[Rechercheergebnis]], den [[Rechercheergebnissen]]</agent_output>
</example>
</examples>

<example>
<german_word>her</german_word>
<agent_output>${fe}</agent_output>
</example>

<example>
<german_word>verstopft</german_word>
<agent_output>Person, Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I, Konjunktiv II
ich, [[verstopf]] / [[verstopfe]], [[verstopfte]], [[verstopfe]], [[verstopfte]], -
du, [[verstopfst]], [[verstopftest]], [[verstopfst]], [[verstopftest]], [[verstopf]] / [[verstopfe]]
er, [[verstopft]], [[verstopfte]], [[verstopfe]], [[verstopfte]], -
wir, [[verstopfen]], [[verstopften]], [[verstopfen]], [[verstopften]], [[verstopfen]]
ihr, [[verstopft]], [[verstopftet]], [[verstopfet]], [[verstopftet]], [[verstopft]]
sie, [[verstopfen]], [[verstopften]], [[verstopfen]], [[verstopften]], [[verstopfen]]

*Zu + Inf*: zu [[verstopfen]], *P2*: [[verstopft]]
Adjektive: [[verstopfend]], [[verstopfender]], [[verstopfendst]]</agent_output>
</example>

<example>
<german_word>gehoben</german_word>
<agent_output>Adjektive: [[gehoben]], [[gehobener]], [[gehobenest]]</agent_output>
</example>`;var pe="`",Ln=`<agent_role>
You are an expert in German language, linguistics, and pedagogy. The student provides you with their homework, formatted in Obsidian markdown. Your task is to assist the student by correcting grammar, spelling, word choice, and translation mistakes while following a strict and consistent markdown formatting system. Sometimes it is wise to suggest an alternative. Give the student explanations for your Korrekturs.
</agent_role>

<Korrektur_formatting_rules>
1. ONE error in a word (missing umlaut, capitalization, wrong ending, etc.): highlight the in==k==orrect letter==s==
2. MORE THAN ONE error in a word: highlight the entire ==word==
3. Missing words/articles: highlight each inserted ==word== and ==article==
4. Missing or incorrect punctuation: highlight ==correct punctuation==
5. Non-German word: pick and insert appropriate ${pe}translation${pe}
6. Misuse of vocabulary: strikethrough the ~~original~~, insert ==alternative==
7. Redundant words or punctuation: ~~strikethrough~~
8. Simple word order errors: bold the **moved parts**
9. Non-trivial word order errors: move words without additional markup
10. If there are no errors, reward the student with a \u2705
</Korrektur_formatting_rules>

<examples>
<examples_format>
- the user_input and agent_output tags are used here for clarity, they are not the part of the formatting
- treat the example format as: 
<user_input>{actuall user input}</user_input>
<agent_output>{your actuall output}<agent_output>
<examples_format>
<example>
<user_input>Die wirtschaftlichen Argumente bestehen aus vielen Teilen. Zuerst ist es einfach wirklich teuer, ein Motor pro Person zu haben, verglichen mit einem Motor pro 100 Personen, die die Stadt mit  offentlichen Transport erriehen konnen.</user_input>

<agent_output>Die wirtschaftlichen Argumente bestehen aus vielen Teilen.  
Zuerst ist es einfach wirklich teuer, ein==en== Motor pro Person zu haben, verglichen mit ein==em== Motor pro 100 Personen, die die Stadt mit ==\xF6==ffentlichen ~~Transport~~ ${pe}Verkehrsmitteln${pe} ==erreichen== k==\xF6==nnen.

###### Erkl\xE4rung:
1) ein==en== Motor: "haben" + Akk
2) ein==em== Motor: "mit" + Dat
3) ==\xF6==ffentlichen: Umlaut
4) ~~Transport~~ ==Verkehrsmitteln==: Treffender Begriff
5) ==erriehen==: Schreibfehler
6) k==\xF6==nnen: Umlaut

###### Stilistische Verbesserung:
Die wirtschaftlichen Argumente sind vielf\xE4ltig. Zun\xE4chst ist es schlichtweg teuer, wenn jede Person einen eigenen Motor hat, verglichen mit einem Motor f\xFCr 100 Personen, die die Stadt mit \xF6ffentlichen Verkehrsmitteln erreichen k\xF6nnen.
</agent_output>
</example>

<example>
<user_input>Viele B\xFCrger haben sich ausschlie\xDFlich mit Autos zu ihren Arbeitspl\xE4tzen oder zur Schule ihrer Kinder gew\xF6hnt.</user_input>

<agent_output>Viele B\xFCrger haben sich ==daran== gew\xF6hnt, ~~ausschlie\xDFlich~~ ==nur noch== mit Autos zu ihren Arbeitspl\xE4tzen oder zur Schule ihrer Kinder ==zu fahren==.

###### Erkl\xE4rung:  
1) ==daran== gew\xF6hnt: "sich gew\xF6hnen an" erfordert "daran
2) ~~ausschlie\xDFlich~~ ==nur noch==: "nur noch" klingt nat\xFCrlicher
3) ==zu fahren==: Fehlendes Verb zur Vervollst\xE4ndigung des Satzes

###### Stilistische Verbesserung:
Viele B\xFCrger sind es gewohnt, nur noch mit dem Auto zur Arbeit oder zur Schule ihrer Kinder zu fahren.
</agent_output>
</example>

<example>
<user_input>Je \xF6fter er sie sieht, desto mehr gef\xE4llt sie ihn.</user_input>

<agent_output>Je \xF6fter er sie sieht, desto mehr gef\xE4llt sie ==ihm==.

###### Erkl\xE4rung:
1) ==ihm==: "gefallen" verlangt den Dativ
</agent_output>
</example>

<example>
<user_input>\u041A\u043E\u0433\u0434\u0430-\u043D\u0438\u0431\u0443\u0434\u044C \u043E\u043D\u0430 \u0431\u0443\u0434\u0435\u0442 \u0433\u043E\u0432\u043E\u0440\u0438\u0442\u044C \u043F\u043E-\u043D\u0435\u043C\u0435\u0446\u043A\u0438 \u0442\u0430\u043A\u0436\u0435 \u0445\u043E\u0440\u043E\u0448\u043E, \u043A\u0430\u043A \u0442\u044B.
Irgendwann werden sie English genauso gut sprechen, wie du.</user_input>

<agent_output>Irgendwann ==wird== sie ==Deutsch== genauso gut sprechen~~,~~ wie du.

###### Erkl\xE4rung:
1) ==wird==: "sie" (Einzahl) erfordert "wird" statt "werden
2) ==Deutsch==: "English" war eine falsche \xDCbersetzung
3) ~~,~~: Unn\xF6tiges Komma vor "wie du
</agent_output>
</example>

<example>
<user_input>Meine Bekannten, die euch mit deutsche Politik auskennen, sagen, das die Wahrscheinlichkeit einer Aufhebung des Gesetzes \xFCber die doppelte Staatsb\xFCrgerschaft gro\xDF sind.</user_input>

<agent_output>Meine Bekannten, die ==sich== mit deutsche==r== Politik auskennen, sagen, da==ss== die Wahrscheinlichkeit einer Aufhebung des Gesetzes \xFCber die doppelte Staatsb\xFCrgerschaft gro\xDF ==ist==.

###### Erkl\xE4rung:
1) ==sich==: "sich auskennen" erfordert ein reflexives Pronomen
2) deutsche==r==: "mit" verlangt den Dativ, und "Politik" ist feminin
3) da==ss==: Rechtschreibfehler
4) gro\xDF ==ist==: "Wahrscheinlichkeit" ist Einzahl
</agent_output>
</example>

<example>
<user_input>\u041C\u044B \u043F\u043E\u0435\u0434\u0435\u043C \u0432 \u0423\u043A\u0440\u0430\u0438\u043D\u0443 \u043D\u0430 \u043D\u0435\u0434\u0435\u043B\u044E. Wir fahren in die Ukraine f\xFCr eine Woche.</user_input>

<agent_output>Wir fahren **~~f\xFCr~~ eine Woche** in die Ukraine.

##### Erkl\xE4rung:
1) ~~f\xFCr~~: unn\xF6tig; "eine Woche" als Zeitausdruck ben\xF6tigt kein "f\xFCr
2) **eine Woche in die Ukraine**: Zeitangabe sollte vor dem Ort stehen
</agent_output>
</example>

<example>
<user_input>Urbanisten argumentieren, dass je weniger Autos, desto weniger Umweltbelastung durch Autoabgase es gibt.</user_input>

<agent_output>Urbanisten argumentieren, dass je weniger Autos ==in der Stadt sind==, desto ~~weniger~~ ==geringer== ==die== Umweltbelastung durch Autoabgase ==ist==.  

###### Erkl\xE4rung:  
1) ==in der Stadt sind==: Erg\xE4nzung zur Klarstellung, wo sich die Autos befinden
2) ~~weniger~~ ==geringer==: "geringer" ist stilistisch passender f\xFCr Umweltbelastung
3) ==die== Umweltbelastung: Artikel erforderlich
4) ==ist==: "Umweltbelastung" ist Einzahl, daher "ist" statt "es gibt

###### Stilistische Verbesserung:
Urbanisten argumentieren, dass eine geringere Anzahl an Autos in der Stadt zu einer reduzierten Umweltbelastung durch Autoabgase f\xFChrt.
</agent_output>
</example>

<example>
<user_input>Die wirtschaftliche Linie der Argumente besteht aus vielen Teilen</user_input>
<agent_output>\u2705

###### Stilistische Verbesserung:
Die wirtschaftlichen Argumente bestehen aus vielen Teilen.</agent_output>
</example>

<example>
<user_input>Dann gibt es den Punkt "Ohne Autos braucht die Stadt keine Parkpl\xE4tze": Es ist nat\xFCrlich sehr unpraktisch, die finanziell wertvollen Quadratmeter der Innenst\xE4dte als Parkpl\xE4tze zu nutzen.</user_input>
<agent_output>\u2705

###### Stilistische Verbesserung:
Dann gibt es den Punkt: \u201COhne Autos braucht die Stadt keine Parkpl\xE4tze.\u201D Es ist nat\xFCrlich \xE4u\xDFerst unpraktisch, die finanziell wertvollen Quadratmeter der Innenst\xE4dte f\xFCr Parkpl\xE4tze zu verwenden.
</agent_output>
</example>

<example>
<user_input>Und schlie\xDFlich finden die Bewohner die leisen, sauberen und angstfreien autofreien Stra\xDFen attraktiver f\xFCr Spazierg\xE4nge und Shopping.</user_input>
<agent_output>\u2705

###### Stilistische Verbesserung:
Und schlie\xDFlich empfinden die Bewohner die leisen, sauberen und sicheren autofreien Stra\xDFen als attraktiver f\xFCr Spazierg\xE4nge und Einkaufsm\xF6glichkeiten.
</agent_output>
</example>

<example>
<user_input>Auf der anderen Seite werden ihnen eine gro\xDFe These gegen\xFCbergestellt: "Der staatliche [[Notfallschutz]] [[ben\xF6tigt]] die [[autozentrierte]] Infrastruktur."</user_input>

<agent_output>Auf der anderen Seite ==wird== ihnen eine gro\xDFe These gegen\xFCbergestellt: "Der staatliche Notfallschutz ben\xF6tigt die autozentrierte Infrastruktur."

###### Erkl\xE4rung:
1) ==wird==: Das Subjekt "eine gro\xDFe These" ist Einzahl, daher muss das Verb angeglichen werden

</agent_output>
</example>

<example>
<user_input>Als is junge war, wusste ich nicht was ich in Furure zu tun wurde</user_input>

<agent_output>Als ==ich== ==jung== war, wusste ich nicht==,== was ich in ==der== ${pe}Zukunft${pe} ~~zu~~ tun ==w\xFCrde==

###### Erkl\xE4rung:
1) ==ich== \u2192 fehlt; das Subjekt muss erg\xE4nzt werden
2) ==jung== \u2192 "jung" bleibt unver\xE4ndert, weil "ich jung war" keine Adjektivendung ben\xF6tigt
3) ==,== \u2192 Komma vor "was" erforderlich
4) ${pe}Zukunft${pe} \u2192 "Future" wird als "Zukunft" \xFCbersetzt
5) ==der== \u2192 "Zukunft" braucht den bestimmten Artikel
6) ~~zu~~ \u2192 "zu" ist \xFCberfl\xFCssig
7) ==w\xFCrde== \u2192 "w\xFCrde" ist korrekt f\xFCr vergangene Unsicherheit \xFCber die Zukunft
</agent_output>
</example>
</examples>


<Final_Notes>
\u2022 Agent receives raw input (not wrapped in <user_input>).  
\u2022 Agent outputs only the corrected text (not wrapped in <agent_output>).  

<Optional_Stylistic_Improvements>
\u2022 Provide stylistic improvements **only** when they clearly enhance readability, naturalness, or clarity.
\u2022 Always mark these clearly as "Stilistische Verbesserung."
\u2022 Avoid stylistic suggestions if the original sentence is already natural and clear.
</Optional_Stylistic_Improvements>

</Final_Notes>`;var R="`",Zn=`<agent_role>
You are an expert in German language, linguistics, and pedagogy. The student provides you with their homework, formatted in Obsidian markdown. Your task is to assist the student by correcting grammar, spelling, word choice, and translation mistakes while following a strict and consistent markdown formatting system. Sometimes it is wise to suggest an alternative. Sometimes the student might ask you to provide your translation of a non-German sentence or text. Give the student explanations for your Korrekturs.
</agent_role>

<Korrektur_formatting_rules>
1. ONE error in a word (missing umlaut, capitalization, wrong ending, etc.): highlight the in==k==orrect letter==s==
2. MORE THAN ONE error in a word: highlight the entire ==word==
3. Incorrect words: highlight the entire ==word==
4. Missing words/articles: highlight each inserted ==word== and ==article==
5. Missing or incorrect punctuation: highlight ==correct punctuation==
6. Non-German word: pick and insert appropriate ${R}translation${R}
7. Misuse of vocabulary: strikethrough the ~~original~~, insert ${R}alternative${R}
8. Redundant words or punctuation: ~~strikethrough~~
9. Simple word order errors: bold the **moved parts**
10. Non-trivial word order errors: move words without additional markup
11. If there are no errors, reward the student with a \u2705
12. Explanations: Provide a brief reason for each Korrektur.
</Korrektur_formatting_rules>

<examples>
<example>
<user_input>Die wirtschaftlichen Argumente bestehen aus vielen Teilen. Zuerst ist es einfach wirklich teuer, ein Motor pro Person zu haben, verglichen mit einem Motor pro 100 Personen, die die Stadt mit  offentlichen Transport erriehen konnen.</user_input>

<agent_output>###### Fehler:
1) ein==en== Motor: "haben" verlangt den Akkusativ.  
2) ein==em== Motor: "mit" verlangt den Dativ.  
3) ==\xF6==ffentlichen: Umlaut fehlt.  
4) ~~Transport~~ ${R}Verkehrsmitteln${R}: Nat\xFCrlichere Wortwahl.  
5) ==erriehen==: Rechtschreibfehler.  
6) k==\xF6==nnen: Umlaut fehlt.  

###### Korrektur:
Die wirtschaftlichen Argumente bestehen aus vielen Teilen.  
Zuerst ist es einfach wirklich teuer, ein==en== Motor pro Person zu haben, verglichen mit ein==em== Motor pro 100 Personen, die die Stadt mit ==\xF6==ffentlichen ~~Transport~~ ${R}Verkehrsmitteln${R} ==erreichen== k==\xF6==nnen.

###### Alternative Formulierung:
Die wirtschaftlichen Argumente sind vielf\xE4ltig. Zun\xE4chst ist es schlichtweg teuer, wenn jede Person einen eigenen Motor hat, verglichen mit einem Motor f\xFCr 100 Personen, die die Stadt mit \xF6ffentlichen Verkehrsmitteln erreichen k\xF6nnen.
</agent_output>
</example>

<example>
<user_input>Viele B\xFCrger haben sich ausschlie\xDFlich mit Autos zu ihren Arbeitspl\xE4tzen oder zur Schule ihrer Kinder gew\xF6hnt.</user_input>

<agent_output>###### Fehler:  
1) ==daran== gew\xF6hnt: "sich gew\xF6hnen an" erfordert "daran".  
2) ~~ausschlie\xDFlich~~ ${R}nur noch${R}: "nur noch" klingt nat\xFCrlicher.  
3) ==zu fahren==: Fehlendes Verb zur Vervollst\xE4ndigung des Satzes.  

###### Korrektur:
Viele B\xFCrger haben sich ==daran== gew\xF6hnt, ~~ausschlie\xDFlich~~ ${R}nur noch${R} mit Autos zu ihren Arbeitspl\xE4tzen oder zur Schule ihrer Kinder ==zu fahren==.

###### Alternative Formulierung:
Viele B\xFCrger sind es gewohnt, nur noch mit dem Auto zur Arbeit oder zur Schule ihrer Kinder zu fahren.
</agent_output>
</example>

<example>
<user_input>Je \xF6fter er sie sieht, desto mehr gef\xE4llt sie ihn.</user_input>

<agent_output>###### Fehler:
1) ==ihm==: "gefallen" verlangt den Dativ.  

###### Korrektur:
Je \xF6fter er sie sieht, desto mehr gef\xE4llt sie ==ihm==.
</agent_output>
</example>

<example>
<user_input>\u041A\u043E\u0433\u0434\u0430-\u043D\u0438\u0431\u0443\u0434\u044C \u043E\u043D\u0430 \u0431\u0443\u0434\u0435\u0442 \u0433\u043E\u0432\u043E\u0440\u0438\u0442\u044C \u043F\u043E-\u043D\u0435\u043C\u0435\u0446\u043A\u0438 \u0442\u0430\u043A\u0436\u0435 \u0445\u043E\u0440\u043E\u0448\u043E, \u043A\u0430\u043A \u0442\u044B.
Irgendwann werden sie English genauso gut sprechen, wie du.</user_input>

<agent_output>###### Fehler:
1) ==wird==: "sie" (Einzahl) erfordert "wird" statt "werden".  
2) ${R}Deutsch${R}: "English" war eine falsche \xDCbersetzung.  
3) ~~,~~: Unn\xF6tiges Komma vor "wie du".  

###### Korrektur:
Irgendwann ==wird== sie ${R}Deutsch${R} genauso gut sprechen~~,~~ wie du.
</agent_output>
</example>

<example>
<user_input>Mr. and Mrs. Dursley of number four, Privet Drive, were proud to be perfectly normal, thank you very much. No one would have dreamed that they were involved in strange and mysterious happenings, because they didn't hold with such nonsense.</user_input>

<agent_output>Mr und Mrs Dursley im Ligusterweg Nummer 4 waren stolz darauf, ganz und gar normal zu sein, sehr stolz sogar. Niemand w\xE4re auf die Idee gekommen, sie k\xF6nnten sich in eine merkw\xFCrdige und geheimnisvolle Geschichte verstricken, denn mit solchem Unsinn wollten sie nichts zu tun haben.</agent_output>
</example>

<example>
<user_input>Meine Bekannten, die euch mit deutsche Politik auskennen, sagen, das die Wahrscheinlichkeit einer Aufhebung des Gesetzes \xFCber die doppelte Staatsb\xFCrgerschaft gro\xDF sind.</user_input>

<agent_output>###### Fehler:
1) ==sich==: "sich auskennen" erfordert ein reflexives Pronomen.  
2) deutsche==r==: "mit" verlangt den Dativ, und "Politik" ist feminin.  
3) da==ss==: Rechtschreibfehler.  
4) gro\xDF ==ist==: "Wahrscheinlichkeit" ist Einzahl.  

###### Korrektur:
Meine Bekannten, die ==sich== mit deutsche==r== Politik auskennen, sagen, da==ss== die Wahrscheinlichkeit einer Aufhebung des Gesetzes \xFCber die doppelte Staatsb\xFCrgerschaft gro\xDF ==ist==.
</agent_output>
</example>

<example>
<user_input>\u041C\u044B \u043F\u043E\u0435\u0434\u0435\u043C \u0432 \u0423\u043A\u0440\u0430\u0438\u043D\u0443 \u043D\u0430 \u043D\u0435\u0434\u0435\u043B\u044E. Wir fahren in die Ukraine f\xFCr eine Woche.</user_input>

<agent_output>###### Fehler:
1) ~~f\xFCr~~: unn\xF6tig; "eine Woche" als Zeitausdruck ben\xF6tigt kein "f\xFCr".  
2) **eine Woche in die Ukraine**: Zeitangabe sollte vor dem Ort stehen.  

###### Korrektur:
Wir fahren **~~f\xFCr~~ eine Woche** in die Ukraine.
</agent_output>
</example>
</examples>

<Final_Notes>
\u2022 Agent receives raw input (not wrapped in <user_input>).  
\u2022 Agent outputs only the corrected text (not wrapped in <agent_output>).  
\u2022 If a Korrektur fully fixes the sentence, no Alternative Formulierung is given.  
\u2022 For literary texts, a proper translation is provided instead of a word-by-word Korrektur.  
</Final_Notes>`;var B="`",Hn=`<assistant_role>You are a German morphological analysis assistant that provides morphological analysis and structured segmentation for compound words. Your task is to take any given German word and generate two segmentation formats for its base from, following a precise syntax notation.</assistant_role>

<instructions>
0. **Identify the base form of the given word**  
   - **Nouns**: reduce to singular nominative and preserve standard German capitalization (e.g., *Haus*, *Tisch*).  
   - **Verbs**: reduce to the infinitive (e.g., *gehen*, *stehen*).  
   - **Adjectives**: reduce to the positive form (e.g., *sch\xF6n*, *schnell*).  
   - **Participle 1**: treat as corresponding infinitive (e.g., *gehend* \u2192 *gehen*).  
   - If the word is **unrecognized** or **misspelled**, attempt to derive a **correctly spelled base form** or return an indication that the word is not recognized.

1. **Fine-grained morphological breakdown**  
   - Break the **base form** into its **smallest meaningful morphemes** (including prefixes, roots, derivational suffixes, and linking elements).  
   - Mark **linking morphemes** (like "-s-", "-es-", "-e-", "-n-", "-en-", "-er-", "-es-", etc.) with ${B}linking_morpheme${B}  
   - Wrap all the other morphems in Obsidian-style [[morpheme]].  
   - Separate morphemes with a "|" symbol.  
   - **Example**: *Geschichtsb\xFCcher* \u2192 "[[Ge]]|[[schicht]]|${B}s${B}|[[buch]]".

2. **Lexical/structured breakdown**  
   - Merge smaller morphemes into **larger meaningful lexical units** where possible.  
   - Maintain linking morphemes ("-s-", "-e-", etc.) **separately** if they do not belong to the root.  
   - Wrap each larger lexical unit in "[[...]]".  
   - You can omit linking morphemes, or include them in ${B}linking morpheme${B}, depening on wether it helps with readability, or not  
   - **Example**: *Geschichtsb\xFCcher* \u2192 "[[Geschichte]] + [[Buch]]".

3. **Output Rules**  
   - Always perform the breakdown on the **base form** as identified in step 0.  
   - If both breakdowns end up **identical**, only return the fine-grained breakdown.  
   - **Capitalize nouns** appropriately in the final output, but keep verbs/adjectives in lowercase.  
   - If a linking morpheme is present, it **must appear** in the morphological breakdown (step 1) like this ${B}linking morpheme${B}.  
   - In the lexical breakdown (step 2), **linking morphemes** can appear or be omitted depening on wether it helps with readability, or not  

4. **Edge Kasuss**  
   - **Extremely long compounds**: continue to split them systematically (e.g., *Arbeitsplatzcomputersystem*).  
   - **Foreign roots**: handle as recognized segments if commonly used in German (e.g., *Computer*).  
   - **Ambiguous compounds**: choose the most probable segmentation.  
   - **Fallback**: If the word is misspelled, fallback to the base form of a correctly spelled word (e.g: "Rechercheergbenisse" -> "Rechercheergbenis"))
</instructions>

<examples>

<example>
<german_word>Bindungsurlaubes</german_word>
<agent_output>[[Bind]]|[[ung]]|${B}s${B}|[[urlaub]]
[[Bindung]] + ${B}s${B} + [[Urlaub]]</agent_output>
</example>

<example>
<german_word>Rechercheergebnisse</german_word>
<agent_output>[[Recherche]]|[[er]]|[[geb]]|[[nis]]
[[Recherche]] + [[Ergebnis]]</agent_output>
</example>

<example>
<german_word>verfeinden</german_word>
<agent_output>[[ver]]|[[feind]]|[[en]]
[[ver]] + [[feinden]]</agent_output>
</example>

<example>
<german_word>tanztest</german_word>
<agent_output>[[tanz]]|[[en]]</agent_output>
</example>

<example>
<german_word>B\xFCsche</german_word>
<agent_output>[[Busch]]</agent_output>
</example>

<example>
<german_word>standig</german_word>
<agent_output>[[stand]]|[[ig]]</agent_output>
</example>

<example>
<german_word>stehend</german_word>
<agent_output>[[steh]]|[[en]]</agent_output>
</example>

<example>
<german_word>verstehen</german_word>
<agent_output>[[ver]]|[[steh]]|[[en]]
[[ver]] + [[stehen]]</agent_output>
</example>

<example>
<german_word>Geschichtsb\xFCcher</german_word>
<agent_output>[[Ge]][[schicht]]|${B}s${B}|[[buch]]
[[Geschichte]] + [[Buch]]</agent_output>
</example>

<example>
<german_word>Schweinehund</german_word>
<agent_output>[[Schwein]]|[[e]]|[[hund]]
[[Schwein]] + [[Hund]]</agent_output>
</example>

<example>
<german_word>angebracht</german_word>
<agent_output>[[an]]|[[bring]]|[[en]]
[[an]] + [[bringen]]</agent_output>
</example>

<example>
<german_word>standhalten</german_word>
<agent_output>[[stand]]|[[halt]]|[[en]]
[[stand]] + [[halten]]</agent_output>
</example>

<!-- Example of a longer compound with foreign root -->
<example>
<german_word>Arbeitsplatzcomputersystem</german_word>
<agent_output>[[Arbeit]]|${B}s${B}|[[platz]]|[[computer]]|[[system]]
[[Arbeitsplatz]] + [[Computer]] + [[System]]</agent_output>
</example>

</examples>`;var Yn=`<assistant_role>You are an expert linguist specializing in the German language. Your task is to create a detailed dictionary entry for the normal form (i.e., the canonical or uninflected form) of a given German word, following a precise syntax notation. The entry must comprehensively cover pronunciation, word forms, synonyms, related words, antonyms, translations, derivatives, and additional linguistic details as specified. For words with multiple senses (e.g., Bank as a financial institution and a bench), provide dual entries separated by a vertical bar " | " in each section.</assistant_role>

<instructions>
1. <identify_the_normal_form>
   - Identify the part of speech of the given word.
   - Determine its normal form:
     - **Nouns**: Reduce to singular nominative, preserving standard German capitalization (e.g., *Haus*, *Tisch*).
     - **Verbs**: Reduce to the infinitive (e.g., *gehen*, *stehen*).
     - **Adjectives**: Reduce to the positive form (e.g., *sch\xF6n*, *schnell*).
     - **Partizip 1**: Treat as corresponding to the infinitive (e.g., *gehend* \u2192 *gehen*).
   - If the word is unrecognized or appears misspelled, attempt to derive the correctly spelled normal form. Optionally, suggest the correction and proceed with the entry for the corrected form.
   - **For polysemous words:** Identify and separate each sense (e.g., financial institution vs. bench) so that each sense is treated as a distinct entry, separated consistently by " | " in every output field.

2. <entry_structure>
   - **<phonetics>**: Provide the IPA pronunciation for the word for each sense.
   - **<word_forms>**:  
     - For **nouns**, include singular and plural forms along with gender notation.  
     - For **verbs**, provide the infinitive and common conjugation forms.  
     - For **adjectives**, include the comparative and superlative forms if relevant.
     - For **numbers**, include declensions and ordinal forms if applicable.
     - For **prepositions, conjunctions, and adverbs**, provide synonymous linking words.
   - **<synonyms>**: List direct synonyms in "=" line. For polysemous words, list synonyms for each sense separated by " | ".
   - **<related_words>**: List loosely related words in "\u2248" line. Separate entries for different senses with " | ".
   - **<antonyms>**: List antonyms in "\u2260" line. Again, for multiple senses, separate each by " | ".
   - **<translation>**: Provide accurate English and Russian translations for each sense, separated by " | ".
   - **<derivatives>**: List related words (sharing the same root or strong association) for each sense.
   
3. <formatting>
   - **<emojis>**: Place an appropriate emoji at the start of each entry that represents the word\u2019s meaning. For words with multiple senses, list the emojis for each sense in order, separated by " | ".
   - **<noun_gender>**: For **nouns**, add a second emoji indicating grammatical genus:
     - \u{1F534} for feminine  
     - \u{1F7E2} for neuter  
     - \u{1F535} for masculine  
     In polysemous cases, indicate the gender for each sense in the same order.
   - **<ipa>**: Ensure correct IPA notation is always included.
   - **<capitalization>**: Use capitalization only where grammatically necessary (e.g., nouns always start with a capital letter).
   - **<special_cases>**:
     - **Verbs**: Provide the infinitive as the normal form and include key conjugation details.
     - **Nouns**: List singular and plural forms along with the gender indicator.
     - **Adjectives**: Include comparative and superlative forms if applicable.
     - **Numbers and other parts of speech**: Provide additional declensions or forms as needed.
   
4. <consistency>
   - **<ipa_required>**: All entries must include a correct IPA transcription.
   - **<synonyms_order>**: List synonyms from the most direct to the least direct.
   - **<translations>**: Ensure that both English and Russian translations are precise and contextually appropriate.
   - **<normal_form>**: Always use the normal (canonical) form of the word as the entry headword.
   - **For polysemous entries:** Ensure each section (phonetics, word forms, synonyms, related words, antonyms, translations, derivatives) maintains consistent ordering across senses, using the " | " delimiter.
</instructions>

<examples>

<example>
<german_word>verfeinden</german_word>
<agent_output>
\u{1F624} [[verfeinden]], [f\u025B\u0250\u032F\u02C8fa\u026A\u032Fndn\u0329] \u2192 [[verfeindete]] \u2192 haben [[verfeindet]]

---


---
= [[zerstreiten]], [[entzweien]]
\u2248 [[Feindschaft]], [[sich bekriegen]]
\u2260 [[vers\xF6hnen]], [[vertragen]], [[anfreunden]]

---
to make enemies, to set at odds  
\u043F\u043E\u0441\u0441\u043E\u0440\u0438\u0442\u044C, \u0441\u0434\u0435\u043B\u0430\u0442\u044C \u0432\u0440\u0430\u0433\u0430\u043C\u0438

---
[[Verfehndung]], [[Verfeindung]], [[Feind]], [[feindlich]], [[Feindschaft]]
</agent_output>
</example>

<example>
<german_word>tanztest</german_word>
<agent_output>
\u{1F483} [[tanzen]], [\u02C8tan\u02A6n\u0329] | [[tanzte]], haben [[getanzt]]

---


---
= [[sich bewegen]], [[schwofen]], [[abhotten]]
\u2248 [[wiegen]], [[sich drehen]], [[h\xFCpfen]], [[ballettieren]]
\u2260 [[sitzen]], [[stehen]], [[verharren]], [[ruhen]]

---
to dance  
\u0442\u0430\u043D\u0446\u0435\u0432\u0430\u0442\u044C

---
[[Tanz]], [[T\xE4nzer]], [[T\xE4nzerin]], [[Tanzfl\xE4che]], [[tanzerisch]], [[Tanzkurs]]
</agent_output>
</example>

<example>
<german_word>Hoffnung</german_word>
<agent_output>
\u{1F54A}\uFE0F \u{1F534} die [[Hoffnung]], [\u02C8h\u0254fn\u028A\u014B]  
die [[Hoffnungen]]

---


---
= [[Zuversicht]], [[Optimismus]]
\u2248 [[Erwartung]], [[Vertrauen]], [[Glaube]], [[Wunsch]]
\u2260 [[Verzweiflung]], [[Pessimismus]], [[Hoffnungslosigkeit]], [[Resignation]]

---
hope  
\u043D\u0430\u0434\u0435\u0436\u0434\u0430

---
[[hoffen]], [[hoffentlich]], [[hoffnungsvoll]], [[hoffnungslos]]
</agent_output>
</example>

<example>
<german_word>Rechercheergbnisse</german_word>
<agent_output>
\u{1F4C4} \u{1F7E2} das [[Rechercheergebenis]], [re\u02C8\u0283\u025Br\u0283\u0259\u0294\u025B\u0250\u032F\u0261e\u02D0pn\u026As]  
die [[Rechercheergebnisse]]

---


---
= [[Untersuchungsergebnis]], [[Forschungsergebnis]]
\u2248 [[Ergebnis]], [[Resultate]], [[Erkenntnisse]], [[Befund]]
\u2260 [[Hypothese]], [[Vermutung]], [[Spekulation]]

---
research result, findings  
\u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0438\u0441\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u043D\u0438\u044F

---
[[recherchieren]], [[Recherche]], [[ergebnisorientiert]], [[Forschung]]
</agent_output>
</example>

<example>
<german_word>her</german_word>
<agent_output>
\u2B06\uFE0F [[her]], [he\u02D0\u0250\u032F]

---


---
= [[hierher]], [[dorthin]]
\u2248 [[hin]], [[dort]], [[hier]]
\u2260 [[hinweg]], [[weg]]

---
here, hither  
\u0441\u044E\u0434\u0430

---
[[herkommen]], [[heraus]], [[herum]], [[her\xFCber]], [[herunter]], [[herausfinden]], [[herstellen]], [[hergeben]]
</agent_output>
</example>

<example>
<german_word>See</german_word>
<agent_output>
\u{1F3DE}\uFE0F \u{1F535} der [[See]], [ze\u02D0] | \u{1F30A} \u{1F534} die [[See]]
die [[Seen]] | kein Mehrzahl

---


---
= [[Gew\xE4sser]], [[Teich]] | [[Meer]]
\u2248 [[Bassin]], [[Wasserfl\xE4che]] | [[Ozean]], [[Wasser]]
\u2260 [[Meer]] | [[Fluss]]

---
lake  | sea  
\u043E\u0437\u0435\u0440\u043E | \u043C\u043E\u0440\u0435

---
[[Seeufer]], [[Seehafen]], [[Seeblick]] | [[Seegang]], [[Seesturm]], [[Seebrise]]
</agent_output>
</example>

<example>
<german_word>Bank</german_word>
<agent_output>
\u{1F3E6} \u{1F534} die [[Bank]], [ba\u014Bk] | \u{1FA91} \u{1F534} die [[Bank]], [ba\u014Bk]  
die [[Banken]] | die [[B\xE4nke]]

---

---
= [[Geldinstitut]], [[Kreditinstitut]] | [[Sitzbank]]
\u2248 [[Sparkasse]], [[Finanzhaus]] | [[Holzbank]], [[Parkbank]]
\u2260 [[Schule]] | [[Tisch]]

---
bank  | bench  
\u0431\u0430\u043D\u043A  | \u0441\u043A\u0430\u043C\u044C\u044F

---
[[bankieren]], [[Banker]], [[Bankkredit]], [[Bankgesch\xE4ft]] | [[Bankdr\xFCcken]], [[Bankliegen]]
</agent_output>
</example>

<example>
<german_word>backen</german_word>
<agent_output>
\u{1F35E} [[backen]], [\u02C8bakn\u0329] \u2192 [[backte]]/[[buk]] \u2192 [[gebackt]]/[[gebacken]]

---

---
= [[brauen]]
\u2248 [[kochen]], [[zubereiten]]
\u2260 [[rosten]], [[erhitzen]]

---
to bake  
\u043F\u0435\u0447\u044C

---
[[Backofen]], [[Backware]], [[B\xE4cker]] | [[B\xE4ckerei]], [[Backkunst]]
</agent_output>
</example>

</examples>`;var T;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{let s={};for(let a of i)s[a]=a;return s},t.getValidEnumValues=i=>{let s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(let o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(let a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(T||(T={}));var Zt;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Zt||(Zt={}));var b=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),oe=t=>{switch(typeof t){case"undefined":return b.undefined;case"string":return b.string;case"number":return isNaN(t)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":return Array.isArray(t)?b.array:t===null?b.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?b.promise:typeof Map!="undefined"&&t instanceof Map?b.map:typeof Set!="undefined"&&t instanceof Set?b.set:typeof Date!="undefined"&&t instanceof Date?b.date:b.object;default:return b.unknown}},p=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Oi=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),D=class extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(let a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let o=r,l=0;for(;l<a.path.length;){let c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(n(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof D))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};D.create=t=>new D(t);var Ke=(t,e)=>{let n;switch(t.code){case p.invalid_type:t.received===b.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case p.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,T.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:n=`Unrecognized key(s) in object: ${T.joinValues(t.keys,", ")}`;break;case p.invalid_union:n="Invalid input";break;case p.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${T.joinValues(t.options)}`;break;case p.invalid_enum_value:n=`Invalid enum value. Expected ${T.joinValues(t.options)}, received '${t.received}'`;break;case p.invalid_arguments:n="Invalid function arguments";break;case p.invalid_return_type:n="Invalid function return type";break;case p.invalid_date:n="Invalid date";break;case p.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:T.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case p.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case p.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case p.custom:n="Invalid input";break;case p.invalid_intersection_types:n="Intersection results could not be merged";break;case p.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case p.not_finite:n="Number must be finite";break;default:n=e.defaultError,T.assertNever(t)}return{message:n}},Qn=Ke;function Ri(t){Qn=t}function _t(){return Qn}var wt=t=>{let{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="",l=r.filter(c=>!!c).slice().reverse();for(let c of l)o=c(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},Bi=[];function v(t,e){let n=_t(),r=wt({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Ke?void 0:Ke].filter(i=>!!i)});t.common.issues.push(r)}var I=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if(i.status==="aborted")return S;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let i of n){let s=await i.key,a=await i.value;r.push({key:s,value:a})}return I.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return S;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value!="undefined"||i.alwaysSet)&&(r[s.value]=a.value)}return{status:e.value,value:r}}},S=Object.freeze({status:"aborted"}),$e=t=>({status:"dirty",value:t}),$=t=>({status:"valid",value:t}),Ht=t=>t.status==="aborted",Yt=t=>t.status==="dirty",Ee=t=>t.status==="valid",rt=t=>typeof Promise!="undefined"&&t instanceof Promise;function kt(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function er(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}var w;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(w||(w={}));var tt,nt,Y=class{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Jn=(t,e)=>{if(Ee(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new D(t.common.issues);return this._error=n,this._error}}};function z(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var l,c;let{message:g}=t;return a.code==="invalid_enum_value"?{message:g!=null?g:o.defaultError}:typeof o.data=="undefined"?{message:(l=g!=null?g:r)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(c=g!=null?g:n)!==null&&c!==void 0?c:o.defaultError}},description:i}}var A=class{get description(){return this._def.description}_getType(e){return oe(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new I,ctx:{common:e.parent.common,data:e.data,parsedType:oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(rt(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;let i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Jn(i,s)}"~validate"(e){var n,r;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:i});return Ee(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Ee(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:oe(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(rt(i)?i:Promise.resolve(i));return Jn(r,s)}refine(e,n){let r=i=>typeof n=="string"||typeof n=="undefined"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{let a=e(i),o=()=>s.addIssue({code:p.custom,...r(i)});return typeof Promise!="undefined"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Z({schema:this,typeName:y.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return H.create(this,this._def)}nullable(){return ie.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return L.create(this)}promise(){return _e.create(this,this._def)}or(e){return Ne.create([this,e],this._def)}and(e){return Ce.create(this,e,this._def)}transform(e){return new Z({...z(this._def),schema:this,typeName:y.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new Fe({...z(this._def),innerType:this,defaultValue:n,typeName:y.ZodDefault})}brand(){return new it({typeName:y.ZodBranded,type:this,...z(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new Oe({...z(this._def),innerType:this,catchValue:n,typeName:y.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Re.create(this,e)}readonly(){return Be.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Di=/^c[^\s-]{8,}$/i,$i=/^[0-9a-z]+$/,Ki=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Vi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Wi=/^[a-z0-9_-]{21}$/i,Ui=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Li=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Zi=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Hi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Lt,Yi=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ji=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Xi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Qi=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,es=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,tr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ts=new RegExp(`^${tr}$`);function nr(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function ns(t){return new RegExp(`^${nr(t)}$`)}function rr(t){let e=`${tr}T${nr(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function rs(t,e){return!!((e==="v4"||!e)&&Yi.test(t)||(e==="v6"||!e)&&qi.test(t))}function is(t,e){if(!Ui.test(t))return!1;try{let[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch(n){return!1}}function ss(t,e){return!!((e==="v4"||!e)&&Ji.test(t)||(e==="v6"||!e)&&Xi.test(t))}var U=class extends A{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==b.string){let s=this._getOrReturnCtx(e);return v(s,{code:p.invalid_type,expected:b.string,received:s.parsedType}),S}let r=new I,i;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){let a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?v(i,{code:p.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&v(i,{code:p.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")Zi.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"email",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Lt||(Lt=new RegExp(Hi,"u")),Lt.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"emoji",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Vi.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"uuid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")Wi.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"nanoid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")Di.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"cuid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")$i.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"cuid2",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")Ki.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"ulid",code:p.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch(a){i=this._getOrReturnCtx(e,i),v(i,{validation:"url",code:p.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"regex",code:p.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),v(i,{code:p.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),v(i,{code:p.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),v(i,{code:p.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?rr(s).test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{code:p.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?ts.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{code:p.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?ns(s).test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{code:p.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?Li.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"duration",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?rs(e.data,s.version)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"ip",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?is(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"jwt",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?ss(e.data,s.version)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"cidr",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?Qi.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"base64",code:p.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?es.test(e.data)||(i=this._getOrReturnCtx(e,i),v(i,{validation:"base64url",code:p.invalid_string,message:s.message}),r.dirty()):T.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:p.invalid_string,...w.errToObj(r)})}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...w.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...w.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...w.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...w.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...w.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...w.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...w.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...w.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...w.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...w.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...w.errToObj(n)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new U({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new U({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};U.create=t=>{var e;return new U({checks:[],typeName:y.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...z(t)})};function as(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}var te=class extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==b.number){let s=this._getOrReturnCtx(e);return v(s,{code:p.invalid_type,expected:b.number,received:s.parsedType}),S}let r,i=new I;for(let s of this._def.checks)s.kind==="int"?T.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),v(r,{code:p.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:p.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:p.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?as(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),v(r,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),v(r,{code:p.not_finite,message:s.message}),i.dirty()):T.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,w.toString(n))}gt(e,n){return this.setLimit("min",e,!1,w.toString(n))}lte(e,n){return this.setLimit("max",e,!0,w.toString(n))}lt(e,n){return this.setLimit("max",e,!1,w.toString(n))}setLimit(e,n,r,i){return new te({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:w.toString(i)}]})}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&T.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};te.create=t=>new te({checks:[],typeName:y.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...z(t)});var ne=class extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(s){return this._getInvalidInput(e)}if(this._getType(e)!==b.bigint)return this._getInvalidInput(e);let r,i=new I;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:p.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),v(r,{code:p.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),v(r,{code:p.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):T.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.bigint,received:n.parsedType}),S}gte(e,n){return this.setLimit("min",e,!0,w.toString(n))}gt(e,n){return this.setLimit("min",e,!1,w.toString(n))}lte(e,n){return this.setLimit("max",e,!0,w.toString(n))}lt(e,n){return this.setLimit("max",e,!1,w.toString(n))}setLimit(e,n,r,i){return new ne({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:w.toString(i)}]})}_addCheck(e){return new ne({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};ne.create=t=>{var e;return new ne({checks:[],typeName:y.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...z(t)})};var ze=class extends A{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==b.boolean){let r=this._getOrReturnCtx(e);return v(r,{code:p.invalid_type,expected:b.boolean,received:r.parsedType}),S}return $(e.data)}};ze.create=t=>new ze({typeName:y.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...z(t)});var le=class extends A{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==b.date){let s=this._getOrReturnCtx(e);return v(s,{code:p.invalid_type,expected:b.date,received:s.parsedType}),S}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return v(s,{code:p.invalid_date}),S}let r=new I,i;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:p.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),v(i,{code:p.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):T.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new le({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};le.create=t=>new le({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:y.ZodDate,...z(t)});var Ve=class extends A{_parse(e){if(this._getType(e)!==b.symbol){let r=this._getOrReturnCtx(e);return v(r,{code:p.invalid_type,expected:b.symbol,received:r.parsedType}),S}return $(e.data)}};Ve.create=t=>new Ve({typeName:y.ZodSymbol,...z(t)});var Ae=class extends A{_parse(e){if(this._getType(e)!==b.undefined){let r=this._getOrReturnCtx(e);return v(r,{code:p.invalid_type,expected:b.undefined,received:r.parsedType}),S}return $(e.data)}};Ae.create=t=>new Ae({typeName:y.ZodUndefined,...z(t)});var Te=class extends A{_parse(e){if(this._getType(e)!==b.null){let r=this._getOrReturnCtx(e);return v(r,{code:p.invalid_type,expected:b.null,received:r.parsedType}),S}return $(e.data)}};Te.create=t=>new Te({typeName:y.ZodNull,...z(t)});var be=class extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return $(e.data)}};be.create=t=>new be({typeName:y.ZodAny,...z(t)});var ue=class extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $(e.data)}};ue.create=t=>new ue({typeName:y.ZodUnknown,...z(t)});var X=class extends A{_parse(e){let n=this._getOrReturnCtx(e);return v(n,{code:p.invalid_type,expected:b.never,received:n.parsedType}),S}};X.create=t=>new X({typeName:y.ZodNever,...z(t)});var We=class extends A{_parse(e){if(this._getType(e)!==b.undefined){let r=this._getOrReturnCtx(e);return v(r,{code:p.invalid_type,expected:b.void,received:r.parsedType}),S}return $(e.data)}};We.create=t=>new We({typeName:y.ZodVoid,...z(t)});var L=class extends A{_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==b.array)return v(n,{code:p.invalid_type,expected:b.array,received:n.parsedType}),S;if(i.exactLength!==null){let a=n.data.length>i.exactLength.value,o=n.data.length<i.exactLength.value;(a||o)&&(v(n,{code:a?p.too_big:p.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(v(n,{code:p.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(v(n,{code:p.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,o)=>i.type._parseAsync(new Y(n,a,n.path,o)))).then(a=>I.mergeArray(r,a));let s=[...n.data].map((a,o)=>i.type._parseSync(new Y(n,a,n.path,o)));return I.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new L({...this._def,minLength:{value:e,message:w.toString(n)}})}max(e,n){return new L({...this._def,maxLength:{value:e,message:w.toString(n)}})}length(e,n){return new L({...this._def,exactLength:{value:e,message:w.toString(n)}})}nonempty(e){return this.min(1,e)}};L.create=(t,e)=>new L({type:t,minLength:null,maxLength:null,exactLength:null,typeName:y.ZodArray,...z(e)});function De(t){if(t instanceof C){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=H.create(De(r))}return new C({...t._def,shape:()=>e})}else return t instanceof L?new L({...t._def,type:De(t.element)}):t instanceof H?H.create(De(t.unwrap())):t instanceof ie?ie.create(De(t.unwrap())):t instanceof J?J.create(t.items.map(e=>De(e))):t}var C=class extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=T.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==b.object){let c=this._getOrReturnCtx(e);return v(c,{code:p.invalid_type,expected:b.object,received:c.parsedType}),S}let{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof X&&this._def.unknownKeys==="strip"))for(let c in i.data)a.includes(c)||o.push(c);let l=[];for(let c of a){let g=s[c],x=i.data[c];l.push({key:{status:"valid",value:c},value:g._parse(new Y(i,x,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof X){let c=this._def.unknownKeys;if(c==="passthrough")for(let g of o)l.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(c==="strict")o.length>0&&(v(i,{code:p.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let g of o){let x=i.data[g];l.push({key:{status:"valid",value:g},value:c._parse(new Y(i,x,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let c=[];for(let g of l){let x=await g.key,j=await g.value;c.push({key:x,value:j,alwaysSet:g.alwaysSet})}return c}).then(c=>I.mergeObjectSync(r,c)):I.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new C({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,a,o;let l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=w.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new C({...this._def,unknownKeys:"strip"})}passthrough(){return new C({...this._def,unknownKeys:"passthrough"})}extend(e){return new C({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new C({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:y.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new C({...this._def,catchall:e})}pick(e){let n={};return T.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new C({...this._def,shape:()=>n})}omit(e){let n={};return T.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new C({...this._def,shape:()=>n})}deepPartial(){return De(this)}partial(e){let n={};return T.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new C({...this._def,shape:()=>n})}required(e){let n={};return T.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof H;)s=s._def.innerType;n[r]=s}}),new C({...this._def,shape:()=>n})}keyof(){return ir(T.objectKeys(this.shape))}};C.create=(t,e)=>new C({shape:()=>t,unknownKeys:"strip",catchall:X.create(),typeName:y.ZodObject,...z(e)});C.strictCreate=(t,e)=>new C({shape:()=>t,unknownKeys:"strict",catchall:X.create(),typeName:y.ZodObject,...z(e)});C.lazycreate=(t,e)=>new C({shape:t,unknownKeys:"strip",catchall:X.create(),typeName:y.ZodObject,...z(e)});var Ne=class extends A{_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(let o of s)if(o.result.status==="valid")return o.result;for(let o of s)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;let a=s.map(o=>new D(o.ctx.common.issues));return v(n,{code:p.invalid_union,unionErrors:a}),S}if(n.common.async)return Promise.all(r.map(async s=>{let a={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let s,a=[];for(let l of r){let c={...n,common:{...n.common,issues:[]},parent:null},g=l._parseSync({data:n.data,path:n.path,parent:c});if(g.status==="valid")return g;g.status==="dirty"&&!s&&(s={result:g,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;let o=a.map(l=>new D(l));return v(n,{code:p.invalid_union,unionErrors:o}),S}}get options(){return this._def.options}};Ne.create=(t,e)=>new Ne({options:t,typeName:y.ZodUnion,...z(e)});var ae=t=>t instanceof Ge?ae(t.schema):t instanceof Z?ae(t.innerType()):t instanceof Me?[t.value]:t instanceof re?t.options:t instanceof Ie?T.objectValues(t.enum):t instanceof Fe?ae(t._def.innerType):t instanceof Ae?[void 0]:t instanceof Te?[null]:t instanceof H?[void 0,...ae(t.unwrap())]:t instanceof ie?[null,...ae(t.unwrap())]:t instanceof it||t instanceof Be?ae(t.unwrap()):t instanceof Oe?ae(t._def.innerType):[],Ue=class extends A{_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==b.object)return v(n,{code:p.invalid_type,expected:b.object,received:n.parsedType}),S;let r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(v(n,{code:p.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),S)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let s of n){let a=ae(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new Ue({typeName:y.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...z(r)})}};function Jt(t,e){let n=oe(t),r=oe(e);if(t===e)return{valid:!0,data:t};if(n===b.object&&r===b.object){let i=T.objectKeys(e),s=T.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(let o of s){let l=Jt(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(n===b.array&&r===b.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<t.length;s++){let a=t[s],o=e[s],l=Jt(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===b.date&&r===b.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ce=class extends A{_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=(s,a)=>{if(Ht(s)||Ht(a))return S;let o=Jt(s.value,a.value);return o.valid?((Yt(s)||Yt(a))&&n.dirty(),{status:n.value,value:o.data}):(v(r,{code:p.invalid_intersection_types}),S)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};Ce.create=(t,e,n)=>new Ce({left:t,right:e,typeName:y.ZodIntersection,...z(n)});var J=class extends A{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.array)return v(r,{code:p.invalid_type,expected:b.array,received:r.parsedType}),S;if(r.data.length<this._def.items.length)return v(r,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),S;!this._def.rest&&r.data.length>this._def.items.length&&(v(r,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let s=[...r.data].map((a,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new Y(r,a,r.path,o)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>I.mergeArray(n,a)):I.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new J({...this._def,rest:e})}};J.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new J({items:t,typeName:y.ZodTuple,rest:null,...z(e)})};var Pe=class extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.object)return v(r,{code:p.invalid_type,expected:b.object,received:r.parsedType}),S;let i=[],s=this._def.keyType,a=this._def.valueType;for(let o in r.data)i.push({key:s._parse(new Y(r,o,r.path,o)),value:a._parse(new Y(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?I.mergeObjectAsync(n,i):I.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof A?new Pe({keyType:e,valueType:n,typeName:y.ZodRecord,...z(r)}):new Pe({keyType:U.create(),valueType:e,typeName:y.ZodRecord,...z(n)})}},Le=class extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.map)return v(r,{code:p.invalid_type,expected:b.map,received:r.parsedType}),S;let i=this._def.keyType,s=this._def.valueType,a=[...r.data.entries()].map(([o,l],c)=>({key:i._parse(new Y(r,o,r.path,[c,"key"])),value:s._parse(new Y(r,l,r.path,[c,"value"]))}));if(r.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of a){let c=await l.key,g=await l.value;if(c.status==="aborted"||g.status==="aborted")return S;(c.status==="dirty"||g.status==="dirty")&&n.dirty(),o.set(c.value,g.value)}return{status:n.value,value:o}})}else{let o=new Map;for(let l of a){let c=l.key,g=l.value;if(c.status==="aborted"||g.status==="aborted")return S;(c.status==="dirty"||g.status==="dirty")&&n.dirty(),o.set(c.value,g.value)}return{status:n.value,value:o}}}};Le.create=(t,e,n)=>new Le({valueType:e,keyType:t,typeName:y.ZodMap,...z(n)});var ce=class extends A{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==b.set)return v(r,{code:p.invalid_type,expected:b.set,received:r.parsedType}),S;let i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(v(r,{code:p.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(v(r,{code:p.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let s=this._def.valueType;function a(l){let c=new Set;for(let g of l){if(g.status==="aborted")return S;g.status==="dirty"&&n.dirty(),c.add(g.value)}return{status:n.value,value:c}}let o=[...r.data.values()].map((l,c)=>s._parse(new Y(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,n){return new ce({...this._def,minSize:{value:e,message:w.toString(n)}})}max(e,n){return new ce({...this._def,maxSize:{value:e,message:w.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};ce.create=(t,e)=>new ce({valueType:t,minSize:null,maxSize:null,typeName:y.ZodSet,...z(e)});var ve=class extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==b.function)return v(n,{code:p.invalid_type,expected:b.function,received:n.parsedType}),S;function r(o,l){return wt({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_t(),Ke].filter(c=>!!c),issueData:{code:p.invalid_arguments,argumentsError:l}})}function i(o,l){return wt({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_t(),Ke].filter(c=>!!c),issueData:{code:p.invalid_return_type,returnTypeError:l}})}let s={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof _e){let o=this;return $(async function(...l){let c=new D([]),g=await o._def.args.parseAsync(l,s).catch(_=>{throw c.addIssue(r(l,_)),c}),x=await Reflect.apply(a,this,g);return await o._def.returns._def.type.parseAsync(x,s).catch(_=>{throw c.addIssue(i(x,_)),c})})}else{let o=this;return $(function(...l){let c=o._def.args.safeParse(l,s);if(!c.success)throw new D([r(l,c.error)]);let g=Reflect.apply(a,this,c.data),x=o._def.returns.safeParse(g,s);if(!x.success)throw new D([i(g,x.error)]);return x.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ve({...this._def,args:J.create(e).rest(ue.create())})}returns(e){return new ve({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new ve({args:e||J.create([]).rest(ue.create()),returns:n||ue.create(),typeName:y.ZodFunction,...z(r)})}},Ge=class extends A{get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};Ge.create=(t,e)=>new Ge({getter:t,typeName:y.ZodLazy,...z(e)});var Me=class extends A{_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return v(n,{received:n.data,code:p.invalid_literal,expected:this._def.value}),S}return{status:"valid",value:e.data}}get value(){return this._def.value}};Me.create=(t,e)=>new Me({value:t,typeName:y.ZodLiteral,...z(e)});function ir(t,e){return new re({values:t,typeName:y.ZodEnum,...z(e)})}var re=class extends A{constructor(){super(...arguments),tt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return v(n,{expected:T.joinValues(r),received:n.parsedType,code:p.invalid_type}),S}if(kt(this,tt,"f")||er(this,tt,new Set(this._def.values),"f"),!kt(this,tt,"f").has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return v(n,{received:n.data,code:p.invalid_enum_value,options:r}),S}return $(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return re.create(e,{...this._def,...n})}exclude(e,n=this._def){return re.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};tt=new WeakMap;re.create=ir;var Ie=class extends A{constructor(){super(...arguments),nt.set(this,void 0)}_parse(e){let n=T.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==b.string&&r.parsedType!==b.number){let i=T.objectValues(n);return v(r,{expected:T.joinValues(i),received:r.parsedType,code:p.invalid_type}),S}if(kt(this,nt,"f")||er(this,nt,new Set(T.getValidEnumValues(this._def.values)),"f"),!kt(this,nt,"f").has(e.data)){let i=T.objectValues(n);return v(r,{received:r.data,code:p.invalid_enum_value,options:i}),S}return $(e.data)}get enum(){return this._def.values}};nt=new WeakMap;Ie.create=(t,e)=>new Ie({values:t,typeName:y.ZodNativeEnum,...z(e)});var _e=class extends A{unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==b.promise&&n.common.async===!1)return v(n,{code:p.invalid_type,expected:b.promise,received:n.parsedType}),S;let r=n.parsedType===b.promise?n.data:Promise.resolve(n.data);return $(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};_e.create=(t,e)=>new _e({type:t,typeName:y.ZodPromise,...z(e)});var Z=class extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===y.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{v(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let a=i.transform(r.data,s);if(r.common.async)return Promise.resolve(a).then(async o=>{if(n.value==="aborted")return S;let l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?S:l.status==="dirty"||n.value==="dirty"?$e(l.value):l});{if(n.value==="aborted")return S;let o=this._def.schema._parseSync({data:a,path:r.path,parent:r});return o.status==="aborted"?S:o.status==="dirty"||n.value==="dirty"?$e(o.value):o}}if(i.type==="refinement"){let a=o=>{let l=i.refinement(o,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){let o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?S:(o.status==="dirty"&&n.dirty(),a(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?S:(o.status==="dirty"&&n.dirty(),a(o.value).then(()=>({status:n.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ee(a))return a;let o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Ee(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:n.value,value:o})):a);T.assertNever(i)}};Z.create=(t,e,n)=>new Z({schema:t,typeName:y.ZodEffects,effect:e,...z(n)});Z.createWithPreprocess=(t,e,n)=>new Z({schema:e,effect:{type:"preprocess",transform:t},typeName:y.ZodEffects,...z(n)});var H=class extends A{_parse(e){return this._getType(e)===b.undefined?$(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};H.create=(t,e)=>new H({innerType:t,typeName:y.ZodOptional,...z(e)});var ie=class extends A{_parse(e){return this._getType(e)===b.null?$(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ie.create=(t,e)=>new ie({innerType:t,typeName:y.ZodNullable,...z(e)});var Fe=class extends A{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===b.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};Fe.create=(t,e)=>new Fe({innerType:t,typeName:y.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...z(e)});var Oe=class extends A{_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return rt(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new D(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new D(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};Oe.create=(t,e)=>new Oe({innerType:t,typeName:y.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...z(e)});var Ze=class extends A{_parse(e){if(this._getType(e)!==b.nan){let r=this._getOrReturnCtx(e);return v(r,{code:p.invalid_type,expected:b.nan,received:r.parsedType}),S}return{status:"valid",value:e.data}}};Ze.create=t=>new Ze({typeName:y.ZodNaN,...z(t)});var os=Symbol("zod_brand"),it=class extends A{_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},Re=class extends A{_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?S:s.status==="dirty"?(n.dirty(),$e(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?S:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Re({in:e,out:n,typeName:y.ZodPipeline})}},Be=class extends A{_parse(e){let n=this._def.innerType._parse(e),r=i=>(Ee(i)&&(i.value=Object.freeze(i.value)),i);return rt(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};Be.create=(t,e)=>new Be({innerType:t,typeName:y.ZodReadonly,...z(e)});function qn(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function sr(t,e={},n){return t?be.create().superRefine((r,i)=>{var s,a;let o=t(r);if(o instanceof Promise)return o.then(l=>{var c,g;if(!l){let x=qn(e,r),j=(g=(c=x.fatal)!==null&&c!==void 0?c:n)!==null&&g!==void 0?g:!0;i.addIssue({code:"custom",...x,fatal:j})}});if(!o){let l=qn(e,r),c=(a=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:c})}}):be.create()}var us={object:C.lazycreate},y;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(y||(y={}));var ls=(t,e={message:`Input not instance of ${t.name}`})=>sr(n=>n instanceof t,e),ar=U.create,or=te.create,cs=Ze.create,ds=ne.create,ur=ze.create,ms=le.create,hs=Ve.create,gs=Ae.create,fs=Te.create,ps=be.create,vs=ue.create,bs=X.create,_s=We.create,ws=L.create,ks=C.create,ys=C.strictCreate,xs=Ne.create,Ss=Ue.create,js=Ce.create,Es=J.create,zs=Pe.create,As=Le.create,Ts=ce.create,Ns=ve.create,Cs=Ge.create,Ps=Me.create,Gs=re.create,Ms=Ie.create,Is=_e.create,Xn=Z.create,Fs=H.create,Os=ie.create,Rs=Z.createWithPreprocess,Bs=Re.create,Ds=()=>ar().optional(),$s=()=>or().optional(),Ks=()=>ur().optional(),Vs={string:t=>U.create({...t,coerce:!0}),number:t=>te.create({...t,coerce:!0}),boolean:t=>ze.create({...t,coerce:!0}),bigint:t=>ne.create({...t,coerce:!0}),date:t=>le.create({...t,coerce:!0})},Ws=S,h=Object.freeze({__proto__:null,defaultErrorMap:Ke,setErrorMap:Ri,getErrorMap:_t,makeIssue:wt,EMPTY_PATH:Bi,addIssueToContext:v,ParseStatus:I,INVALID:S,DIRTY:$e,OK:$,isAborted:Ht,isDirty:Yt,isValid:Ee,isAsync:rt,get util(){return T},get objectUtil(){return Zt},ZodParsedType:b,getParsedType:oe,ZodType:A,datetimeRegex:rr,ZodString:U,ZodNumber:te,ZodBigInt:ne,ZodBoolean:ze,ZodDate:le,ZodSymbol:Ve,ZodUndefined:Ae,ZodNull:Te,ZodAny:be,ZodUnknown:ue,ZodNever:X,ZodVoid:We,ZodArray:L,ZodObject:C,ZodUnion:Ne,ZodDiscriminatedUnion:Ue,ZodIntersection:Ce,ZodTuple:J,ZodRecord:Pe,ZodMap:Le,ZodSet:ce,ZodFunction:ve,ZodLazy:Ge,ZodLiteral:Me,ZodEnum:re,ZodNativeEnum:Ie,ZodPromise:_e,ZodEffects:Z,ZodTransformer:Z,ZodOptional:H,ZodNullable:ie,ZodDefault:Fe,ZodCatch:Oe,ZodNaN:Ze,BRAND:os,ZodBranded:it,ZodPipeline:Re,ZodReadonly:Be,custom:sr,Schema:A,ZodSchema:A,late:us,get ZodFirstPartyTypeKind(){return y},coerce:Vs,any:ps,array:ws,bigint:ds,boolean:ur,date:ms,discriminatedUnion:Ss,effect:Xn,enum:Gs,function:Ns,instanceof:ls,intersection:js,lazy:Cs,literal:Ps,map:As,nan:cs,nativeEnum:Ms,never:bs,null:fs,nullable:Os,number:or,object:ks,oboolean:Ks,onumber:$s,optional:Fs,ostring:Ds,pipeline:Bs,preprocess:Rs,promise:Is,record:zs,set:Ts,strictObject:ys,string:ar,symbol:hs,transformer:Xn,tuple:Es,undefined:gs,union:xs,unknown:vs,void:_s,NEVER:Ws,ZodIssueCode:p,quotelessJson:Oi,ZodError:D});var Ml=h.enum(["Positiv","Komparativ","Superlativ"]),Il=h.enum(["Praesens","Praeteritum","Perfekt","Imperativ","K1","K2","P1","P2","ZuInfinitiv"]),Fl=h.enum(["Grundform","Flektiert"]),Ol=h.enum(["Stark","Schwach","Gemischt"]),Rl=h.enum(["Stark","Schwach","Gemischt"]),lr=h.enum(["N","G","D","A"]),cr=h.enum(["Stark","Schwach","Gemischt"]),Us=h.boolean(),dr=h.enum(["Trennbar","Untrennbar"]),mr=h.enum(["Lokal","Temporal","Modal","Kausal","Grad"]),Bl=h.enum(["Bestimmt","Unbestimmt"]),hr=h.enum(["Intensit\xE4t","Fokus","Negation","Abt\xF6nung","Konnektiv"]),Dl=h.enum(["Grundzahl","Ordnungszahl","Bruchzahl","Multiplikativ","Kollektiv"]),$l=h.enum(["Koordinierend","Subordinierend"]),Kl=h.enum(["an","auf","bei","bis","durch","f\xFCr","gegen","in","mit","nach","ohne","um","unter","von","vor","w\xE4hrend","wegen","trotz","innerhalb","au\xDFerhalb","entlang","mithilfe","seit","\xFCber","als"]),we=h.enum(["Grundform","Flexion","Tippfehler","Unbekannt"]),yt=h.enum(["F","M","N"]),qt=h.enum(["Possessiv","Reflexiv","Personal","Generalisierendes","Demonstrativ","W-Pronomen","Indefinit","Quantifikativ"]),Xt=h.enum(["Einzahl","Mehrzahl"]),V=h.object({grundform:h.string(),emojiBeschreibungs:h.array(h.string().emoji())}),O=h.enum(["Nomen","Pronomen","Verb","Adjektiv","Adverb","Artikel","Partikel","Praeposition","Konjunktion","Numerale","Praefix","Redewendung","Interjektion","Unbekannt"]),Ls=h.object({wortart:h.literal(O.Enum.Nomen),genus:yt,eigenname:h.optional(h.boolean()),...V.shape}),Zs=h.object({wortart:h.literal(O.Enum.Pronomen),pronomenType:qt,number:h.optional(h.array(Xt)),genera:h.optional(h.array(yt)),...V.shape}),Hs=h.object({wortart:h.literal(O.Enum.Verb),...V.shape}),Ys=h.object({wortart:h.literal(O.Enum.Adjektiv),...V.shape}),Js=h.object({wortart:h.literal(O.Enum.Adverb),...V.shape}),qs=h.object({wortart:h.literal(O.Enum.Artikel),...V.shape}),Xs=h.object({wortart:h.literal(O.Enum.Partikel),...V.shape}),Qs=h.object({wortart:h.literal(O.Enum.Konjunktion),...V.shape}),ea=h.object({wortart:h.literal(O.Enum.Praeposition),...V.shape}),ta=h.object({wortart:h.literal(O.Enum.Numerale),...V.shape}),na=h.object({wortart:h.literal(O.Enum.Praefix),...V.shape}),ra=h.object({wortart:h.literal(O.Enum.Interjektion),...V.shape}),ia=h.object({wortart:h.literal(O.Enum.Redewendung),...V.shape}),gr=h.object({wortart:h.literal(O.Enum.Unbekannt),comment:h.string(),...V.shape}),st=h.discriminatedUnion("wortart",[Ls,Zs,Hs,Ys,Js,qs,Xs,Qs,ea,ta,na,ra,ia,gr]),xt=h.object({[we.enum.Grundform]:st.array(),[we.enum.Flexion]:st.array()}).or(h.object({[we.enum.Grundform]:st.array()})).or(h.object({[we.enum.Flexion]:st.array()})).or(h.object({[we.enum.Tippfehler]:st.array()})).or(h.object({[we.enum.Unbekannt]:gr.array()})),Qt=h.enum(["Zirkumfix","Konversion","Praefix","Suffix","Stamm","Endung","Fugenelement"]),St=h.object({morphemischeZerlegung:h.array(h.record(h.string(),Qt)),zusammengesetztAus:h.optional(h.array(h.record(h.string(),O)))}),sa=h.boolean(),at=h.enum(["Positiv","Komparativ","Superlativ"]),jt=h.array(h.object({adjektivstaemme:h.object({[at.enum.Positiv]:h.string().array(),[at.enum.Komparativ]:h.string().array().optional(),[at.enum.Superlativ]:h.string().array().optional()}),regelmaessig:Us,steigerungsfaehig:sa}));var u=O.Enum,f=yt.Enum,P=lr.Enum,Xl=dr.Enum,ke=cr.Enum,Ql=hr.Enum,ec=mr.Enum,G=Xt.Enum,Et=qt.Enum,k=Qt.Enum,d=at.Enum,m=we.Enum;var aa={fahren:{morphemischeZerlegung:[{fahr:k.Stamm},{en:k.Endung}]}},oa={"spazieren gehen":{morphemischeZerlegung:[{spazier:k.Stamm},{en:k.Endung},{geh:k.Stamm},{en:k.Endung}],zusammengesetztAus:[{spazieren:u.Verb},{gehen:u.Verb}]}},ua={rechercheergebnis:{morphemischeZerlegung:[{Recherche:k.Stamm},{ergeb:k.Stamm},{nis:k.Suffix}],zusammengesetztAus:[{Recherche:u.Nomen},{Ergebnis:u.Nomen}]}},la={bildungsurlaub:{morphemischeZerlegung:[{Bildung:k.Stamm},{s:k.Fugenelement},{urlaub:k.Stamm}],zusammengesetztAus:[{Bildung:u.Nomen},{Urlaub:u.Nomen}]}},ca={standhalten:{morphemischeZerlegung:[{stand:k.Stamm},{halt:k.Stamm},{en:k.Endung}],zusammengesetztAus:[{stehen:u.Verb},{halten:u.Verb}]}},da={busch:{morphemischeZerlegung:[{Busch:k.Stamm}]}},ma={verstehen:{morphemischeZerlegung:[{ver:k.Praefix},{steh:k.Stamm},{en:k.Endung}],zusammengesetztAus:[{ver:u.Praefix},{stehen:u.Verb}]}},ha={aufstehen:{morphemischeZerlegung:[{auf:k.Praefix},{steh:k.Stamm},{en:k.Endung}],zusammengesetztAus:[{auf:u.Praefix},{stehen:u.Verb}]}},ga={verfeinden:{morphemischeZerlegung:[{ver:k.Praefix},{feind:k.Stamm},{en:k.Endung}],zusammengesetztAus:[{ver:u.Praefix},{feinden:u.Verb}]}},fa={standig:{morphemischeZerlegung:[{stand:k.Stamm},{ig:k.Suffix}]}},pa={wiederaufstehen:{morphemischeZerlegung:[{wieder:k.Praefix},{auf:k.Praefix},{steh:k.Stamm},{en:k.Endung}],zusammengesetztAus:[{wieder:u.Praefix},{auf:u.Praefix},{stehen:u.Verb}]}},va={mietschuldenfreiheitsbescheinigung:{morphemischeZerlegung:[{Miet:k.Stamm},{schuld:k.Stamm},{en:k.Fugenelement},{frei:k.Stamm},{heit:k.Suffix},{s:k.Fugenelement},{be:k.Praefix},{schein:k.Stamm},{ig:k.Suffix},{ung:k.Suffix}],zusammengesetztAus:[{Miete:u.Nomen},{Schuld:u.Nomen},{Freiheit:u.Nomen},{Bescheinigung:u.Nomen}]}},ba={arbeitsunfaehigkeitsbescheinigung:{morphemischeZerlegung:[{Arbeit:k.Stamm},{s:k.Fugenelement},{un:k.Praefix},{f\u00E4hig:k.Stamm},{keit:k.Suffix},{s:k.Fugenelement},{be:k.Praefix},{schein:k.Stamm},{ig:k.Suffix},{ung:k.Suffix}],zusammengesetztAus:[{Arbeit:u.Nomen},{Unf\u00E4higkeit:u.Nomen},{Bescheinigung:u.Nomen}]}},_a={haus:{morphemischeZerlegung:[{Haus:k.Stamm}]}},wa={baum:{morphemischeZerlegung:[{Baum:k.Stamm}]}},ka={kind:{morphemischeZerlegung:[{Kind:k.Stamm}]}},ya={bundesverfassungsgericht:{morphemischeZerlegung:[{Bund:k.Stamm},{es:k.Fugenelement},{verfassung:k.Stamm},{s:k.Fugenelement},{gericht:k.Stamm}],zusammengesetztAus:[{Bund:u.Nomen},{Verfassung:u.Nomen},{Gericht:u.Nomen}]}},en={...aa,...ua,...ha,...la,...ma,...ga,...fa,...pa,...va,...ba,...ka,..._a,...wa,...ca,...da,...ya,...oa};var zt=()=>{let t=`<agent_background>You are a language expert, highly knowledgeable in German linguistics, particularly in morphology and word formation. You are well-versed in traditional German linguistic terminology as well as modern analytical approaches.
</agent_background>
<agent_role>
Your role is to provide detailed morphemic analyses of German words. Decompose words into their individual morphemes (e.g., Stamm, Praefix, Suffix, Endung, Fugenelement) and, when applicable, summarize the compound\u2019s principal components using their Grundformen. Adhere to a strict schema that distinguishes between the detailed breakdown and the compound summary.
</agent_role>
<instructions>
1. Analyze each German word by identifying its morphemic components based on the provided schema.
2. For the field <code>morphemischeZerlegung</code>, list each morpheme with its corresponding type (e.g., Morphem.Stamm, Morphem.Praefix, Morphem.Suffix, etc.).
3. For the field <code>zusammengesetztAus</code>, list the main components of the compound (using their Grundformen) as objects with the correct Wortart (e.g., Nomen, Verb, Praefix, Adjektiv...). Only Nomen should be capitalized.
4. If the word is a prefixed verb or a compound noun, include the <code>zusammengesetztAus</code> field; otherwise, omit it.
6. Ensure that the output strictly follows the given code format and schema definitions.
</instructions>
`,e=`<schema>
import { z } from "zod";

const WortartSchema = z.enum([
  "Nomen",
  "Pronomen",
  "Verb",
  "Adjektiv",
  "Adverb",
  "Artikel",
  "Partikel",
  "Praeposition",
  "Konjunktion",
  "Numerale",
  "Praefix",
  "Redewendung",
  "Interjektion",
  "Unbekannt"
]);

const MorphemSchema = z.enum([
  "Zirkumfix",
  "Konversion",
  "Praefix",
  "Suffix",
  "Stamm",
  "Endung",
  "Fugenelement"
]);

const morphemAnalysisOutputSchema = z.object({
  "morphemischeZerlegung": z.array(z.record(z.string(), MorphemSchema)),
  "zusammengesetztAus": z.optional(z.array(z.record(z.string(), WortartSchema)),),
});

</schema>
<outputformat>outputformat shall be formattes as morphemAnalysisOutputSchema</outputformat>`,r=h.record(St).safeParse(en);if(r.success){let i=`<examples>${Object.entries(en).map(([s,a])=>`<example><word>${s.toLowerCase().trim()}</word><morphemicAnalyses>${JSON.stringify(a)}</morphemicAnalyses></example>`).join("")}</examples>`;return t+e+i}else return console.error("Validation error:",r.error),""};var de={generate_dictionary_entry:Yn,generate_forms:Un,morphems:Hn,determine_infinitive_and_pick_emoji:Dn,normalize:$n,translate_de_to_eng:Kn,keymaker:Bn,c1Richter:Zn,c1Richter2:Ln,generate_valence_block:Wn,endgame:{morphems:zt()}};var At=class{constructor(e,n){this.settings=e;this.vault=n;this.genAI=null;this.model="gemini-2.0-flash-lite";this.chatSessions={};try{this.settings.apiProvider==="google"&&(this.genAI=new Qe(this.settings.googleApiKey))}catch(r){new fr.Notice(`Error initializing API service: ${r.message}`)}}async generateContent(e,n,r){let i=performance.now();try{let s=null;if(e=e.replace(/^\t+/gm,""),this.settings.apiProvider!=="google")throw this.settings.googleApiKey?(console.log("this.settings.apiProvider",this.settings.apiProvider),new Error("API provider not configured correctly.")):new Error("Google API key not configured.");this.genAI||(this.genAI=new Qe(this.settings.googleApiKey));let a=r?{temperature:0,topP:.95,topK:64,maxOutputTokens:1024,responseMimeType:"application/json"}:{temperature:0,topP:.95,topK:64,maxOutputTokens:2048},o=e;if(!this.chatSessions[o]){let _=this.genAI.getGenerativeModel({model:this.model,systemInstruction:e});this.chatSessions[o]=_.startChat({generationConfig:a,history:[]})}s=(await this.chatSessions[o].sendMessage(n)).response.text();let g=s===null?"":s,j=performance.now()-i;return console.log(`Generated content for word "${n}" in ${j.toFixed(2)}ms`),g}catch(s){let o=performance.now()-i;throw console.error(`Error generating content for word "${n}" after ${o.toFixed(2)}ms:`,s),new Error(s.message)}}async fetchTemplate(e){let[n,r]=await Promise.all([this.generateContent(de.generate_dictionary_entry,e),this.generateContent(de.generate_valence_block,e)]);return`${n.replace("<agent_output>","").replace("</agent_output>","")}

---
${r}`}async determineInfinitiveAndEmoji(e){return this.generateContent(de.determine_infinitive_and_pick_emoji,e)}async normalize(e){return this.generateContent(de.normalize,e)}async translateText(e){return this.generateContent(de.translate_de_to_eng,e)}async consultKeymaker(e){return this.generateContent(de.keymaker,e)}async consultC1Richter(e,n){return this.generateContent(n?de.c1Richter2:de.c1Richter,e)}};var Tt=class{constructor(e){this.vault=e}async appendToFile(e,n){return vt(this.vault,e,n)}async doesFileContainContent(e,n){return bt(this.vault,e,n)}};var pr=require("obsidian");async function tn(t,e,n){let r=n.basename;try{let i=await t.apiService.determineInfinitiveAndEmoji(r);i&&(i=i.replace(/^\n+/,""),i=i.trim(),await t.fileService.appendToFile(n.path,i+`
`))}catch(i){new pr.Notice(`Error: ${i.message}`)}}var vr=require("obsidian");async function nn(t,e,n,r){try{let i=await t.apiService.normalize(r);i&&e.replaceSelection(i)}catch(i){new vr.Notice(`Error: ${i.message}`)}}var br=require("obsidian");async function rn(t,e,n){try{let r=e.getCursor(),i=await t.apiService.translateText(n);i&&(e.replaceSelection(n+`

`+i+`
`),e.setCursor({line:r.line,ch:r.ch+n.length}))}catch(r){new br.Notice(`Error: ${r.message}`)}}var Er=ti(jr());async function ln(t,e,n,r){let i=n.basename,s=(0,Er.sentences)(r,{preserve_whitespace:!1,newline_boundaries:!1,html_boundaries:!1,sanitize:!0});try{let a=e.getValue(),l=t.findHighestNumber(a)+1,c="";if(s.length<=2)c=Ut(r,i,l);else{let g=[];for(let x=0;x<s.length;x++){let _=s[x].match(/(?:[^\n]+|\n+)/g);_&&g.push(_.map(N=>N.trim()?Ut(N.trim(),i,l+x):N).join(""))}c=g.join(`
`)}await navigator.clipboard.writeText(`${c}`),e.replaceSelection(`${c}`)}catch(a){console.error("Error formatting selection with number:",a)}}var ye=require("obsidian");async function cn(t,e,n,r,i){var s;try{let a=r.getFileCache(t),o=(s=a==null?void 0:a.links)!=null?s:[];console.log("links",o);let l=[];for(let c of o){let g=c.link,x=r.getFirstLinkpathDest(g,t.path);x instanceof ye.TFile?l.push({name:g,path:x.path}):l.push({name:g,path:null})}for(let c of l)try{let g,x=`[[${e}]]`;if(c.path)g=c.path;else{let _=c.name[0].toUpperCase(),N=(0,ye.normalizePath)(`Worter/${_}`);n.getFolderByPath(N)||await n.createFolder(N),g=(0,ye.normalizePath)(`${N}/${c.name}.md`)}await bt(n,g,x)||await vt(n,g,`, ${x}`)}catch(g){new ye.Notice(`Error processing link ${c.name}: ${g.message}`)}i.refresh()}catch(a){new ye.Notice(`Error processing backlinks: ${a.message}`)}}function zr(t){return t.trim().replaceAll("[[","").replaceAll("]]","").replaceAll("`","").replaceAll("=","").replaceAll("*","")}async function ut(t,e,n,r){try{let i=await t.apiService.consultC1Richter(zr(n),r);i&&e.replaceSelection(n+`
`+i.trim())}catch(i){console.error("Error in C1 Richter command:",i)}}var Zr=require("obsidian");var Ta={sitzen:{[m.Grundform]:[{wortart:u.Verb,grundform:"sitzen",emojiBeschreibungs:["\u{1F4BA}"]}]}},Na={sitz:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Sitz",emojiBeschreibungs:["\u{1FA91}"],genus:f.M}],[m.Flexion]:[{wortart:u.Verb,grundform:"sitzen",emojiBeschreibungs:["\u{1F4BA}"]}]}},Ca={untergen:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"untergehen",emojiBeschreibungs:["\u{1F305}"]}]}},Pa={untergehen:{[m.Grundform]:[{wortart:u.Verb,grundform:"untergehen",emojiBeschreibungs:["\u{1F305}"]}]}},Ga={aufgepast:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"aufpassen",emojiBeschreibungs:["\u{1F440}"]}]}},Ma={aufgepasst:{[m.Flexion]:[{wortart:u.Verb,grundform:"aufpassen",emojiBeschreibungs:["\u{1F440}"]}]}},Ia={aufpassen:{[m.Grundform]:[{wortart:u.Verb,grundform:"aufpassen",emojiBeschreibungs:["\u{1F440}"]}]}},Fa={Hoffungen:{[m.Flexion]:[{wortart:u.Nomen,grundform:"Hoffnung",emojiBeschreibungs:["\u{1F64F}"],genus:f.F}]}},Oa={hangstauf:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"aufh\xE4ngen",emojiBeschreibungs:["\u{1F5BC}\uFE0F"]}]}},Ra={aufh\u00E4ngen:{[m.Grundform]:[{wortart:u.Verb,grundform:"aufh\xE4ngen",emojiBeschreibungs:["\u{1F5BC}\uFE0F"]}]}},Ba={nieser:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Nieser",emojiBeschreibungs:["\u{1F927}"],genus:f.M}]}},Da={niesen:{[m.Grundform]:[{wortart:u.Verb,grundform:"niesen",emojiBeschreibungs:["\u{1F927}"]}]}},$a={klares:{[m.Flexion]:[{wortart:u.Adjektiv,grundform:"klar",emojiBeschreibungs:["\u2728"]}]}},Ka={klar:{[m.Grundform]:[{wortart:u.Adjektiv,grundform:"klar",emojiBeschreibungs:["\u2728"]},{wortart:u.Adverb,grundform:"klar",emojiBeschreibungs:["\u2728"]},{wortart:u.Nomen,grundform:"Klar",emojiBeschreibungs:["\u2728"],genus:f.N}]}},Va={hiemwerken:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"heimwerken",emojiBeschreibungs:["\u{1F528}"]},{wortart:u.Nomen,grundform:"Heimwerk",emojiBeschreibungs:["\u{1F6E0}"],genus:f.N}]}},Wa={heimwerken:{[m.Grundform]:[{wortart:u.Verb,grundform:"heimwerken",emojiBeschreibungs:["\u{1F528}"]}],[m.Flexion]:[{wortart:u.Nomen,grundform:"Heimwerk",emojiBeschreibungs:["\u{1F6E0}"],genus:f.N}]}},Ua={heimwerkst:{[m.Flexion]:[{wortart:u.Verb,grundform:"heimwerken",emojiBeschreibungs:["\u{1F528}"]}]}},La={unbandiges:{[m.Tippfehler]:[{wortart:u.Adjektiv,grundform:"unb\xE4ndig",emojiBeschreibungs:["\u{1F525}"]}]}},Za={backen:{[m.Grundform]:[{wortart:u.Verb,grundform:"backen",emojiBeschreibungs:["\u{1F35E}"]}],[m.Flexion]:[{wortart:u.Nomen,grundform:"Backe",emojiBeschreibungs:["\u{1F60A}"],genus:f.F}]}},Ha={Rechercheergbnisse:{[m.Tippfehler]:[{wortart:u.Nomen,grundform:"Rechercheergebnis",emojiBeschreibungs:["\u{1F50D}"],genus:f.N}]}},Ya={See:{[m.Grundform]:[{wortart:u.Nomen,grundform:"See",emojiBeschreibungs:["\u{1F3DE}"],genus:f.M},{wortart:u.Nomen,grundform:"See",emojiBeschreibungs:["\u{1F30A}"],genus:f.F}]}},Ja={trotz:{[m.Grundform]:[{wortart:u.Praeposition,grundform:"trotz",emojiBeschreibungs:["\u{1F6E1}"]},{wortart:u.Nomen,grundform:"Trotz",emojiBeschreibungs:["\u{1F624}"],genus:f.M}],[m.Flexion]:[{wortart:u.Verb,grundform:"trotzen",emojiBeschreibungs:["\u{1F624}"]}]}},qa={trozdem:{[m.Tippfehler]:[{wortart:u.Adverb,grundform:"trotzdem",emojiBeschreibungs:["\u{1F4AA}\u{1F525}"]}]}},Xa={mit:{[m.Grundform]:[{wortart:u.Praeposition,grundform:"mit",emojiBeschreibungs:["\u{1F91D}"]},{wortart:u.Praefix,grundform:"mit",emojiBeschreibungs:["\u{1F91D}"]}]}},Qa={an:{[m.Grundform]:[{wortart:u.Praeposition,grundform:"an",emojiBeschreibungs:["\u{1F4CD}"]},{wortart:u.Praefix,grundform:"an",emojiBeschreibungs:["\u{1F4CD}"]}]}},eo={selbst:{[m.Grundform]:[{wortart:u.Adverb,grundform:"selbst",emojiBeschreibungs:["\u{1F64B}"]},{wortart:u.Nomen,grundform:"Selbst",emojiBeschreibungs:["\u{1FA9E}"],genus:f.N}]}},to={uber:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Uber",emojiBeschreibungs:["\u{1F3D9}\uFE0F"],genus:f.N,eigenname:!0}]}},no={\u00FCber:{[m.Grundform]:[{wortart:u.Praeposition,grundform:"\xFCber",emojiBeschreibungs:["\u{1F51D}"]},{wortart:u.Praefix,grundform:"\xFCber",emojiBeschreibungs:["\u{1F51D}"]}]}},ro={umfaren:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"umfahren",emojiBeschreibungs:["\u{1F697}\u{1F504}","\u{1F697}\u{1F4A5}"]}]}},io={umfahren:{[m.Grundform]:[{wortart:u.Verb,grundform:"umfahren",emojiBeschreibungs:["\u{1F697}\u{1F504}","\u{1F697}\u{1F4A5}"]}]}},so={umfahrten:{[m.Flexion]:[{wortart:u.Nomen,grundform:"Umfahrt",emojiBeschreibungs:["\u{1F697}\u{1F504}"],genus:f.F}]}},ao={geoffnet:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"\xF6ffnen",emojiBeschreibungs:["\u{1F6AA}\u{1F450}"]}]}},oo={verfallen:{[m.Grundform]:[{wortart:u.Verb,grundform:"verfallen",emojiBeschreibungs:["\u{1F3DA}\uFE0F"]}]}},uo={verfall:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Verfall",emojiBeschreibungs:["\u{1F3DA}\uFE0F"],genus:f.M}],[m.Flexion]:[{wortart:u.Verb,grundform:"verfallen",emojiBeschreibungs:["\u{1F3DA}\uFE0F"]}]}},lo={"der verfall":{[m.Grundform]:[{wortart:u.Nomen,grundform:"Verfall",emojiBeschreibungs:["\u{1F3DA}\uFE0F"],genus:f.M}]}},co={schloss:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Schloss",emojiBeschreibungs:["\u{1F3F0}","\u{1F512}"],genus:f.N}],[m.Flexion]:[{wortart:u.Verb,grundform:"schlie\xDFen",emojiBeschreibungs:["\u{1F6AA}"]}]}},mo={gehobener:{[m.Flexion]:[{wortart:u.Adjektiv,grundform:"gehoben",emojiBeschreibungs:["\u{1F3A9}"]}]}},ho={wahlwiese:{[m.Tippfehler]:[{wortart:u.Adverb,grundform:"wahlweise",emojiBeschreibungs:["\u{1F500}"]}]}},go={deutschen:{[m.Flexion]:[{wortart:u.Adjektiv,grundform:"deutsch",emojiBeschreibungs:["\u{1F1E9}\u{1F1EA}"]},{wortart:u.Nomen,grundform:"Deutsche",emojiBeschreibungs:["\u{1F1E9}\u{1F1EA}"],genus:f.N}]}},fo={deutsch:{[m.Grundform]:[{wortart:u.Adjektiv,grundform:"deutsch",emojiBeschreibungs:["\u{1F1E9}\u{1F1EA}"]},{wortart:u.Adverb,grundform:"deutsch",emojiBeschreibungs:["\u{1F1E9}\u{1F1EA}"]}]}},po={laden:{[m.Grundform]:[{wortart:u.Verb,grundform:"laden",emojiBeschreibungs:["\u{1F4E6}\u27A1\uFE0F\u{1F69A}","\u2709\uFE0F\u27A1\uFE0F\u{1F465}"]},{wortart:u.Nomen,grundform:"Laden",emojiBeschreibungs:["\u{1F3EA}\u{1F6CD}\uFE0F"],genus:f.M}]}},vo={gefallen:{[m.Grundform]:[{wortart:u.Verb,grundform:"gefallen",emojiBeschreibungs:["\u{1F44D}"]}]}},bo={wende:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Wende",emojiBeschreibungs:["\u{1F9F1}\u27A1\uFE0F\u{1F1E9}\u{1F1EA}"],genus:f.F},{wortart:u.Nomen,grundform:"Wende",emojiBeschreibungs:["\u{1F504}"],genus:f.M}],[m.Flexion]:[{wortart:u.Verb,grundform:"wenden",emojiBeschreibungs:["\u{1F504}","\u{1F449}\u{1F4AC}"]}]}},_o={wenden:{[m.Grundform]:[{wortart:u.Verb,grundform:"wenden",emojiBeschreibungs:["\u{1F504}","\u{1F449}\u{1F4AC}"]}],[m.Flexion]:[{wortart:u.Nomen,grundform:"Wende",emojiBeschreibungs:["\u{1F9F1}\u27A1\uFE0F\u{1F1E9}\u{1F1EA}"],genus:f.F},{wortart:u.Nomen,grundform:"Wende",emojiBeschreibungs:["\u{1F504}"],genus:f.M}]}},wo={stapelbaren:{[m.Flexion]:[{wortart:u.Adjektiv,grundform:"stapelbar",emojiBeschreibungs:["\u{1F4E6}"]}]}},ko={vorbei:{[m.Grundform]:[{wortart:u.Praeposition,grundform:"vorbei",emojiBeschreibungs:["\u{1F3C3}\u200D\u2642\uFE0F\u{1F4A8}"]},{wortart:u.Adverb,grundform:"vorbei",emojiBeschreibungs:["\u{1F3C1}"]}]}},yo=`a \u2013 das Kissen hab' ich auch [[bekommen]].  
Aber es ist vorbei! [[vorbei]]! Und [[jetzt]] [[heul]] bitte nicht!  
Tsch\xFCs.  
M\xE4nner!`,xo={[yo]:{[m.Unbekannt]:[{wortart:u.Unbekannt,grundform:"Unbekannt",emojiBeschreibungs:["\u2753"],comment:"Der Text ist kein einzelnes Wort und enth\xE4lt keine bekannten Redewendungen."}]}},So={augeben:{[m.Unbekannt]:[{wortart:u.Unbekannt,grundform:"Unbekannt",emojiBeschreibungs:["\u2753"],comment:"Ich kann deine Absicht nicht feststellen. Vielleicht hast du 'ausgeben' oder 'aufgeben' gemeint?"}]}},jo={"ging spaziren":{[m.Flexion]:[{wortart:u.Verb,grundform:"spazieren gehen",emojiBeschreibungs:["\u{1F6B6}\u200D\u2642\uFE0F"]}]}},Eo={"spazieren gehen":{[m.Grundform]:[{wortart:u.Verb,grundform:"spazieren gehen",emojiBeschreibungs:["\u{1F6B6}\u200D\u2642\uFE0F"]}]}},zo={doch:{[m.Grundform]:[{wortart:u.Partikel,grundform:"doch",emojiBeschreibungs:["\u{1F4AC}"]}]}},Ao={"das eis zwischen sie ist gebrochen":{[m.Flexion]:[{wortart:u.Redewendung,grundform:"Das Eis brechen",emojiBeschreibungs:["\u2744\uFE0F\u{1F9CA}"]}]}},To={"das eis brechen":{[m.Flexion]:[{wortart:u.Redewendung,grundform:"Das Eis brechen",emojiBeschreibungs:["\u2744\uFE0F\u{1F9CA}"]}]}},No={schaffen:{[m.Grundform]:[{wortart:u.Verb,grundform:"schaffen",emojiBeschreibungs:["\u{1F4AA}\u2705","\u2728\u{1F30D}"]}]}},Co={"kuh ist nun vom eis":{[m.Flexion]:[{wortart:u.Redewendung,grundform:"die Kuh ist vom Eis",emojiBeschreibungs:["\u{1F404}\u{1F9CA}"]}]}},Po={schafen:{[m.Flexion]:[{wortart:u.Nomen,grundform:"Schaf",emojiBeschreibungs:["\u{1F411}"],genus:f.N}]}},Go={mleken:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"melken",emojiBeschreibungs:["\u{1F404}"]}]}},Mo={melken:{[m.Grundform]:[{wortart:u.Verb,grundform:"melken",emojiBeschreibungs:["\u{1F404}"]}]}},Io={bewegen:{[m.Grundform]:[{wortart:u.Verb,grundform:"bewegen",emojiBeschreibungs:["\u{1F4AA}\u27A1\uFE0F\u{1FA91}","\u{1F4AC}\u27A1\uFE0F\u{1F622}"]}]}},Fo={senden:{[m.Grundform]:[{wortart:u.Verb,grundform:"senden",emojiBeschreibungs:["\u{1F4E4}","\u{1F4E1}"]}]}},Oo={genau:{[m.Grundform]:[{wortart:u.Adverb,grundform:"genau",emojiBeschreibungs:["\u2714\uFE0F"]},{wortart:u.Adjektiv,grundform:"genau",emojiBeschreibungs:["\u2714\uFE0F"]}]}},Ro={genauso:{[m.Grundform]:[{wortart:u.Adverb,grundform:"genauso",emojiBeschreibungs:["\u{1F91D}"]}]}},Bo={fussballbegeistert:{[m.Tippfehler]:[{wortart:u.Adjektiv,grundform:"fu\xDFballbegeistert",emojiBeschreibungs:["\u26BD\uFE0F\u{1F525}"]}]}},Do={sofort:{[m.Grundform]:[{wortart:u.Adverb,grundform:"sofort",emojiBeschreibungs:["\u23F1\uFE0F"]}]}},$o={zwar:{[m.Grundform]:[{wortart:u.Partikel,grundform:"zwar",emojiBeschreibungs:["\u{1F517}"]}]}},Ko={weiss:{[m.Flexion]:[{wortart:u.Nomen,grundform:"Wei\xDF",emojiBeschreibungs:["\u26AA\uFE0F"],genus:f.N},{wortart:u.Adjektiv,grundform:"wei\xDF",emojiBeschreibungs:["\u26AA\uFE0F"]},{wortart:u.Verb,grundform:"wissen",emojiBeschreibungs:["\u{1F9E0}"]}]}},Vo={wei\u00DF:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Wei\xDF",emojiBeschreibungs:["\u26AA\uFE0F"],genus:f.N},{wortart:u.Adjektiv,grundform:"wei\xDF",emojiBeschreibungs:["\u26AA\uFE0F"]}],[m.Flexion]:[{wortart:u.Verb,grundform:"wissen",emojiBeschreibungs:["\u{1F9E0}"]}]}},Wo={wissen:{[m.Grundform]:[{wortart:u.Verb,grundform:"wissen",emojiBeschreibungs:["\u{1F9E0}"]},{wortart:u.Nomen,grundform:"Wissen",emojiBeschreibungs:["\u{1F9E0}"],genus:f.N}]}},Uo={erinern:{[m.Tippfehler]:[{wortart:u.Verb,grundform:"erinnern",emojiBeschreibungs:["\u{1F9E0}"]}]}},Lo={erinnern:{[m.Grundform]:[{wortart:u.Verb,grundform:"erinnern",emojiBeschreibungs:["\u{1F9E0}"]}]}},Zo={rechnen:{[m.Grundform]:[{wortart:u.Verb,grundform:"rechnen",emojiBeschreibungs:["\u{1F9EE}"]}]}},Ho={glaubiger:{[m.Tippfehler]:[{wortart:u.Nomen,grundform:"Gl\xE4ubiger",emojiBeschreibungs:["\u{1F4B0}"],genus:f.M},{wortart:u.Adjektiv,grundform:"gl\xE4ubig",emojiBeschreibungs:["\u{1F64F}"]}]}},Yo={sie:{[m.Grundform]:[{wortart:u.Pronomen,grundform:"sie",emojiBeschreibungs:["\u{1F469}"],pronomenType:Et.Personal,number:[G.Einzahl],genera:[f.F]},{wortart:u.Pronomen,grundform:"sie",emojiBeschreibungs:["\u{1F465}"],pronomenType:Et.Personal,number:[G.Mehrzahl]},{wortart:u.Pronomen,grundform:"sie",emojiBeschreibungs:["\u{1F9D1}\u200D\u{1F4BC}"],pronomenType:Et.Personal,number:[G.Einzahl,G.Mehrzahl]}]}},Jo={"halben Miete":{[m.Flexion]:[{wortart:u.Redewendung,grundform:"die halbe Miete sein",emojiBeschreibungs:["\u{1F511}\u{1F9E9}\u{1F3AF}"]}]}},qo={"die halbe Miete sein":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"die halbe Miete sein",emojiBeschreibungs:["\u{1F511}\u{1F9E9}\u{1F3AF}"]}]}},Xo={"ganz und gar":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"ganz und gar",emojiBeschreibungs:["\u{1F4AF}\u{1F44C}"]}]}},Qo={"hast do tomaten auf den augen?":{[m.Flexion]:[{wortart:u.Redewendung,grundform:"Tomaten auf den Augen haben",emojiBeschreibungs:["\u{1F345}\u{1F648}\u{1F937}\u200D\u2642\uFE0F"]}]}},eu={"und ihm einen b\xE4ren aufzubinden?":{[m.Flexion]:[{wortart:u.Redewendung,grundform:"Jemandem einen B\xE4ren aufbinden",emojiBeschreibungs:["\u{1F43B}\u{1F925}\u{1F644}"]}]}},tu={"durch und durch":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"durch und durch",emojiBeschreibungs:["\u{1F4AF}\u{1F44C}"]}]}},nu={"voll und ganz":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"voll und ganz",emojiBeschreibungs:["\u{1F3AF}\u{1F44C}"]}]}},ru={"null und nichtig":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"null und nichtig",emojiBeschreibungs:["0\uFE0F\u20E3\u{1F6AB}"]}]}},iu={"klipp und klar":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"klipp und klar",emojiBeschreibungs:["\u2705"]}]}},su={"rein und gar":{[m.Grundform]:[{wortart:u.Redewendung,grundform:"rein und gar",emojiBeschreibungs:["\u2728\u{1F44C}"]}]}},au={molken:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Molke",emojiBeschreibungs:["\u{1F95B}"],genus:f.F}],[m.Flexion]:[{wortart:u.Verb,grundform:"melken",emojiBeschreibungs:["\u{1F404}"]}]}},ou={schleifen:{[m.Grundform]:[{wortart:u.Verb,grundform:"schleifen",emojiBeschreibungs:["\u2699\uFE0F\u2728"]},{wortart:u.Verb,grundform:"schleifen",emojiBeschreibungs:["\u{1F6B6}\u200D\u2642\uFE0F\u{1F4A4}"]}],[m.Flexion]:[{wortart:u.Nomen,grundform:"Schleife",emojiBeschreibungs:["\u{1F380}"],genus:f.F}]}},uu={mietschuldenfreiheitsbescheinigung:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Mietschuldenfreiheitsbescheinigung",emojiBeschreibungs:["\u{1F3E0}\u2705\u{1F4C4}"],genus:f.F}]}},lu={arbeitsunfaehigkeitsbescheinigung:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Arbeitsunfaehigkeitsbescheinigung",emojiBeschreibungs:["\u{1F912}\u{1F3E5}\u{1F4C4}"],genus:f.F}]}},cu={bundesverfassungsgericht:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Bundesverfassungsgericht",emojiBeschreibungs:["\u2696\uFE0F\u{1F3DB}\uFE0F\u{1F4DC}"],genus:f.N}]}},du={bildungsurlaub:{[m.Grundform]:[{wortart:u.Nomen,grundform:"Bildungsurlaub",emojiBeschreibungs:["\u{1F4DA}\u{1F3D6}\uFE0F"],genus:f.M}]}},mu={wild:{[m.Grundform]:[{wortart:u.Adjektiv,grundform:"wild",emojiBeschreibungs:["\u{1F981}"]},{wortart:u.Nomen,grundform:"Wild",emojiBeschreibungs:["\u{1F98C}"],genus:f.N}]}},hu={wilder:{[m.Flexion]:[{wortart:u.Adjektiv,grundform:"wild",emojiBeschreibungs:["\u{1F981}"]}]}},gu={wilde:{[m.Flexion]:[{wortart:u.Adjektiv,grundform:"wild",emojiBeschreibungs:["\u{1F981}"]},{wortart:u.Nomen,grundform:"Wild",emojiBeschreibungs:["\u{1F98C}"],genus:f.N}]}},dn={...au,...Yo,...mu,...hu,...gu,...Ho,...Oo,...Ro,...Bo,...Do,...$o,...Ko,...Uo,...Lo,...Zo,...Ba,...Na,...Ta,...Ga,...Ca,...Fa,...Oa,...fo,...Va,...$a,...Ha,...Za,...La,...Ya,...Ja,...Xa,...Qa,...to,...eo,...ro,...ao,...oo,...co,...mo,...ho,...go,...bo,...wo,...ko,...jo,...Eo,...zo,...xo,...po,...vo,...Ao,...Ka,...Go,...Io,...Fo,...To,...Jo,...Xo,...Qo,...eu,...tu,...nu,...ru,...iu,...su,...So,...Po,...Wo,...No,...Co,...uo,...lo,...qa,...ou,...uu,...lu,...cu,...du,...Pa,...Ma,...Ia,...Ra,...Da,...Wa,...Ua,..._o,...Mo,...io,...so,...Vo,...no,...qo};var Nt=()=>{let t=`<agent_background>
  You are a very smart and very helpful German language expert. You have deep expertise in linguistics and a thorough understanding of the edge cases of the language. You are very familiar with resources such as "grammis.ids-mannheim.de", "verbformen.de" and "dwds.de". May even be a contributor.
</agent_background>

<agent_role>
<agent_role>
  Your role is to assist students in making sense of German words and phrases they encounter in the german texts. 
  When a student gives you a note with a word or expression, your task is to tell them what they are looking at. 
  For example, if a student gives you "sitz", you tell them, that it can be a valid "Grundform" for a noun Sitz, or a "Flexion" of the verb "sitzen".
  Or if the student gives you "wilde", you tell them, that it can be a "Flexion" of an adjektive "wild", or a "Flexion" of a Nomen das "Wild".  
  Or if the student gives you "wild", you tell them, that it can be a "Grundform" of an adjektive "wild", or a "Grundform" of a Nomen das "Wild".  
  Or if the student gives you "mleken", you tell them, that it's a "Tippfehler" from "melken".  
</agent_role>
</agent_role>
<instructions>
Your task is to generate all possible interpretations, linking the given form to its underlying grundforms, while considering potential errors or ambiguities. Your deep understanding of German language intricacies\u2014including idiomatic expressions, separable verbs, and edge cases\u2014is essential to provide clear and accurate guidance. 
The output shall be a valid JSON object with every given word or expression, that can match the given note. Strictly follow the provided JSON schema. The input might contain errors and is case-insensitive. The output shall not contain mistakes and is case-sensitive. Beyond simply assigning schema fields, incorporate your deep understanding of German language intricacies:
  - The note is case insensitive (e.g., a valid grundform of "sie" (plural), "sie" (singular) and "Sie" (singular)).
  - If a note contains more than one word, try to look for a separable verb, or a well-known idiom inside (like "ich rufe an" contains "anrufen", or "sie sind ganz und gar normal" contains "ganz und gar"). If there are no known idioms or separable verbs, fallback to the "Unbekannt" case.
  - If the word can be recognized as a form of multiple parts of speech, make an object for each one (e.g., "molken" can be a past form of the irregular version of the verb "melken," or a plural form of the feminine noun "Molke") - make a separate object for each one.
  - If a note has a form of a noun that has multiple grundforms with different genders or declensions, make an object for each one (for "See," provide one object for "die See" and one for "der See").
  - If a note has a form of a noun that has multiple grundforms with the same gender and declension but different meanings, give only one object with different meanings listed in emojiBeschreibungs (for "Schloss," give one object with emojiBeschreibungs: ["\u{1F3F0}", "\u{1F512}"]).
  - If a note has a form of a verb that has multiple grundforms with different separabilities or conjugation patterns, give one grundform object with different meanings listed in one emojiBeschreibungs.
  - It is very important to list ALL the possible grundforms of a verb (if there are multiple): both for separable and untrennbar forms, as well as for regular and irregular conjugations.
  
  ONLY IF there are no correctly spelled grundform / Flexion matches for a given note, consider the following:
  - The note might contain small errors.
  - If a word has an obvious typo (a small or common mistake in spelling) and you are very confident in what was meant ("glaubiger" is just missing an umlaut to become valid "gl\xE4ubiger (adj)" or "gl\xE4ubiger (nom)").
  - If the word in the note contains too many mistakes for unambiguous recognition (e.g., "augeben" can be "ausgeben" or "aufgeben"), fallback to the "Unbekannt" case and include a "comment" explaining the ambiguity.
  - If the note is ambiguous beyond recognition, fallback to "Unbekannt" and include a "comment" explaining the confusion.
  - The final output must be a valid JSON that strictly adheres to the provided JSON schema, without any extra commentary or additional keys.
  Describe the common meanings with emojis: up to 3 emojis per meaning. Aim for as few as possible while describing the meaning thoroughly. Separate distinct meanings in different elements of emojiBeschreibungs array. So for "Der Schloss" it is ["\u{1F3F0}", "\u{1F512}"], for leisten it is ["\u{1F3C6}\u{1F3AF}", "\u{1F4B8}"], for sitzen it is ["\u{1F4BA}"] and for "alles unter einen Hut bringen" it is ["\u{1F3A9}\u{1F9E9}\u{1F939}\u200D\u2642\uFE0F"].
</instructions>`,e=`<schema>
const MatchSchema = z.enum(["Grundform", "Flexion", "Tippfehler", "Unbekannt"]);

const GenusSchema = z.enum(["F", "M", "N"]); // ["Feminin", "Maskulin", "Neutrum"]

const PronomenTypeSchema = z.enum([
  "Possessiv",
  "Reflexiv",
  "Personal",
  "Generalisierendes",
  "Demonstrativ",
  "W-Pronomen",
  "Indefinit",
  "Quantifikativ",
]);

const NumerusSchema = z.enum(["Einzahl", "Mehrzahl"]);

const CommonGrundformsFeildsSchema = z.object({
    grundform: z.string(),
    emojiBeschreibungs: z.array(z.string().emoji()), // Describe the common meanings with emojies; Up to 3 emojies per meaning. Aim for less, if possible
});

const WortartSchema = z.enum([
  "Nomen",
  "Pronomen",
  "Verb",
  "Adjektiv",
  "Adverb",
  "Artikel",
  "Partikel",
  "Praeposition",
  "Konjunktion",
  "Numerale",
  "Praefix",
  "Redewendung",
  "Interjektion",
  "Unbekannt"
]);

const NomenGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Nomen),
  genus: GenusSchema,
  eigenname: z.optional(z.boolean()),
  ...CommonGrundformsFeildsSchema.shape,
});

const PronomenGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Pronomen),
  pronomenType: PronomenTypeSchema,
  number: z.optional(z.array(NumerusSchema)),
  genera: z.optional(z.array(GenusSchema)),
  ...CommonGrundformsFeildsSchema.shape,
});

const VerbGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Verb),
  ...CommonGrundformsFeildsSchema.shape,
});

const AdjektivGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Adjektiv),
  ...CommonGrundformsFeildsSchema.shape,
});

const AdverbGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Adverb),
  ...CommonGrundformsFeildsSchema.shape,
});

const ArtikelGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Artikel),
  ...CommonGrundformsFeildsSchema.shape,
});

const PartikelGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Partikel),
  ...CommonGrundformsFeildsSchema.shape,
});

const KonjunktionGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Konjunktion),
  ...CommonGrundformsFeildsSchema.shape,
});

const PraepositionGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Praeposition),
  ...CommonGrundformsFeildsSchema.shape,
});

const NumeraleGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Numerale),
  ...CommonGrundformsFeildsSchema.shape,
});

const PraefixGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Praefix),
  ...CommonGrundformsFeildsSchema.shape,
});

const InterjektionGrundformSchema = z.object({
  wortart: z.literal(WortartSchema.Enum.Interjektion),
  ...CommonGrundformsFeildsSchema.shape,
});

const RedewendungGrundformSchema = z.object({
    wortart: z.literal(WortartSchema.Enum.Redewendung),
    ...CommonGrundformsFeildsSchema.shape,
});

const UnbekanntGrundformSchema = z.object({
    wortart: z.literal(WortartSchema.Enum.Unbekannt),
    comment: z.string(),
    ...CommonGrundformsFeildsSchema.shape,
});

const GrundformSchema = z.discriminatedUnion("wortart", [
  NomenGrundformSchema,
  PronomenGrundformSchema,
  VerbGrundformSchema,
  AdjektivGrundformSchema,
  AdverbGrundformSchema,
  ArtikelGrundformSchema,
  PartikelGrundformSchema,
  KonjunktionGrundformSchema,
  PraepositionGrundformSchema,
  NumeraleGrundformSchema,
  PraefixGrundformSchema,
  InterjektionGrundformSchema,
  RedewendungGrundformSchema,
  UnbekanntGrundformSchema,
]);

const grundformsOutputSchema = 
z.object({ // This shall be a priority. We need to find every walid way to interprit the given input as a form of something 
  [MatchSchema.enum.Grundform]: GrundformSchema.array(), 
  [MatchSchema.enum.Flexion]: GrundformSchema.array(),
})
.or(z.object({
  [MatchSchema.enum.Grundform]: GrundformSchema.array(), 
}))
.or(z.object({
  [MatchSchema.enum.Flexion]: GrundformSchema.array(),
}))
.or(z.object({
  [MatchSchema.enum.Tippfehler]: GrundformSchema.array(), 
}))
.or(z.object({
  [MatchSchema.enum.Unbekannt]: UnbekanntGrundformSchema.array(), 
}))

</schema>
<outputformat>outputformat shall be formattes as grundformsOutputSchema</outputformat>`,r=h.record(h.string(),xt).safeParse(dn);if(r.success){let i=`<examples>${Object.entries(dn).map(([s,a])=>`<example><note>${s.toLowerCase().trim()}</note><grundforms>${JSON.stringify(a)}</grundforms></example>`).join("")}</examples>`;return t+e+i}else return console.error("Validation error:",r.error),""};async function Ct(t,e,n){let r=await t.app.metadataCache.getFirstLinkpathDest(n,e.path);return r?r.path:null}var mn=({word:t,wortart:e,match:n,maybeExisitingNotePath:r})=>{let i=r!==null;if(t.length<2)return i?`${r}|${t}`:"";switch(e){case u.Unbekannt:return"";case u.Praefix:return`Grammatik/Morphem/${e}/List/${t} (${e})`;case u.Praeposition:return`Grammatik/${e}/List/${t} (${e})`;case u.Pronomen:return`Grammatik/${e}/List/${t} (${e})`;case u.Konjunktion:return`Grammatik/${e}/List/${t} (${e})`;case u.Partikel:return`Grammatik/${e}/List/${t} (${e})`;case u.Artikel:return`Grammatik/${e}/List/${t} (${e})`;default:return i?`${r}`:`Worter/${n}/${e}/${t[0]}/${t[1]}/${t}`}};function He({word:t,path:e,noteExists:n}){if(e){if(n)return`[[${t}]]`}else return"";return`[[${e}|${t}]]`}async function Ar(t,e){let n=mn({word:t.grundform,wortart:t.wortart,match:m.Grundform,maybeExisitingNotePath:e});return He({word:t.grundform,path:n,noteExists:!!e})}async function Tr(t,e,n){let r=n.map(async i=>{let s=await Ct(t,e,i.grundform);return await mn({word:i.grundform,wortart:i.wortart,match:m.Grundform,maybeExisitingNotePath:s})});return await Promise.all(r)}async function Nr(t,e,n){let r=n.map(async i=>{let s=await Ct(t,e,i.grundform);return await mn({word:i.grundform,wortart:i.wortart,match:i.match,maybeExisitingNotePath:s})});return await Promise.all(r)}function Cr(t){return t.map(e=>`Grammatik/Morphem/${e.morphem}/List/${e.grundform[0]}/${e.grundform} (${e.morphem})`)}var Pr={[m.Grundform]:2,[m.Flexion]:1,[m.Tippfehler]:0,[m.Unbekannt]:-1},fu={[m.Grundform]:"",[m.Flexion]:"Flexion",[m.Tippfehler]:"Tippfehler",[m.Unbekannt]:"Unbekannt"},Gr=({wortart:t,match:e})=>{let n=t===u.Unbekannt?"":fu[e];return n&&`*${n}*`};function Mr(t,e){let n=Pr[t.match];return Pr[e.match]-n}function Ir(t){return`${t.wortart}-${(t==null?void 0:t.genus)||""}`}function Fr(t){let e=[],n=new Map(t.map(r=>[Ir(r),{...r,emojiBeschreibungs:[]}]));for(let r of t){let i=Ir(r);if(r.wortart===u.Adverb&&n.has(`${u.Adjektiv}-`))continue;let s=n.get(i);s&&n.set(i,{...s,emojiBeschreibungs:[...s.emojiBeschreibungs,...r.emojiBeschreibungs]})}for(let r of n.values())e.push(r);return e}var Or={[f.F]:"die",[f.N]:"das",[f.M]:"der"},pu=({genus:t})=>`<span class="custom-color-for-${Or[t]}">${Or[t]}</span>`,vu=t=>`${t.emojiBeschreibungs.join(" | ")}`,bu=t=>{let e=t.wortart;return e===u.Nomen?pu(t):`*${e}*`};async function Rr(t,e){return[Gr(t),bu(t),vu(t),await Ar(t,e)].filter(n=>n).join(" ")}var _u={gut:[{adjektivstaemme:{[d.Positiv]:["gut"],[d.Komparativ]:["besser"],[d.Superlativ]:["best"]},regelmaessig:!1,steigerungsfaehig:!0}]},wu={gro\u00DF:[{adjektivstaemme:{[d.Positiv]:["gro\xDF"],[d.Komparativ]:["gr\xF6\xDFer"],[d.Superlativ]:["gr\xF6\xDFt"]},regelmaessig:!1,steigerungsfaehig:!0}]},ku={klein:[{adjektivstaemme:{[d.Positiv]:["klein"],[d.Komparativ]:["kleiner"],[d.Superlativ]:["kleinst"]},regelmaessig:!0,steigerungsfaehig:!0}]},yu={aussehend:[{adjektivstaemme:{[d.Positiv]:["aussehend"]},regelmaessig:!0,steigerungsfaehig:!1}]},xu={tot:[{adjektivstaemme:{[d.Positiv]:["tot"]},regelmaessig:!0,steigerungsfaehig:!1}]},Su={flei\u00DFig:[{adjektivstaemme:{[d.Positiv]:["flei\xDFig"],[d.Komparativ]:["flei\xDFiger"],[d.Superlativ]:["flei\xDFigst"]},regelmaessig:!0,steigerungsfaehig:!0}]},ju={selbstbewusst:[{adjektivstaemme:{[d.Positiv]:["selbstbewusst"],[d.Komparativ]:["selbstbewusster"],[d.Superlativ]:["selbstbewusstest"]},regelmaessig:!0,steigerungsfaehig:!0}]},Eu={hoch:[{adjektivstaemme:{[d.Positiv]:["hoch"],[d.Komparativ]:["h\xF6her"],[d.Superlativ]:["h\xF6chst"]},regelmaessig:!1,steigerungsfaehig:!0}]},zu={langsam:[{adjektivstaemme:{[d.Positiv]:["langsam"],[d.Komparativ]:["langsamer"],[d.Superlativ]:["langsamst"]},regelmaessig:!0,steigerungsfaehig:!0}]},Au={fromm:[{adjektivstaemme:{[d.Positiv]:["fromm"],[d.Komparativ]:["frommer"],[d.Superlativ]:["frommst"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["fromm"],[d.Komparativ]:["fr\xF6mmer"],[d.Superlativ]:["fr\xF6mmst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Tu={glatt:[{adjektivstaemme:{[d.Positiv]:["glatt"],[d.Komparativ]:["glatter"],[d.Superlativ]:["glattst"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["glatt"],[d.Komparativ]:["gl\xE4tter"],[d.Superlativ]:["gl\xE4ttst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Nu={arg:[{adjektivstaemme:{[d.Positiv]:["arg"],[d.Komparativ]:["\xE4rger"],[d.Superlativ]:["\xE4rgst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Cu={bange:[{adjektivstaemme:{[d.Positiv]:["bange"],[d.Komparativ]:["banger"],[d.Superlativ]:["bangst"]},regelmaessig:!1,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["bange"],[d.Komparativ]:["b\xE4nger"],[d.Superlativ]:["b\xE4ngst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Pu={blass:[{adjektivstaemme:{[d.Positiv]:["blass"],[d.Komparativ]:["blasser"],[d.Superlativ]:["blassest"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["blass"],[d.Komparativ]:["bl\xE4sser"],[d.Superlativ]:["bl\xE4ssest"]},regelmaessig:!1,steigerungsfaehig:!0}]},Gu={dumm:[{adjektivstaemme:{[d.Positiv]:["dumm"],[d.Komparativ]:["d\xFCmmer"],[d.Superlativ]:["d\xFCmmst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Mu={gesund:[{adjektivstaemme:{[d.Positiv]:["gesund"],[d.Komparativ]:["gesunder"],[d.Superlativ]:["gesundest"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["gesund"],[d.Komparativ]:["ges\xFCnder"],[d.Superlativ]:["ges\xFCndest"]},regelmaessig:!1,steigerungsfaehig:!0}]},Iu={grob:[{adjektivstaemme:{[d.Positiv]:["grob"],[d.Komparativ]:["gr\xF6ber"],[d.Superlativ]:["gr\xF6bst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Fu={karg:[{adjektivstaemme:{[d.Positiv]:["karg"],[d.Komparativ]:["karger"],[d.Superlativ]:["kargst"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["karg"],[d.Komparativ]:["k\xE4rger"],[d.Superlativ]:["k\xE4rgst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Ou={klug:[{adjektivstaemme:{[d.Positiv]:["klug"],[d.Komparativ]:["kl\xFCger"],[d.Superlativ]:["kl\xFCgst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Ru={krank:[{adjektivstaemme:{[d.Positiv]:["krank"],[d.Komparativ]:["kr\xE4nker"],[d.Superlativ]:["kr\xE4nkst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Bu={nah:[{adjektivstaemme:{[d.Positiv]:["nah"],[d.Komparativ]:["n\xE4her"],[d.Superlativ]:["n\xE4chst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Du={nass:[{adjektivstaemme:{[d.Positiv]:["nass"],[d.Komparativ]:["nasser"],[d.Superlativ]:["nassest"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["nass"],[d.Komparativ]:["n\xE4sser"],[d.Superlativ]:["n\xE4ssest"]},regelmaessig:!1,steigerungsfaehig:!0}]},$u={schmal:[{adjektivstaemme:{[d.Positiv]:["schmal"],[d.Komparativ]:["schmaler"],[d.Superlativ]:["schmalst"]},regelmaessig:!0,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["schmal"],[d.Komparativ]:["schm\xE4ler"],[d.Superlativ]:["schm\xE4lst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Ku={sch\u00F6n:[{adjektivstaemme:{[d.Positiv]:["sch\xF6n"],[d.Komparativ]:["sch\xF6ner"],[d.Superlativ]:["sch\xF6nst"]},regelmaessig:!1,steigerungsfaehig:!0}]},Vu={schwarz:[{adjektivstaemme:{[d.Positiv]:["schwarz"],[d.Komparativ]:["schw\xE4rzer"],[d.Superlativ]:["schw\xE4rzest"]},regelmaessig:!1,steigerungsfaehig:!0}]},Wu={teu:[{adjektivstaemme:{[d.Positiv]:["teu"],[d.Komparativ]:["teurer"],[d.Superlativ]:["teuerst"]},regelmaessig:!0,steigerungsfaehig:!0}]},Uu={viel:[{adjektivstaemme:{[d.Positiv]:["viel"],[d.Komparativ]:["mehrer"],[d.Superlativ]:["meist"]},regelmaessig:!1,steigerungsfaehig:!0}]},Lu={wenig:[{adjektivstaemme:{[d.Positiv]:["wenig"],[d.Komparativ]:["weniger"],[d.Superlativ]:["wenigst"]},regelmaessig:!1,steigerungsfaehig:!0},{adjektivstaemme:{[d.Positiv]:["wenig"],[d.Komparativ]:["minder"],[d.Superlativ]:["mindest"]},regelmaessig:!1,steigerungsfaehig:!0}]},Zu={wild:[{adjektivstaemme:{[d.Positiv]:["wild"],[d.Komparativ]:["wilder"],[d.Superlativ]:["wildest"]},regelmaessig:!0,steigerungsfaehig:!0}]},Hu={sauer:[{adjektivstaemme:{[d.Positiv]:["sauer"],[d.Komparativ]:["saurer","sauerer"],[d.Superlativ]:["saurste","sauerste"]},regelmaessig:!0,steigerungsfaehig:!0}]},hn={...Nu,...Hu,...Cu,...Pu,...Gu,...Mu,...Iu,...Fu,...Ou,...Ru,...Bu,...Du,...$u,...Ku,...Vu,...Wu,...Uu,...Lu,...Zu,..._u,...wu,...ku,...yu,...xu,...Su,...ju,...Eu,...zu,...Au,...Tu};var Br=()=>{let t=`<agent_background>
  You are a very smart and very helpful German language expert. You have deep expertise in linguistics and a thorough understanding of adjective gradation and its edge cases in the German language. You are very familiar with resources such as "dwds.de" and authoritative grammar references on adjective declension and gradation. You may even be a contributor.
</agent_background>

<agent_role>
  Your role is to assist students in making sense of German adjectives. When a student provides you with an adjective, your task is to analyze the word and output its underlying adjective stem along with its degree forms: Positiv, Komparativ, and Superlativ. You must also indicate whether the adjective follows regular gradation ("regelmaessig") and whether it is capable of gradation ("steigerungsfaehig"). For example, if a student gives you "gut", you explain that its adjective stem is "gut" with the comparative "besser" and the superlative "best", and note that it is irregular (regelmaessig: false) but gradable (steigerungsfaehig: true).
</agent_role>

<instructions>
Your task is to generate a valid JSON object for every given adjective, strictly following the provided JSON schema (adjektivOutputSchema). The JSON must include the adjective stem with its degrees (Positiv, Komparativ, and Superlativ) and flags for "regelmaessig" and "steigerungsfaehig". The input might contain errors and is case-insensitive, but the output must be correct and case-sensitive. Beyond simply mapping schema fields, apply your deep understanding of German adjective gradation:
  - For adjectives that have irregular gradation (e.g., "gut", "gro\xDF", "fromm", "glatt", "arg", "bange"), ensure you output the proper comparative and superlative forms.
  - If an adjective only has a base form (as with adjectives that are not gradable, e.g., "tot", "aussehend"), output only the Positiv and set steigerungsfaehig to false.
  - Some adjectives have multiple possible gradation forms (e.g., "fromm" or "glatt"); in such cases, list each possibility as a separate object within the array.
  - The output must be a valid JSON object that strictly adheres to the adjektivOutputSchema, with no extra keys or commentary.
  - Describe each form as a simple string; the emoji representations are not required for adjectives.
  
The output format shall be as defined by the adjektivOutputSchema. For example:
  
For the adjective "gut":
[{
  "adjektivstaemme": {
    "Positiv": ["gut"],
    "Komparativ": ["besser"],
    "Superlativ": ["best]"
  },
  "regelmaessig": false,
  "steigerungsfaehig": true
}]

For "klein", the gradation is:
[{
  "adjektivstaemme": {
    "Positiv": ["klein"],
    "Komparativ": ["kleiner"],
    "Superlativ": ["kleinst]"
  },
  "regelmaessig": true,
  "steigerungsfaehig": true
}]

For unsteigerungsfaehig "aussehend", the gradation is:
[{
  "adjektivstaemme": {
    "Positiv": ["aussehend"],
  },
  "regelmaessig": true,
  "steigerungsfaehig": false,
}]

For "fromm", that can be both regelmaessig and unregelmaessig gradation is:
[
  {
    "adjektivstaemme": {
      "Positiv": ["fromm"],
      "Komparativ": ["frommer"],
      "Superlativ": ["frommst"],
    },
    "regelmaessig": true,
    "steigerungsfaehig": true,
  },
  {
    "adjektivstaemme": {
      "Positiv": ["fromm"],
      "Komparativ": ["fr\xF6mmer"],
      "Superlativ": ["fr\xF6mmst"],
    },
    "regelmaessig": false,
    "steigerungsfaehig": true,
  }
]

For "sauer", that's regelmaessig grand forms, can have miultiple valid writings: "sau(e)rer"/"sau(e)rste", the gradation is:
const sauer = {
  "sauer": [{
    adjektivstaemme: {
      "Positiv": ["sauer"],
      "Komparativ": ["saurer", "sauerer"],
      "Superlativ": ["saurste", "sauerste"],
    },
    "regelmaessig": true,
    "steigerungsfaehig": true,
  }]
};

</instructions>`,e=`<schema>
import { z } from "zod";
const VergleichsgradSchema = z.enum(["Positiv", "Komparativ", "Superlativ"]);

const adjektivOutputSchema = z.array(z.object({
  "adjektivstaemme": z.object({
    [VergleichsgradSchema.enum.Positiv]: z.string().array(),
    [VergleichsgradSchema.enum.Komparativ]: z.string().array().optional(),
    [VergleichsgradSchema.enum.Superlativ]: z.string().array().optional(),
  }),
  "regelmaessig": RegelmaessigSchema,
  "steigerungsfaehig": SteigerungsfaehigSchema,
}));

</schema>
<outputformat>outputformat shall be formattes as adjektivOutputSchema</outputformat>`,r=h.record(h.string(),jt).safeParse(hn);if(r.success){let i=`<examples>${Object.entries(hn).map(([s,a])=>`<example><adjektiv_grundform>${s.toLowerCase().trim()}</adjektiv_grundform><adjektiv_breakdown>${JSON.stringify(a)}</adjektiv_breakdown></example>`).join("")}</examples>`;return t+e+i}else return console.error("Validation error:",r.error),""};var Ud=u.Adjektiv,Pt={[u.Adjektiv]:Br,Morphems:zt,Grundform:Nt};var q={Nomen:"Nomen",Pronomen:"Pronomen",Verb:"Verb",Adjektiv:"Adjektiv",Adverb:"Adverb",Artikel:"Artikel",Partikel:"Partikel",Praeposition:"Praeposition",Konjunktion:"Konjunktion",Numerale:"Numerale",Praefix:"Praefix",Redewendung:"Redewendung",Interjektion:"Interjektion",Unbekannt:"Unbekannt",Morphem:"Morphem",Grundform:"Grundform",Flexion:"Flexion",Tippfehler:"Tippfehler",Regelmaessig:"Regelmaessig",Unregelmaessig:"Unregelmaessig",Steigerungsfaehig:"Steigerungsfaehig",Unsteigerungsfaehig:"Unteigerungsfaehig",Komparativ:"Komparativ",Positiv:"Positiv",Superlativ:"Superlativ",Einzahl:"Einzahl",Mehrzahl:"Mehrzahl",Feminin:"Feminin",Maskulin:"Maskulin",Neutrum:"Neutrum",Nominativ:"Nominativ",Genitiv:"Genitiv",Dativ:"Dativ",Akkusativ:"Akkusativ",Stark:"Stark",Schwach:"Schwach",Gemischt:"Gemischt",Eigenname:"Eigenname",Zirkumfix:"Zirkumfix",Konversion:"Konversion",Suffix:"Suffix",Stamm:"Stamm",Endung:"Endung",Fugenelement:"Fugenelement",Possessiv:"Possessiv",Reflexiv:"Reflexiv",Personal:"Personal",Generalisierendes:"Generalisierendes",Demonstrativ:"Demonstrativ","W-Pronomen":"W-Pronomen",Indefinit:"Indefinit",Quantifikativ:"Quantifikativ",Trennbar:"Trennbar",Untrennbar:"Untrennbar",Lokal:"Lokal",Temporal:"Temporal",Modal:"Modal",Kausal:"Kausal",Grad:"Grad",Bestimmt:"Bestimmt",Unbestimmt:"Unbestimmt",Intensit\u00E4t:"Intensit\xE4t",Fokus:"Fokus",Negation:"Negation",Abt\u00F6nung:"Abt\xF6nung",Konnektiv:"Konnektiv",Grundzahl:"Grundzahl",Ordnungszahl:"Ordnungszahl",Bruchzahl:"Bruchzahl",Multiplikativ:"Multiplikativ",Kollektiv:"Kollektiv",Koordinierend:"Koordinierend",Subordinierend:"Subordinierend",Rexlexiv:"Rexlexiv",Praesens:"Praesens",Praeteritum:"Praeteritum",Imperativ:"Imperativ",KI:"KI",KII:"KII",Infinitiv:"Infinitiv",ZuInfinitiv:"ZuInfinitiv",PI:"PI",PII:"PII"},Yu=new Map(Object.entries(q)),Hd={[P.N]:q.Nominativ,[P.G]:q.Gemischt,[P.D]:q.Dativ,[P.A]:q.Akkusativ},Yd={[f.F]:"Feminin",[f.M]:"Maskulin",[f.N]:"Neutrum"},Ju=t=>{var e;return(e=Yu.get(t))!=null?e:""},Gt=t=>t.map(e=>Ju(e)).filter(e=>e).join("/");async function qu(t,e,n){if(!n.zusammengesetztAus)return{repr:"",backlinks:[]};let r=n.zusammengesetztAus.map(o=>({grundform:Object.keys(o)[0],wortart:Object.values(o)[0]})),i=await Tr(t,e,r),s=[],a=[];for(let o=0;o<r.length;o++)s.push({path:i[o]}),a.push(He({word:r[o].grundform,path:i[o],noteExists:!1}));return{repr:a.join(" + "),backlinks:s}}function Xu(t){let e=t.morphemischeZerlegung.map(s=>({grundform:Object.keys(s)[0],morphem:Object.values(s)[0]})),n=Cr(e),r=[],i=[];for(let s=0;s<e.length;s++){let a=[Gt([q.Morphem,e[s].morphem])];r.push({path:n[s],tags:a}),i.push(He({word:e[s].grundform,path:n[s],noteExists:!1}))}return{repr:i.join("|"),backlinks:r}}async function Dr(t,e,n){let r=Pt.Morphems(),i=await t.apiService.generateContent(r,n,!0),s=St.safeParse(JSON.parse(i));if(s.error)return console.error({zodError:s.error,output:i}),await t.fileService.appendToFile(e.path,"Contact t.me/@clockblocker"),null;let a=s.data,o=await qu(t,e,a),l=Xu(a);return{repr:[l.repr,o.repr].join(`
`),backlinks:[...o.backlinks,...l.backlinks]}}var Qu=h.object({artikel:h.string(),agj:h.string()}),Mt=Qu.array(),lt=h.object({[f.M]:Mt,[f.N]:Mt,[f.F]:Mt,[G.Mehrzahl]:Mt}),Ft=Object.keys(lt.shape),It=h.object({[P.N]:lt,[P.G]:lt,[P.D]:lt,[P.A]:lt}),Ot=Object.keys(It.shape),Ye=h.object({[ke.Stark]:It,[ke.Schwach]:It.optional(),[ke.Gemischt]:It.optional()}),Rt=Object.keys(Ye.shape),fn=h.object({[d.Positiv]:Ye,[d.Komparativ]:Ye,[d.Superlativ]:Ye}),Bt=Object.keys(fn.shape),gn=h.record(h.string(),h.string()),$r=h.object({[d.Positiv]:gn,[d.Komparativ]:gn.optional(),[d.Superlativ]:gn.optional()}),Kr={[ke.Stark]:{[P.N]:{[f.M]:[{artikel:"",agj:"er"}],[f.N]:[{artikel:"",agj:"es"}],[f.F]:[{artikel:"",agj:"e"}],[G.Mehrzahl]:[{artikel:"",agj:"e"}]},[P.G]:{[f.M]:[{artikel:"",agj:"en"}],[f.N]:[{artikel:"",agj:"en"}],[f.F]:[{artikel:"",agj:"er"}],[G.Mehrzahl]:[{artikel:"",agj:"er"}]},[P.D]:{[f.M]:[{artikel:"",agj:"em"}],[f.N]:[{artikel:"",agj:"em"}],[f.F]:[{artikel:"",agj:"er"}],[G.Mehrzahl]:[{artikel:"",agj:"en"}]},[P.A]:{[f.M]:[{artikel:"",agj:"en"}],[f.N]:[{artikel:"",agj:"es"}],[f.F]:[{artikel:"",agj:"e"}],[G.Mehrzahl]:[{artikel:"",agj:"e"}]}},[ke.Schwach]:{[P.N]:{[f.M]:[{artikel:"der",agj:"e"}],[f.N]:[{artikel:"das",agj:"e"}],[f.F]:[{artikel:"die",agj:"e"}],[G.Mehrzahl]:[{artikel:"die",agj:"en"}]},[P.G]:{[f.M]:[{artikel:"des",agj:"en"}],[f.N]:[{artikel:"des",agj:"en"}],[f.F]:[{artikel:"der",agj:"en"}],[G.Mehrzahl]:[{artikel:"der",agj:"en"}]},[P.D]:{[f.M]:[{artikel:"dem",agj:"en"}],[f.N]:[{artikel:"dem",agj:"en"}],[f.F]:[{artikel:"der",agj:"en"}],[G.Mehrzahl]:[{artikel:"den",agj:"en"}]},[P.A]:{[f.M]:[{artikel:"den",agj:"en"}],[f.N]:[{artikel:"das",agj:"e"}],[f.F]:[{artikel:"die",agj:"e"}],[G.Mehrzahl]:[{artikel:"die",agj:"en"}]}},[ke.Gemischt]:{[P.N]:{[f.M]:[{artikel:"ein",agj:"er"}],[f.N]:[{artikel:"ein",agj:"es"}],[f.F]:[{artikel:"eine",agj:"e"}],[G.Mehrzahl]:[{artikel:"keine",agj:"en"}]},[P.G]:{[f.M]:[{artikel:"eines",agj:"en"}],[f.N]:[{artikel:"eines",agj:"en"}],[f.F]:[{artikel:"einer",agj:"en"}],[G.Mehrzahl]:[{artikel:"keiner",agj:"en"}]},[P.D]:{[f.M]:[{artikel:"einem",agj:"en"}],[f.N]:[{artikel:"einem",agj:"en"}],[f.F]:[{artikel:"einer",agj:"en"}],[G.Mehrzahl]:[{artikel:"keinen",agj:"en"}]},[P.A]:{[f.M]:[{artikel:"einen",agj:"en"}],[f.N]:[{artikel:"ein",agj:"es"}],[f.F]:[{artikel:"eine",agj:"e"}],[G.Mehrzahl]:[{artikel:"keine",agj:"en"}]}}},im={[f.M]:["Vater","Sohn","Ding","Onkel"],[f.F]:["Mutter","Tochter","Sache","Tante"],[f.N]:["Kind","Baby","Geschenk","M\xE4dchen"],[G.Mehrzahl]:["V\xE4ter","T\xF6chter","Geschenke","Mutter"]},el={[f.M]:["er","ihm","ihn","seines"],[f.F]:["sie","ihr","sie","ihrer"],[f.N]:["es","ihm","es","ihres"],[G.Mehrzahl]:["sie","ihnen","sie","ihrer"]},tl={[f.M]:"gibt",[f.F]:"gibt",[f.N]:"gibt",[G.Mehrzahl]:"geben"};function Vr(t){if(!t)return;let e={};for(let r of Rt){e[r]={};for(let i of Ot){e[r][i]={};for(let s of Ft){let a=Kr[r];if(!a)continue;let{artikel:o,agj:l}=a[i][s][0];e[r][i][s]=t.map(c=>({artikel:o,agj:c+l}))}}}let n=Ye.safeParse(e);if(n.error){console.error(n.error);return}return n.data}function Wr(t,e){let n=["e","er","em","es","en"].map(r=>{let i=t+r,s=e==null?void 0:e[i];return s===void 0?i:He({word:i,path:s,noteExists:!1})});return`- *Die* ${n[0]} *Mutter und ein* ${n[1]} *Sohn gaben* ${n[2]} *Vater ein* ${n[3]} *Geschenk* ${n[4]} *Onkels*`}async function Ur(t,e,n){let r=Pt[u.Adjektiv](),i=await t.apiService.generateContent(r,n,!0),s=jt.safeParse(JSON.parse(i));if(s.error)return console.error({zodError:s.error,output:i}),await t.fileService.appendToFile(e.path,"Contact t.me/@clockblocker"),null;let a=s.data;console.log("adjektivOutput",a);let o=await Promise.all(a.map(g=>nl(t,e,g)));console.log("formSubblocks",o);let l=o.map(g=>g.backlinks).flat();return{repr:o.map(({repr:g})=>g).join(`

`),backlinks:l}}async function nl(t,e,n){let r=await il(t,e,n),i={},s=new Map;Object.keys(r).forEach(l=>{r[l].forEach(({path:c,tags:g})=>{i[l]=c,s.has(c)||s.set(c,new Set([])),g==null||g.forEach(x=>{s.get(c).add(x)})})}),console.log("backlinksMap",s);let a=[...s.entries()].map(([l,c])=>({path:l,tags:[...c]}));return{repr:rl(n,i),backlinks:a}}var rl=(t,e)=>Object.values(t.adjektivstaemme).map(n=>n.map(r=>Wr(r,e)).join(`

`)).join(`
`);async function il(t,e,n){let{allDeclensionsFromGrad:r,pathFromWortFromGrad:i,error:s}=await al(t,e,n);if(s)return{};let a={};for(let o of Bt){let l=r==null?void 0:r[o];if(!l)continue;let c=i==null?void 0:i[o];if(c)for(let g of Rt){let x=l[g];if(x!==void 0)for(let j of Ot){let _=x[j];if(_!==void 0)for(let N of Ft)_[N].forEach(({agj:F})=>{let se=a[F]||[];if(c){let me=c[F],Hr=[Gt([u.Adjektiv,m.Flexion,n.steigerungsfaehig?q.Steigerungsfaehig:q.Unsteigerungsfaehig,n.regelmaessig?q.Regelmaessig:q.Unregelmaessig,o,g])];a[F]=[...se,{path:me,tags:Hr}]}})}}}return a}function sl(t){let e=t.adjektivstaemme,n={};for(let i of Bt){let s=e[i];if(s){let a=Vr(s);n[i]=a}}let r=fn.safeParse(n);if(r.error){console.error(r.error);return}return r.data}async function al(t,e,n){let r=sl(n);if(r===void 0)return{allDeclensionsFromGrad:void 0,pathFromWortFromGrad:void 0,error:!0};let i=Bt.map(async l=>{let c=r[l];if(!c)return[l,void 0];let g=await ol(t,e,c);return[l,g]}),s=await Promise.all(i),a={};for(let[l,c]of s)a[l]=c;let o=$r.safeParse(a);return o.error?(console.error(o.error),{allDeclensionsFromGrad:void 0,pathFromWortFromGrad:void 0,error:!0}):{allDeclensionsFromGrad:r,pathFromWortFromGrad:o.data,error:!1}}async function ol(t,e,n){let r=new Set;Object.values(n).forEach(o=>{Object.values(o).forEach(l=>{Object.values(l).forEach(c=>{c.forEach(({agj:g})=>{r.add(g)})})})});let i=[...r].map(o=>({grundform:o,wortart:u.Adjektiv,match:m.Flexion})),s=await Nr(t,e,i);return Object.fromEntries(i.map((o,l)=>[o.grundform,s[l]]))}async function ul(t,e,n){console.log(`

endgameNoteCase`),console.log("grundforms"),console.log(n),console.log();let r=Fr(n);r.sort((a,o)=>Mr(a,o));let i=await Promise.all(r.map(async a=>{let o=await Ct(t,e,a.grundform);return await Rr(a,o)}));return console.log("formattedLinks",i),i.reduce((a,o,l)=>{let c=r[l],g=l>0?r[l-1]:null;return g&&c.wortart===g.wortart?a[a.length-1]=a[a.length-1]+" | "+o:a.push(o),a},[]).join(`
`)}async function ll(t,e,n){let r=[];console.log(`

endgameNoteCase`),console.log("exactMatches"),console.log(n),console.log();let i=await Dr(t,e,n[0].grundform),s=await Ur(t,e,n[0].grundform);return i&&r.push(i),s&&r.push(s),console.log("blocks",r),r.map(({repr:a})=>a).join(`

---
`)}async function Lr(t,e,n,r){console.log("grundforms",n),console.log("output"),console.log(n);let i=await Promise.all(Object.entries(n).map(([s,a])=>s===m.Grundform?ll(t,e,a):ul(t,e,a.map(o=>({...o,match:s})))));await t.fileService.appendToFile(e.path,i.join(`
`)+`
`)}async function pn(t,e,n){let r=n.basename.toLocaleLowerCase();try{let i=Nt(),s=await t.apiService.generateContent(i,r,!0),a={[r]:JSON.parse(s)},o=xt.safeParse(a[r]);if(o.error){console.error({zodError:o.error,output:s}),await t.fileService.appendToFile(n.path,"Contact t.me/@clockblocker");return}await Lr(t,n,o.data,r),e.setCursor({line:1,ch:0}),e.focus()}catch(i){new Zr.Notice(`Error: ${i.message}`)}}var Dt=class extends $t.Plugin{async onload(){try{await this.loadPlugin(),this.addSettingTab(new mt(this.app,this))}catch(n){console.error("Error during plugin initialization:",n),new $t.Notice(`Plugin failed to load: ${n.message}`)}}async loadPlugin(){await this.loadSettings(),this.apiService=new At(this.settings,this.app.vault),this.fileService=new Tt(this.app.vault),this.addCommand({id:"backlink-all-to-current-file",name:"[P] All referenced files with a backlink to the current file",editorCheckCallback:(n,r,i)=>{var o,l;let s=(o=i.file)==null?void 0:o.name,a=(l=i.file)==null?void 0:l.basename;return console.log("view.file, fileName, backlink",i.file,s,a),i.file&&s&&a?(n||cn(i.file,a,this.app.vault,this.app.metadataCache,r),!0):!1}}),this.addCommand({id:"fill-template",name:"[G] Generate a dictionary entry for the word in the title of the file",editorCheckCallback:(n,r,i)=>i.file?(n||pn(this,r,i.file),!0):!1}),this.addCommand({id:"get-infinitive-and-emoji",name:"[I] [Redundant] Get infinitive/normal form and emoji for current word",editorCheckCallback:(n,r,i)=>i.file?(n||tn(this,r,i.file),!0):!1}),this.addCommand({id:"duplicate-selection",name:"[WIP] Add links to normal/inf forms to selected text",editorCheckCallback:(n,r,i)=>{let s=r.getSelection();return s&&i.file?(n||nn(this,r,i.file,s),!0):!1}}),this.addCommand({id:"translate-selection",name:"[D] Translate selecteD text",editorCheckCallback:(n,r)=>{let i=r.getSelection();return i?(n||rn(this,r,i),!0):!1}}),this.addCommand({id:"format-selection-with-number",name:"[S] Split selection into linked blocks",editorCheckCallback:(n,r,i)=>{let s=r.getSelection();return s&&i.file?(n||ln(this,r,i.file,s),!0):!1}}),this.addCommand({id:"check-ru-de-translation",name:"[K] Keymaker",editorCheckCallback:(n,r)=>{let i=r.getSelection();return i?(n||ut(this,r,i),!0):!1}}),this.addCommand({id:"check-schriben",name:"[E] schribEn chEck",editorCheckCallback:(n,r)=>{let i=r.getSelection();return i?(n||ut(this,r,i,!0),!0):!1}})}async loadSettings(){this.settings=Object.assign({},bn,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}findHighestNumber(n){let r=n.match(/#\^(\d+)/g);if(!r)return 0;let i=r.map(s=>{let a=s.replace("#^","");return parseInt(a,10)});return Math.max(0,...i)}};
/*! Bundled license information:

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
