/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var nn=Object.create;var P=Object.defineProperty;var tn=Object.getOwnPropertyDescriptor;var rn=Object.getOwnPropertyNames;var sn=Object.getPrototypeOf,an=Object.prototype.hasOwnProperty;var K=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),on=(e,n)=>{for(var t in n)P(e,t,{get:n[t],enumerable:!0})},de=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of rn(n))!an.call(e,r)&&r!==t&&P(e,r,{get:()=>n[r],enumerable:!(i=tn(n,r))||i.enumerable});return e};var un=(e,n,t)=>(t=e!=null?nn(sn(e)):{},de(n||!e||!e.__esModule?P(t,"default",{value:e,enumerable:!0}):t,e)),ln=e=>de(P({},"__esModule",{value:!0}),e);var Ye=K((ri,Ve)=>{Ve.exports=function(n,t){if((typeof n=="string"||n instanceof String)&&typeof document!="undefined"){var i=document.createElement("DIV");i.innerHTML=n,n=(i.textContent||"").trim()}else typeof n=="object"&&n.textContent&&(n=(n.textContent||"").trim());return n}});var Je=K(re=>{re.endsWithChar=function(n,t){return t.length>1?t.indexOf(n.slice(-1))>-1:n.slice(-1)===t};re.endsWith=function(n,t){return n.slice(n.length-t.length)===t}});var qe=K(v=>{var se,Jn=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];v.setAbbreviations=function(e){e?se=e:se=Jn};var ae=v.isCapitalized=function(e){return/^[A-Z][a-z].*/.test(e)||qn(e)};v.isSentenceStarter=function(e){return ae(e)||/``|"|'/.test(e.substring(0,2))};v.isCommonAbbreviation=function(e){var n=e.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>\{\}\[\]\\\/]/gi,"");return~se.indexOf(n)};v.isTimeAbbreviation=function(e,n){if(e==="a.m."||e==="p.m."){var t=n.replace(/\W+/g,"").slice(-3).toLowerCase();if(t==="day")return!0}return!1};v.isDottedAbbreviation=function(e){var n=e.replace(/[\(\)\[\]\{\}]/g,"").match(/(.\.)*/);return n&&n[0].length>0};v.isCustomAbbreviation=function(e){return e.length<=3?!0:ae(e)};v.isNameAbbreviation=function(e,n){if(n.length>0){if(e<5&&n[0].length<6&&ae(n[0]))return!0;var t=n.filter(function(i){return/[A-Z]/.test(i.charAt(0))});return t.length>=3}return!1};var qn=v.isNumber=function(e,n){return n&&(e=e.slice(n-1,n+2)),!isNaN(e)};v.isPhoneNr=function(e){return e.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)};v.isURL=function(e){return e.match(/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/)};v.isConcatenated=function(e){var n=0;if((n=e.indexOf("."))>-1||(n=e.indexOf("!"))>-1||(n=e.indexOf("?"))>-1){var t=e.charAt(n+1);if(t.match(/[a-zA-Z].*/))return[e.slice(0,n),e.slice(n+1)]}return!1};v.isBoundaryChar=function(e){return e==="."||e==="!"||e==="?"}});var Qe=K(Xe=>{var Zn=Ye(),F=Je(),_=qe(),oe=" @~@ ",Ze=oe.trim(),Xn=new RegExp("\\S",""),Qn=new RegExp("\\n+|[-#=_+*]{4,}","g"),et=new RegExp("\\S+|\\n","g");Xe.sentences=function(e,n){if(!e||typeof e!="string"||!e.length)return[];if(!Xn.test(e))return[];var t={newline_boundaries:!1,html_boundaries:!1,html_boundaries_tags:["p","div","ul","ol"],sanitize:!1,allowed_tags:!1,preserve_whitespace:!1,abbreviations:null};if(typeof n=="boolean")t.newline_boundaries=!0;else for(var i in n)t[i]=n[i];if(_.setAbbreviations(t.abbreviations),t.newline_boundaries&&(e=e.replace(Qn,oe)),t.html_boundaries){var r="(<br\\s*\\/?>|<\\/("+t.html_boundaries_tags.join("|")+")>)",a=new RegExp(r,"g");e=e.replace(a,"$1"+oe)}(t.sanitize||t.allowed_tags)&&(t.allowed_tags||(t.allowed_tags=[""]),e=Zn(e,{allowedTags:t.allowed_tags}));var s,u;t.preserve_whitespace?(u=e.split(/(<br\s*\/?>|\S+|\n+)/),s=u.filter(function(m,k){return k%2})):s=e.trim().match(et);var l=0,d=0,g=[],h=[],c=[];if(!s||!s.length)return[];for(var o=0,p=s.length;o<p;o++){if(l++,c.push(s[o]),~s[o].indexOf(",")&&(l=0),_.isBoundaryChar(s[o])||F.endsWithChar(s[o],"?!")||s[o]===Ze){(t.newline_boundaries||t.html_boundaries)&&s[o]===Ze&&c.pop(),h.push(c),l=0,c=[];continue}if((F.endsWithChar(s[o],'"')||F.endsWithChar(s[o],"\u201D"))&&(s[o]=s[o].slice(0,-1)),F.endsWithChar(s[o],".")){if(o+1<p){if(s[o].length===2&&isNaN(s[o].charAt(0))||_.isCommonAbbreviation(s[o]))continue;if(_.isSentenceStarter(s[o+1])){if(_.isTimeAbbreviation(s[o],s[o+1])||_.isNameAbbreviation(l,s.slice(o,6))||_.isNumber(s[o+1])&&_.isCustomAbbreviation(s[o]))continue}else if(F.endsWith(s[o],"..")||_.isDottedAbbreviation(s[o])||_.isNameAbbreviation(l,s.slice(o,5)))continue}h.push(c),c=[],l=0;continue}(d=s[o].indexOf("."))>-1&&(_.isNumber(s[o],d)||_.isDottedAbbreviation(s[o])||_.isURL(s[o])||_.isPhoneNr(s[o]))||(g=_.isConcatenated(s[o]))&&(c.pop(),c.push(g[0]),h.push(c),c=[],l=0,c.push(g[1]))}c.length&&h.push(c),h=h.filter(function(m){return m.length>0});var x=h.slice(1).reduce(function(m,k){var y=m[m.length-1];return y.length===1&&/^.{1,2}[.]$/.test(y[0])&&!/[.]/.test(k[0])?(m.pop(),m.push(y.concat(k)),m):(m.push(k),m)},[h[0]]);return x.map(function(m,k){if(t.preserve_whitespace&&!t.newline_boundaries&&!t.html_boundaries){var y=m.length*2;return k===0&&(y+=1),u.splice(0,y).join("")}return m.join(" ")})}});var nt={};on(nt,{default:()=>Y});module.exports=ln(nt);var J=require("obsidian");var I=require("obsidian"),j=class extends I.PluginSettingTab{constructor(t,i){super(t,i);this.plugin=i}display(){let{containerEl:t}=this;t.empty(),new I.Setting(t).setName("API configuration").setHeading(),new I.Setting(t).setName("Gemini API key").setDesc("Enter your Gemini API key").addText(i=>i.setPlaceholder("Enter your API key").setValue(this.plugin.settings.googleApiKey).onChange(async r=>{this.plugin.settings.googleApiKey=r,await this.plugin.saveSettings()})),new I.Setting(t).setName("DeepSeek API key").setDesc("Enter your DeepSeek API key").addText(i=>i.setPlaceholder("Enter your API key").setValue(this.plugin.settings.deepseekApiKey).onChange(async r=>{this.plugin.settings.deepseekApiKey=r,await this.plugin.saveSettings()})),new I.Setting(t).setName("API provider").setDesc("Choose your API provider").addDropdown(i=>{i.addOption("google","Google").addOption("deepseek","DeepSeek").setValue(this.plugin.settings.apiProvider).onChange(async r=>{this.plugin.settings.apiProvider=r,await this.plugin.saveSettings()})})}};var he={deepseekApiKey:"",googleApiKey:"",apiProvider:"google"};var ge;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(ge||(ge={}));var pe;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(pe||(pe={}));var me;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(me||(me={}));var fe=["user","model","function","system"],_e;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(_e||(_e={}));var we;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(we||(we={}));var ve;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ve||(ve={}));var be;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(be||(be={}));var N;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"})(N||(N={}));var xe;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(xe||(xe={}));var ke;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(ke||(ke={}));var ye;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(ye||(ye={}));var f=class extends Error{constructor(n){super(`[GoogleGenerativeAI Error]: ${n}`)}},z=class extends f{constructor(n,t){super(n),this.response=t}},G=class extends f{constructor(n,t,i,r){super(n),this.status=t,this.statusText=i,this.errorDetails=r}},E=class extends f{};var cn="https://generativelanguage.googleapis.com",dn="v1beta",hn="0.21.0",gn="genai-js",A;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(A||(A={}));var q=class{constructor(n,t,i,r,a){this.model=n,this.task=t,this.apiKey=i,this.stream=r,this.requestOptions=a}toString(){var n,t;let i=((n=this.requestOptions)===null||n===void 0?void 0:n.apiVersion)||dn,a=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||cn}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}};function pn(e){let n=[];return e!=null&&e.apiClient&&n.push(e.apiClient),n.push(`${gn}/${hn}`),n.join(" ")}async function mn(e){var n;let t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",pn(e.requestOptions)),t.append("x-goog-api-key",e.apiKey);let i=(n=e.requestOptions)===null||n===void 0?void 0:n.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new E(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(let[r,a]of i.entries()){if(r==="x-goog-api-key")throw new E(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new E(`Header name ${r} can only be set using the apiClient field`);t.append(r,a)}}return t}async function fn(e,n,t,i,r,a){let s=new q(e,n,t,i,a);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},bn(a)),{method:"POST",headers:await mn(s),body:r})}}async function M(e,n,t,i,r,a={},s=fetch){let{url:u,fetchOptions:l}=await fn(e,n,t,i,r,a);return _n(u,l,s)}async function _n(e,n,t=fetch){let i;try{i=await t(e,n)}catch(r){wn(r,e)}return i.ok||await vn(i,e),i}function wn(e,n){let t=e;throw e instanceof G||e instanceof E||(t=new f(`Error fetching from ${n.toString()}: ${e.message}`),t.stack=e.stack),t}async function vn(e,n){let t="",i;try{let r=await e.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch(r){}throw new G(`Error fetching from ${n.toString()}: [${e.status} ${e.statusText}] ${t}`,e.status,e.statusText,i)}function bn(e){let n={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){let t=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>t.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{t.abort()}),n.signal=t.signal}return n}function X(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),B(e.candidates[0]))throw new z(`${C(e)}`,e);return xn(e)}else if(e.promptFeedback)throw new z(`Text not available. ${C(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),B(e.candidates[0]))throw new z(`${C(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ee(e)[0]}else if(e.promptFeedback)throw new z(`Function call not available. ${C(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),B(e.candidates[0]))throw new z(`${C(e)}`,e);return Ee(e)}else if(e.promptFeedback)throw new z(`Function call not available. ${C(e)}`,e)},e}function xn(e){var n,t,i,r;let a=[];if(!((t=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||t===void 0)&&t.parts)for(let s of(r=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)s.text&&a.push(s.text),s.executableCode&&a.push("\n```"+s.executableCode.language+`
`+s.executableCode.code+"\n```\n"),s.codeExecutionResult&&a.push("\n```\n"+s.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function Ee(e){var n,t,i,r;let a=[];if(!((t=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||t===void 0)&&t.parts)for(let s of(r=(i=e.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)s.functionCall&&a.push(s.functionCall);if(a.length>0)return a}var kn=[N.RECITATION,N.SAFETY,N.LANGUAGE];function B(e){return!!e.finishReason&&kn.includes(e.finishReason)}function C(e){var n,t,i;let r="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)r+="Response was blocked",!((n=e.promptFeedback)===null||n===void 0)&&n.blockReason&&(r+=` due to ${e.promptFeedback.blockReason}`),!((t=e.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((i=e.candidates)===null||i===void 0)&&i[0]){let a=e.candidates[0];B(a)&&(r+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(r+=`: ${a.finishMessage}`))}return r}function R(e){return this instanceof R?(this.v=e,this):new R(e)}function yn(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(e,n||[]),r,a=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(c){i[c]&&(r[c]=function(o){return new Promise(function(p,x){a.push([c,o,p,x])>1||u(c,o)})})}function u(c,o){try{l(i[c](o))}catch(p){h(a[0][3],p)}}function l(c){c.value instanceof R?Promise.resolve(c.value.v).then(d,g):h(a[0][2],c)}function d(c){u("next",c)}function g(c){u("throw",c)}function h(c,o){c(o),a.shift(),a.length&&u(a[0][0],a[0][1])}}var ze=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function En(e){let n=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=Sn(n),[i,r]=t.tee();return{stream:Cn(i),response:zn(r)}}async function zn(e){let n=[],t=e.getReader();for(;;){let{done:i,value:r}=await t.read();if(i)return X(In(n));n.push(r)}}function Cn(e){return yn(this,arguments,function*(){let t=e.getReader();for(;;){let{value:i,done:r}=yield R(t.read());if(r)break;yield yield R(X(i))}})}function Sn(e){let n=e.getReader();return new ReadableStream({start(i){let r="";return a();function a(){return n.read().then(({value:s,done:u})=>{if(u){if(r.trim()){i.error(new f("Failed to parse stream"));return}i.close();return}r+=s;let l=r.match(ze),d;for(;l;){try{d=JSON.parse(l[1])}catch(g){i.error(new f(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(d),r=r.substring(l[0].length),l=r.match(ze)}return a()})}}})}function In(e){let n=e[e.length-1],t={promptFeedback:n==null?void 0:n.promptFeedback};for(let i of e){if(i.candidates)for(let r of i.candidates){let a=r.index;if(t.candidates||(t.candidates=[]),t.candidates[a]||(t.candidates[a]={index:r.index}),t.candidates[a].citationMetadata=r.citationMetadata,t.candidates[a].groundingMetadata=r.groundingMetadata,t.candidates[a].finishReason=r.finishReason,t.candidates[a].finishMessage=r.finishMessage,t.candidates[a].safetyRatings=r.safetyRatings,r.content&&r.content.parts){t.candidates[a].content||(t.candidates[a].content={role:r.content.role||"user",parts:[]});let s={};for(let u of r.content.parts)u.text&&(s.text=u.text),u.functionCall&&(s.functionCall=u.functionCall),u.executableCode&&(s.executableCode=u.executableCode),u.codeExecutionResult&&(s.codeExecutionResult=u.codeExecutionResult),Object.keys(s).length===0&&(s.text=""),t.candidates[a].content.parts.push(s)}}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}async function Ae(e,n,t,i){let r=await M(n,A.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(t),i);return En(r)}async function Te(e,n,t,i){let a=await(await M(n,A.GENERATE_CONTENT,e,!1,JSON.stringify(t),i)).json();return{response:X(a)}}function Ne(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function O(e){let n=[];if(typeof e=="string")n=[{text:e}];else for(let t of e)typeof t=="string"?n.push({text:t}):n.push(t);return An(n)}function An(e){let n={role:"user",parts:[]},t={role:"function",parts:[]},i=!1,r=!1;for(let a of e)"functionResponse"in a?(t.parts.push(a),r=!0):(n.parts.push(a),i=!0);if(i&&r)throw new f("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new f("No content is provided for sending chat message.");return i?n:t}function Tn(e,n){var t;let i={model:n==null?void 0:n.model,generationConfig:n==null?void 0:n.generationConfig,safetySettings:n==null?void 0:n.safetySettings,tools:n==null?void 0:n.tools,toolConfig:n==null?void 0:n.toolConfig,systemInstruction:n==null?void 0:n.systemInstruction,cachedContent:(t=n==null?void 0:n.cachedContent)===null||t===void 0?void 0:t.name,contents:[]},r=e.generateContentRequest!=null;if(e.contents){if(r)throw new E("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=e.contents}else if(r)i=Object.assign(Object.assign({},i),e.generateContentRequest);else{let a=O(e);i.contents=[a]}return{generateContentRequest:i}}function Ce(e){let n;return e.contents?n=e:n={contents:[O(e)]},e.systemInstruction&&(n.systemInstruction=Ne(e.systemInstruction)),n}function Nn(e){return typeof e=="string"||Array.isArray(e)?{content:O(e)}:e}var Se=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Rn={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function On(e){let n=!1;for(let t of e){let{role:i,parts:r}=t;if(!n&&i!=="user")throw new f(`First content should be with role 'user', got ${i}`);if(!fe.includes(i))throw new f(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(fe)}`);if(!Array.isArray(r))throw new f("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new f("Each Content should have at least one part");let a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let u of r)for(let l of Se)l in u&&(a[l]+=1);let s=Rn[i];for(let u of Se)if(!s.includes(u)&&a[u]>0)throw new f(`Content with role '${i}' can't contain '${u}' part`);n=!0}}var Ie="SILENT_ERROR",Z=class{constructor(n,t,i,r={}){this.model=t,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=n,i!=null&&i.history&&(On(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(n,t={}){var i,r,a,s,u,l;await this._sendPromise;let d=O(n),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,d]},h=Object.assign(Object.assign({},this._requestOptions),t),c;return this._sendPromise=this._sendPromise.then(()=>Te(this._apiKey,this.model,g,h)).then(o=>{var p;if(o.response.candidates&&o.response.candidates.length>0){this._history.push(d);let x=Object.assign({parts:[],role:"model"},(p=o.response.candidates)===null||p===void 0?void 0:p[0].content);this._history.push(x)}else{let x=C(o.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}c=o}),await this._sendPromise,c}async sendMessageStream(n,t={}){var i,r,a,s,u,l;await this._sendPromise;let d=O(n),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(s=this.params)===null||s===void 0?void 0:s.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,d]},h=Object.assign(Object.assign({},this._requestOptions),t),c=Ae(this._apiKey,this.model,g,h);return this._sendPromise=this._sendPromise.then(()=>c).catch(o=>{throw new Error(Ie)}).then(o=>o.response).then(o=>{if(o.candidates&&o.candidates.length>0){this._history.push(d);let p=Object.assign({},o.candidates[0].content);p.role||(p.role="model"),this._history.push(p)}else{let p=C(o);p&&console.warn(`sendMessageStream() was unsuccessful. ${p}. Inspect response object for details.`)}}).catch(o=>{o.message!==Ie&&console.error(o)}),c}};async function Dn(e,n,t,i){return(await M(n,A.COUNT_TOKENS,e,!1,JSON.stringify(t),i)).json()}async function Mn(e,n,t,i){return(await M(n,A.EMBED_CONTENT,e,!1,JSON.stringify(t),i)).json()}async function Fn(e,n,t,i){let r=t.requests.map(s=>Object.assign(Object.assign({},s),{model:n}));return(await M(n,A.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:r}),i)).json()}var W=class{constructor(n,t,i={}){this.apiKey=n,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Ne(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(n,t={}){var i;let r=Ce(n),a=Object.assign(Object.assign({},this._requestOptions),t);return Te(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}async generateContentStream(n,t={}){var i;let r=Ce(n),a=Object.assign(Object.assign({},this._requestOptions),t);return Ae(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}startChat(n){var t;return new Z(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},n),this._requestOptions)}async countTokens(n,t={}){let i=Tn(n,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return Dn(this.apiKey,this.model,i,r)}async embedContent(n,t={}){let i=Nn(n),r=Object.assign(Object.assign({},this._requestOptions),t);return Mn(this.apiKey,this.model,i,r)}async batchEmbedContents(n,t={}){let i=Object.assign(Object.assign({},this._requestOptions),t);return Fn(this.apiKey,this.model,n,i)}};var D=class{constructor(n){this.apiKey=n}getGenerativeModel(n,t){if(!n.model)throw new f("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new W(this.apiKey,n,t)}getGenerativeModelFromCachedContent(n,t,i){if(!n.name)throw new E("Cached content must contain a `name` field.");if(!n.model)throw new E("Cached content must contain a `model` field.");let r=["model","systemInstruction"];for(let s of r)if(t!=null&&t[s]&&n[s]&&(t==null?void 0:t[s])!==n[s]){if(s==="model"){let u=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,l=n.model.startsWith("models/")?n.model.replace("models/",""):n.model;if(u===l)continue}throw new E(`Different value for "${s}" specified in modelParams (${t[s]}) and cachedContent (${n[s]})`)}let a=Object.assign(Object.assign({},t),{model:n.model,tools:n.tools,toolConfig:n.toolConfig,systemInstruction:n.systemInstruction,cachedContent:n});return new W(this.apiKey,a,i)}};var U=require("obsidian");var Re=`<agent_role>You are a specialized linguist and a german language tutor with a specialy in German language. You will be given a german grammar exercise by the USER. Your taksk it to eather provide the solution for a task, or to check the USERS's solution </agent_role>

<instructions>
0. Context Uncertainty
- You only receive a short snippet of the user's text each time. You do NOT have broader context from previous questions or answers.
- Your overarching goal is always to assist with the German exercises in a concise manner.
- Use the synytax =={correction}== to correct specific places in a word/sentece with spelling/kinjugation/punktuation mistakes
- If the whole word is incorrect (ex. "zu anrufen" instad of "anzurufen"), or it is lehicaly the wrong word in the context highlite the =={whole_correct_word}==. See examples below
- If the user solved the task correctly, add a checkmark emoji to the end of the output

1. Exercise Types
You may receive any of these exercise types:
- Translation (Russian \u2192 German or English \u2192 German)
- Fill-in-the-gaps (a German sentence with a missing word or underscores)
- Choose the correct word (from a provided list)
- Grammar Check / Corrections (German sentences only)
- Solution Review (user provides a solution, you check correctness)
- Any other common exercises type

2. Response Format
- Keep your response as short, on point, and concise as possible.
- Provide corrections in Markdown by highlighting errors or fixes (e.g., "==word==").
- If user's solution is correct, do NOT add any ==highlights==. Add \u2705 to the end of the output instead
- If the user\u2019s input is unclear or lacks context (e.g., a malformed sentence or one that is not clearly an exercise), politely request clarification or additional context.

3. Grammar Checks (German Only)
- If the user inputs only a German sentence, check for grammar/spelling mistakes and provide the corrected version
- If the user solved the task correctly, add a checkmark emoji to the end of the output
- If there is an error in word order, fix it in priority, marking the misplaced blocks. Don't fix anything else, until the word order is correct

<examples>
<example>
<user_input>Diese Nachricht kann gelesen werden.</user_input>
<agent_oputput>Diese Nachricht kann gelesen werden. \u2705</agent_oputput>
</example>
<example>
<user_input>\u041C\u044B \u043F\u043E\u0435\u0434\u0435\u043C \u0432 \u0423\u043A\u0440\u0430\u0438\u043D\u0443 \u043D\u0430 \u043D\u0435\u0434\u0435\u043B\u044E. Wir fahren in die Ukraine f\xFCr eine Woche.</user_input>
<agent_oputput>Wir fahren ==f\xFCr eine Woche== in die Ukraine.</agent_oputput>
</example>
<example>
<user_input>Dieses Nachricht kann gelesen werden.</user_input>
<agent_output>Dies==e== Nachricht kann gelesen werden.</agent_output>
</example>
<example>
<user_input>Dieses Nachricht kann lesen werden.</user_input>
<agent_oputput>Dies==e== Nachricht kann ==ge==lesen werden.</agent_oputput>
</example>
<example>
<user_input>\u042D\u0442\u0443 \u043D\u043E\u0432\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C. Dieses nachricht kann gelesen werden.</user_input>
<agent_output>Dieses ==N==achricht kann gelesen werden.</agent_output>
</example>
<example>
<user_input>\u042D\u0442\u0443 \u043D\u043E\u0432\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C. Dieses nachricht kann werden gelesen.</user_input>
<agent_output>Dieses Nachricht kann ==gelesen== ==werden==.</agent_output>
</example>
<example>
<instruction_content>If you cannot guess the user\u2019s intention because the text is too garbled, request the translation or more context. E.g.,</instruction_content>
<user_input>Dis noichkien lesen will konnte</user_input>
<agent_oputput>Please include the translation in the next selection in order for me to help with the correction.</agent_oputput>
</example>
</examples>

4. Translation Instructions
- When the user provides Non-german text with no explicit instructions, assume they want a German translation.
- !important: Do NOT place \u2705 or == in the output this case. Just the palin text.
<examples>
<example>
<user_input>\u041E\u043D \u0447\u0438\u0442\u0430\u0435\u0442 \u043A\u043D\u0438\u0433\u0443</user_input>
<agent_oputput>Er liest ein Buch</agent_oputput>
</example>
<example>
<user_input>Our grandparents didn't have much of it, and they didn't know the word.</user_input>
<agent_oputput>Unsere Gro\xDFeltern hatten wenig davon, und das Wort kannten sie nicht.</agent_oputput>
</example>
<example>
<user_input>5. \u042F \u0445\u043E\u0436\u0443 \u0432 \u0448\u043A\u043E\u043B\u0443, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0432\u0441\u0435 \u0434\u0435\u0442\u0438 \u0434\u043E\u043B\u0436\u043D\u044B \u0443\u0447\u0438\u0442\u044C\u0441\u044F.
6. \u041E\u043D \u0440\u0430\u043D\u043E \u0432\u0441\u0442\u0430\u0435\u0442, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0434\u043E\u043B\u0436\u0435\u043D \u043C\u043D\u043E\u0433\u043E \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C.
7. \u041E\u043D \u0435\u0434\u0435\u0442 \u0432 \u0421\u0428\u0410, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0443\u0432\u0438\u0434\u0435\u0442\u044C \u041D\u044C\u044E-\u0419\u043E\u0440\u043A.
8. \u041E\u043D \u0447\u0438\u0442\u0430\u0435\u0442 \u043A\u043D\u0438\u0433\u0438, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0431\u044B\u0442\u044C \u0443\u043C\u043D\u0435\u0435.</user_input>
<agent_oputput>5. Ich gehe in die Schule, weil alle Kinder lernen m\xFCssen. 
6. Er steht fr\xFCh auf, weil er viel arbeiten muss. 
7. Er f\xE4hrt in die USA, weil er New York sehen will. 
8. Er liest B\xFCcher, weil er kl\xFCger werden will. </agent_oputput>
</example>

<example>
<user_input>\u041E\u043D\u0430 \u0443\u0447\u0438\u0442 \u0430\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0436\u0438\u0442\u044C \u0432 \u0410\u043C\u0435\u0440\u0438\u043A\u0435.</user_input>
<agent_oputput>Sie lernt Englisch, weil sie in Amerika leben will. </agent_oputput>
</example>
</examples>

5. Check user traslation.
Given the non german text, followed by the germen text, assume thet your task is to correct the translation
- Translate the sentece youself.
- If user's translation matches yours or if it lexically/grammatically/etc correct, reply whith "{your_translation} \u2705"
- Check for grammar/spelling mistakes and provide the corrected version, hilighting all of the corrections with =={corrected_part}==. ex: "\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430. Unseren Kollegen" -> "Uns==er== Kolleg==e=="
- If the did not correctly use the vocabulary (made a lexical mistake), reply shall comtain correct wording, with each corrected word ==highlited==. ex: "...\u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B. ...unsere Sachen zu beantworten" -> "unsere Fragen zu beantworten"
- Mind the mistraslated vocabulary, and singular/multiple from
- If there is an error in word order, fix it in priority, marking the misplaced blocks. 
- Make shure, that there is a gap of at least one space/symbol between to highlet parts (ex: "=Frag==en== ==,==", not "=Frag==en====,==")
- Make shure, that all the correct words do not have == == inside. Make shure that all the incorrect parts of all incorrect words are ==hilghlited==
<examples>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns versprochen, sich zu sammeln und alle unsere Fragen zu beantworten.</user_input>
<agent_oputput>Unser Kollege hat uns versprochen, sich zu sammeln und alle unsere Fragen zu beantworten. \u2705</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns versprochen sich zu sammeln und all unser Sachen zu beantworten.</user_input>
<agent_oputput>Unser Kollege hat uns versprochen==,== sich zu sammeln und all==e== unser==e== ==Fragen== zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns versprochen sich zu sammeln und all unser Sache zu beantworten</user_input>
<agent_oputput>Unser Kollege hat uns versprochen==,== sich zu sammeln und all unser==e== ==Fragen== zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unser Kollege hat uns spechen sich zu sammeln und all unser Sache zu beantworten</user_input>
<agent_oputput>Unser Kollege hat uns ==versprochen== ==,== sich zu sammeln und all unser==e== ==Fragen== zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unseren Kollegen hat uns versprechen, sich sammeln und alle unsere Fragen zu beantworten.</user_input>
<agent_oputput>Uns==er== Kolleg==e== hat uns ==versprochen==, sich ==zu== sammeln und all unsere Fragen zu beantworten.</agent_oputput>
</example>
<example>
<user_input>1. \u041D\u0430\u0448 \u043A\u043E\u043B\u043B\u0435\u0433\u0430 \u043F\u043E\u043E\u0431\u0435\u0449\u0430\u043B \u043D\u0430\u043C \u0441\u043E\u0431\u0440\u0430\u0442\u044C\u0441\u044F \u043C\u044B\u0441\u043B\u044F\u043C\u0438 \u0438 \u043E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043D\u0430 \u0432\u0441\u0435 \u043D\u0430\u0448\u0438 \u0432\u043E\u043F\u0440\u043E\u0441\u044B.
Unserem Kollegen haben uns versprechen, sich sammeln und alle unsere Fragen zu beantworten.</user_input>
<agent_oputput>Uns==er== Kolleg==e== ==hat== uns ==versprochen==, sich ==zu== sammeln und alle unsere Fragen zu beantworten.</agent_oputput>
</example>
<example>
<user_input>\u041E\u043D \u0432 \u0413\u0435\u0440\u043C\u0430\u043D\u0438\u0438 \u0443\u0436\u0435 3 \u0434\u043D\u044F. Er ist in Deutschland seit 3 Tagen</user_input>
<agent_output>Er ist ==seit drei Tagen== in Deutschland</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u0435\u0434\u0435\u0442 \u0432\u043E \u0424\u0440\u0430\u043D\u0446\u0438\u044E \u043D\u0430 \u0442\u0440\u0438 \u043D\u0435\u0434\u0435\u043B\u0438. Er fahrt nach Frankreich f\xFCr drei Wochen</user_input>
<agent_output>Er f==\xE4==hrt ==f\xFCr drei Wochen== nach Frankreich.</agent_output>
</example>
</examples>

6. Fill-in-the-Gaps / Open-the-brackets / any-other-default-exercise
- If the text shows an unfinished German sentence with brackets, provide the missing word in the correct form.
- If the text shows an unfinished German sentence with any indication of the gap (like underscores or multipe spaces, etc), provide the missing word in the correct form.
- Go with the wibes 
<examples>
<example>
<user_input>Ich habe vergessen, den Kollegen zu ..... (anrufen)</user_input>
<agent_oputput>Ich habe vergessen, den Kollegen anzurufen.</agent_oputput>
</example>
<example>
<user_input>Ich habe vergessen, Brot zu \u2026\u2026</user_input>
<agent_oputput>Ich habe vergessen, Brot zu kaufen.</agent_oputput>
</example>
<example>
<user_input>Ich habe vergessen, Brot zu ___</user_input>
<agent_oputput>Ich habe vergessen, Brot zu kaufen.</agent_oputput>
<example>
</examples>

7. Solution Review and Corrections
- If the user provides a completed exercise or a partially completed one, review it and highlight errors in Markdown.
- Show the correct form with highlighted errors. The specific places in a word/sentece with spelling/kinjugation/punktuation mistakes shall me corrected with =={correction}== syntax
- If the whole word is incorrect (ex. "zu anrufen" instad of "anzurufen"), highlite the =={whole_word}==
- If the user solved the task correctly, add a checkmark emoji to the end of the output
<examples>
<example>
<user_input>\u042D\u0442\u0443 \u043D\u043E\u0432\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0447\u0438\u0442\u0430\u0442\u044C. Dieses Nachricht kann gelesen werden.</user_input>
<agent_oputput>Dies==e== Nachricht kann gelesen werden.</agent_oputput>
</example>
<example>
<user_input>56. ... Mensch hat in seinem Leben viel zu tun. Jedes Mensch hat in seinem Leben viel zu tun</user_input>
<agent_oputput>Jede==r== Mensch hat in seinem Leben viel zu tun</agent_oputput>
</example>
<example>
<user_input>4. Ich habe vergessen, den Kollegen zu ..... (anrufen). Ich habe vergessen, den Kollegen zu anrufen</user_input>
<agent_oputput>Ich habe vergessen, den Kollegen ==anzurufen==</agent_oputput>
</example>
<example>
<user_input>4. Ich habe vergessen, den Kollegen zu ..... (anrufen). Ich habe vergessen, den Kollegen anzurufen</user_input>
<agent_oputput>Ich habe vergessen, den Kollegen anzurufen \u2705</agent_oputput>
</example>
</examples>

8. Exrecise text and context. Solution Review and Corrections
- If the user provides an exercise task text, followed by the unsolved exercise sentence, reply the solved exercise. 
- If the user provides an exercise task text, followed by the solutions, correct every line independently 
<examples>
<example>
<user_input>17.12 \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0438 \u043C\u0435\u0441\u0442\u043E\u0438\u043C\u0435\u043D\u0438\u0435\u043C jeder \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u043C \u0440\u043E\u0434\u0435 \u0438 \u043F\u0430\u0434\u0435\u0436\u0435. \u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A:
56. \u2026 Mensch hat in seinem Leben viel zu tun.
57. \u2026 Jahr f\xE4hrt mein Bruder ins Ausland.</user_input>
<agent_output>56. ==Jeder== Mensch hat in seinem Leben viel zu tun.
57. Jedes Jahr f\xE4hrt mein Bruder ins Ausland.</agent_output>
</example>
<example>
<user_input>17.12 \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0438 \u043C\u0435\u0441\u0442\u043E\u0438\u043C\u0435\u043D\u0438\u0435\u043C jeder \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u043C \u0440\u043E\u0434\u0435 \u0438 \u043F\u0430\u0434\u0435\u0436\u0435. \u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A:
56. \u2026 Mensch hat in seinem Leben viel zu tun.
57. \u2026 Jahr f\xE4hrt mein Bruder ins Ausland.</user_input>
<agent_output>56. Jeder Mensch hat in seinem Leben viel zu tun.
57. Jedes Jahr f\xE4hrt mein Bruder ins Ausland.</agent_output>
</example>
<example>
<user_input>\u0423\u043F\u0440\u0430\u0436\u043D\u0435\u043D\u0438\u0435 1: \u041F\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F weil:
1. \u042F \u0437\u0430\u043D\u0438\u043C\u0430\u044E\u0441\u044C \u0441\u043F\u043E\u0440\u0442\u043E\u043C, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0445\u043E\u0447\u0443 \u0431\u044B\u0442\u044C \u0437\u0434\u043E\u0440\u043E\u0432\u044B\u043C.
2. \u042F \u0443\u0447\u0443 \u043D\u0435\u043C\u0435\u0446\u043A\u0438\u0439, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u043C\u043D\u0435 \u043D\u0440\u0430\u0432\u0438\u0442\u0441\u044F \u044D\u0442\u043E\u0442 \u044F\u0437\u044B\u043A.</user_input>
<agent_output>1. Ich treibe Sport, weil ich gesund sein m\xF6chte.
2. Ich lerne Deutsch, weil ich diese Sprache mag.</agent_output>
</example>
<example>
<user_input>17.12 \u0417\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0438 \u043C\u0435\u0441\u0442\u043E\u0438\u043C\u0435\u043D\u0438\u0435\u043C jeder \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u043C \u0440\u043E\u0434\u0435 \u0438 \u043F\u0430\u0434\u0435\u0436\u0435. \u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439 \u044F\u0437\u044B\u043A:
56. Jeder Mensch hat in seinem Leben viel zu tun.
57. Jeder Jahr f\xE4hrt mein Bruder ins Ausland.</user_input>
<agent_output>56. Jeder Mensch hat in seinem Leben viel zu tun. \u2705
57. Jede==s== Jahr f\xE4hrt mein Bruder ins Ausland.</agent_output>
</example>

<example>
<user_input>### 17.3* \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u043F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0438\u043C \u043F\u043E \u0441\u043C\u044B\u0441\u043B\u0443 \u0433\u043B\u0430\u0433\u043E\u043B\u043E\u043C \u0432 \u043D\u0435\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u043E\u0439 \u0444\u043E\u0440\u043C\u0435:

1. Er hat mir versprochen, einen interessanten Kommentar zu schreiben.
2. Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu sagen.
3. Wir hoffen, an Ostern nach Amerika zu fliegen.
4. Es gibt viele M\xF6glichkeiten, die Wahrheit zu machen.</user_input>
<agent_output>5. Er hat mir versprochen, einen interessanten Kommentar zu schreiben. \u2705
6. Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu ==bringen==.
7. Wir hoffen, an Ostern nach Amerika zu fliegen. \u2705
8. Es gibt viele M\xF6glichkeiten, die Wahrheit zu ==sagen==</agent_output>
</example>

<example>
<user_input>\u041F\u0435\u0440\u0435\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u044F, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F \u0433\u043B\u0430\u0433\u043E\u043B **tun** \u0432 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0433\u0440\u0430\u043C\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0445 \u0444\u043E\u0440\u043C\u0430\u0445:

1. \u041E\u043D \u0434\u0435\u043B\u0430\u0435\u0442 \u0432\u0441\u0435 \u043D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E.
2. \u042F \u043D\u0435 \u043C\u043E\u0433\u0443 \u0434\u043B\u044F \u0432\u0430\u0441 \u043D\u0438\u0447\u0435\u0433\u043E \u0441\u0434\u0435\u043B\u0430\u0442\u044C</user_input>
<agent_output>Er ==tut== alles falsch
Ich kann nichts f\xFCr Sie ==tun==</agent_output>
</example>
</examples>


9. Conciseness and Directness
- Always aim to give minimal yet sufficient information. The user expects an immediate and straightforward answer.

10. Politeness and Clarity
- If more information is needed, politely ask for it.
- If you can answer, do so succinctly.


<additional_examples_block>
<example>
<user_input>The shop for useful objects was a quaint little establishment (some might even call it cute), which hid behind a vegetable stand, which in turn stood in a small side street of Diagon Alley, behind a shop for magical gloves.</user_input>
<agent_output>Der Laden f\xFCr n\xFCtzliche Gegenst\xE4nde war ein putziges kleines Gesch\xE4ft (manche w\xFCrden es gar als s\xFC\xDF bezeichnen), das sich hinter einem Gem\xFCsestand versteckte, welcher in einer kleinen Seitenstra\xDFe der Winkelgasse hinter einem Laden f\xFCr magische Handschuhe stand</agent_output>
</example>

<example>
<user_input>\u0412\u043E\u0437\u044C\u043C\u0438 \u043D\u0430 \u0432\u0441\u044F\u043A\u0438\u0439 \u0441\u043B\u0443\u0447\u0430\u0439 \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u044B\u0439 \u0442\u0435\u043B\u0435\u0444\u043E\u043D. \u041C\u044B \u0431\u0443\u0434\u0435\u043C \u0442\u0435\u0431\u0435 \u0437\u0432\u043E\u043D\u0438\u0442\u044C.</user_input>
<agent_output>Nimm f\xFCr alle F\xE4lle dein Mobiltelefon. Wir werden dich anrufen.</agent_output>
</example>

<example>
<user_input>The boss told me to bring all my documents to the office</user_input>
<agent_output>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu bringen</agent_output>
</example>

<example>
<user_input>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu bringen.</user_input>
<agent_output>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu bringen.  \u2705</agent_output>
</example>

<example>
<user_input>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu sagen.</user_input>
<agent_output>Der Chef hat mir gesagt, alle meine Dokumente ins B\xFCro zu ==bringen==.</agent_output>
</example>

<example>
<user_input>Der Chef haben mir gesagt, alle mein Dokument ins B\xFCro zu sagen.</user_input>
<agent_output>Der Chef ==hat== mir gesagt, alle mein==e== Dokument==e== ins B\xFCro zu ==bringen==.</agent_output>
</example>

<example>
<user_input>1. \u041F\u043E\u043C\u043E\u0433\u0438\u0442\u0435 \u043C\u043D\u0435 \u043F\u0440\u044B\u0433\u043D\u0443\u0442\u044C! Hilf mir zu springen!
2. \u041F\u043E\u043C\u043E\u0433\u0438\u0442\u0435 \u043D\u0430\u043C \u043E\u0442\u043A\u0440\u044B\u0442\u044C \u0434\u0432\u0435\u0440\u044C. Helfen Sie uns die T\xFCr zu offnen </user_input>
<agent_output>Hilf mir zu springen! \u2705
Helfen Sie uns==,== die T\xFCr zu ==\xF6ffnen==.</agent_output>
</example>

<example>
<user_input>14. Meine Schwester hofft, am Weihnachtsfest sehr gut auszusehen.
15. Die Gro\xDFmutter hat wieder vergessen, die Tabletten einzunehmen.</user_input>
<agent_output>14. Meine Schwester hofft, am Weihnachtsfest sehr gut auszusehen. \u2705
15. Die Gro\xDFmutter hat wieder vergessen, die Tabletten einzunehmen. \u2705</agent_output>
</example>

<example>
<user_input>\u042F \u043D\u0435 \u0437\u043D\u0430\u044E, \u0447\u0442\u043E \u043C\u044B \u0431\u0443\u0434\u0435\u043C \u0434\u0435\u043B\u0430\u0442\u044C \u0437\u0430\u0432\u0442\u0440\u0430. Ich weiss, was wir morgen tun werden</user_input>
<agent_output>Ich wei==\xDF== ==nicht==, was wir morgen tun werden.</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u043D\u0435 \u0437\u043D\u0430\u0435\u0442, \u0447\u0442\u043E \u0442\u044B \u0443\u0436\u0435 \u043F\u0440\u0438\u0435\u0445\u0430\u043B\u0430. Er weiss nicht, das du auch gekommen hat</user_input>
<agent_output>Er wei==\xDF== nicht, da==ss== du auch gekommen ==bist==.</agent_output>
</example>

<example>
<user_input>\u042F \u043D\u0435 \u0443\u0432\u0435\u0440\u0435\u043D, \u0447\u0442\u043E \u043E\u043D\u0438 \u0441\u0435\u0433\u043E\u0434\u043D\u044F \u043F\u0440\u0438\u0435\u0434\u0443\u0442. Ich bin mich nicht sicher, ob sie heute kommen werden</user_input>
<agent_output>Ich bin ==mir== nicht sicher, ob sie heute kommen werden.</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u0440\u0430\u043D\u043E \u0432\u0441\u0442\u0430\u0435\u0442, \u043F\u043E\u0442\u043E\u043C\u0443 \u0447\u0442\u043E \u0434\u043E\u043B\u0436\u0435\u043D \u043C\u043D\u043E\u0433\u043E \u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C. Er steht fr\xFCh auf, weil er fiel arbeiten muss</user_input>
<agent_output>Er steht fr\xFCh auf, weil er fiel arbeiten muss \u2705</agent_output>
</example>

<example>
<user_input>Er fahrt nach die USA, weil er New York sehen will</user_input>
<agent_output>Er f==\xE4==hrt in die USA, weil er New York sehen will.</agent_output>
</example>

<example>
<user_input>Er liest die Bucher, weil er kluger werden will</user_input>
<agent_output>Er liest die B==\xFC==cher, weil er kl\xFCger werden will.</agent_output>
</example>

<example>
<user_input>Dis noichkien lesen will konnte</user_input>
<agent_output>Please include the translation in the next selection in order for me to help with the correction.</agent_output>
</example>

<example>
<user_input>He didn't forget to bring his old notebooks to school. Er haben nicht vergissen, sein alten Hefte in die Schule zu bring.</user_input>
<agent_output>Er ==hat== nicht verg==essen==, sein==e== alten Hefte in die Schule zu bring==en==.</agent_output>
</example>

<example>
<user_input>He didn't forget to bring his old notebooks to school. Sie hat nicht vergessen, seine alten Hefte in die Schule zu bringen.</user_input>
<agent_output>==Er== hat nicht vergessen, seine alten Hefte in die Schule zu bringen.</agent_output>
</example>

<example>
<user_input>\u041E\u043D \u0433\u043E\u0432\u043E\u0440\u0438\u0442, \u0447\u0442\u043E \u043F\u0440\u0438\u0435\u0434\u0435\u0442 \u0447\u0435\u0440\u0435\u0437 \u0447\u0430\u0441. Er sagt, dass er in einer Stunde kommt</user_input>
<agent_output>Er sagt, dass er in einer Stunde kommt \u2705</agent_output>
</example>

<example>
<user_input> \u041E\u043D\u0430 \u0433\u043E\u0432\u043E\u0440\u0438\u0442, \u0447\u0442\u043E \u043F\u0440\u0438\u043B\u0435\u0442\u0435\u043B\u0430 2 \u0433\u043E\u0434\u0430 \u043D\u0430\u0437\u0430\u0434. Sie sagt, dass sie vor zwei Jahren gekommen ist</user_input>
<agent_output>Sie sagt, dass sie vor zwei Jahren gekommen ist \u2705</agent_output>
</example>

</example>
</additional_examples_block>
</instructions>
`;var Oe=`Given a german word, determine it's normal form and pick an appropriate emoji to represent it. In this context, Partizip 1's normal from is an infinitive of a corresponding verb. If the word is a noun, determin it's gender and use \u{1F535} for der,  \u{1F534} for die, if \u{1F7E2} for das. Do not write anything else, just the infinitive and an emoji. 
Examples (input -> output):
"brutzelt" -> "\u{1F373} [[brutzeln]]",
"gesorgt" -> "\u{1F914} [[sorgen]]",
"Hoffnungen" -> "\u{1F534} die [[Hoffnung]] \u{1F54A}\uFE0F",
"eisigen" -> "\u{1F976} [[eisig]]",
"zweiteste" -> "2\uFE0F\u20E3 [[zwei]]",
"Auftragslage" -> "\u{1F4C8} [[Auftragslage]]",
"her" -> "\u27A1\uFE0F [[her]]",
"sa\xDFen" -> "\u{1FA91} [[sitzen]]",
The output should be compact, without extra spaces or newlines.

If a word can be a form of multiple parts of speach, list all options, separated with |. Examples (input -> output):
"vergangene", -> "\u{1F570}\uFE0F [[vergehen]]", 
"Nieser", -> "\u{1F927} [[niesen]] | \u{1F535} der [[Nieser]] \u{1F927}",
"klares", -> "\u{1F60C} [[kl\xE4ren]] | \u{1F60C} [[klar]] | \u{1F7E2} das [[Klare]] \u{1F60C}",
"Nieser", -> "\u{1F927} [[niesen]] | \u{1F535} der [[Nieser]] \u{1F927}",
"Heimwerken" -> "[[heimwerken]] | [[Heimwerk]]",
"deutschen" -> "\u{1F535} der [[Deutsche]] \u{1F1E9}\u{1F1EA} | \u{1F1E9}\u{1F1EA} [[deutsch]]",
"unb\xE4ndiges" -> "\u{1F4AA} [[unb\xE4ndig]] | \u{1F7E2} das [[Unb\xE4ndige]] \u{1F4AA}"
`;var De=`<assistant_role>You are an expert linguist specializing in the German language. Your task is to create a detailed dictionary entry for a normal form of a given German word, following a precise syntax notation.</assistant_role>

<instructions>
<identify_the_normal_form>Identify the part of speech of the given word. Identify the normal from of the word. In this context, Partizip 1's normal from is an infinitive of a corresponding verb. Procced to fill the template for identified normal from</identify_the_normal_form>
<entry_structure>
<phonetics>Provide the IPA pronunciation for the word.</phonetics>
<word_forms>Include singular/plural for nouns, or conjugation for verbs.</word_forms>
<synonyms>List direct synonyms using "=".</synonyms>
<related_words>List loosely related words using "\u2248".</related_words>
<antonyms>List antonyms using "\u2260".</antonyms>
<translation>Provide English and Russian translations.</translation>
<derivatives>List related words (same root or strong association).</derivatives>
</entry_structure>

<formatting>
<emojis>Use an appropriate emoji representing the word\u2019s meaning.</emojis>
<noun_gender>For **nouns**, include a second emoji to indicate grammatical gender:  
- \u{1F534} for **feminine** nouns  
- \u{1F7E2} for **neuter** nouns  
- \u{1F535} for **masculine** nouns  
</noun_gender>
<ipa>Ensure IPA notation is included for phonetics.</ipa>
<capitalization>Use capitalization only where grammatically necessary.</capitalization>
<special_cases>
- **Verbs**: Provide normal form (infinitive) and conjugation.  
- **Nouns**: Provide singular and plural forms, along with gender notation.  
- **Adjectives**: Provide their comparative/superlative forms if relevant.  
- **Numbers**: Include declensions and ordinal forms if applicable.  
- **Prepositions, conjunctions, and adverbs**: Provide synonymous linking words.  
</special_cases>
</formatting>

<consistency>
<ipa_required>All words must have correct IPA transcription.</ipa_required>
<synonyms_order>List synonyms from most direct to least direct.</synonyms_order>
<translations>Ensure translations are precise and contextually appropriate.</translations>
<normal_form>Always use the **normal form** of the word as the entry headword.</normal_form>
</consistency>
</instructions>

<examples>
<example>
<german_word>verfeinden</german_word>
<agent_output>\u{1F624} [[verfeinden]], [f\u025B\u0250\u032F\u02C8fa\u026A\u032Fndn\u0329] | [[verfeindete]], haben [[verfeindet]]

---


---
= [[zerstreiten]], [[entzweien]]
\u2248 Feindschaft  [[schlie\xDFen]], [[verkrachen]], in Konflikt [[geraten]]
\u2260 [[vers\xF6hnen]], [[vertragen]], [[anfreunden]]

---
to make enemies, to set at odds
\u043F\u043E\u0441\u0441\u043E\u0440\u0438\u0442\u044C, \u0441\u0434\u0435\u043B\u0430\u0442\u044C \u0432\u0440\u0430\u0433\u0430\u043C\u0438

---
[[Verfehndung]], [[Verfeindung]], [[Feind]], [[feindlich]], [[Feindschaft]]</agent_output>
</example>

<example>
<german_word>tanztest</german_word>
<agent_output>\u{1F483} [[tanzen]], [\u02C8tan\u02A6n\u0329] | [[tanzte]], haben [[getanzt]]

---

---
= [[sich bewegen]], [[schwofen]], [[abhotten]]
\u2248 [[wiegen]], [[sich drehen]], [[h\xFCpfen]], [[ballettieren]]
\u2260 [[sitzen]], [[stehen]], [[verharren]], [[ruhen]]

---
to dance
\u0442\u0430\u043D\u0446\u0435\u0432\u0430\u0442\u044C

---
[[Tanz]], [[T\xE4nzer]], [[T\xE4nzerin]], [[Tanzfl\xE4che]], [[tanzerisch]], [[Tanzkurs]]</agent_output>
</example>

<example>
<german_word>Hoffnung</german_word>
<agent_output>\u{1F54A}\uFE0F \u{1F534} die [[Hoffnung]], [\u02C8h\u0254fn\u028A\u014B]
die [[Hoffnungen]]

---


---
= [[Zuversicht]], [[Optimismus]]
\u2248 [[Erwartung]], [[Vertrauen]], [[Glaube]], [[Wunsch]]
\u2260 [[Verzweiflung]], [[Pessimismus]], [[Hoffnungslosigkeit]], [[Resignation]]

---
hope
\u043D\u0430\u0434\u0435\u0436\u0434\u0430

---
[[hoffen]], [[hoffentlich]], [[hoffnungsvoll]], [[hoffnungslos]]</agent_output>
</example>

<example>
<german_word>Busch</german_word>
<agent_output>\u{1F333} \u{1F535} der [[Busch]]
die [[B\\xFCsche]]

---


---
= [[Strauch]], [[Gestr\xE4uch]]
\u2248 [[Geb\xFCsch]], [[Hecke]], [[Geh\xF6lz]]
\u2260 [[Baum]], [[Wiese]], [[Ackerland]], [[\xD6dland]]

---
bush, shrub
\u043A\u0443\u0441\u0442

---
buschig, buschieren</agent_output>
</example>

<example>
<german_word>klein</german_word>
<agent_output>\u{1F42D} [[klein]], [\\u02C8kla\\u026A\\u032Fn] \u2260 [[gro\\xDF]]

---


---
= [[kompakt]], [[winzig]], [[gering]]
\u2248 [[niedrig]], [[schmal]], [[zierlich]], [[zart]], [[begrenzt]]
\u2260 [[gro\xDF]], [[riesig]], [[weit]], [[breit]]

---
small, little
\u043C\u0430\u043B\u0435\u043D\u044C\u043A\u0438\u0439

---
[[Kleinheit]], [[kleinlich]], [[kleinmachen]]</agent_output>
</example>
<example>
<german_word>anzurufen</german_word>
<agent_output>\u{1F4DE} [[anrufen]], [\u02C8an\u02A6u\u02CC\u0281u\u02D0f\u0259n] | [[rief an]], haben [[angerufen]]

---


---
= [[telefonieren]], [[kontaktieren]], [[anklingeln]]
\u2248 [[sich melden]], [[Kontakt aufnehmen]], [[durchklingeln]]
\u2260 [[ignorieren]], [[ablehnen]], [[auflegen]], [[beenden]]

---
to call, to phone
\u0437\u0432\u043E\u043D\u0438\u0442\u044C 

---
[[Anruf]], [[Anrufer]], [[Anruferin]], [[anrufbar]], [[Anrufbeantworter]]</agent_output>
</example>
<example>
<german_word>st\xE4ndigen</german_word>
<agent_output>\u{1F570}\uFE0F [[st\xE4ndig]], [\u02C8\u0283t\u025Bnd\u026A\xE7] \u2260 [[selten]]

---


---
= [[fortw\xE4hrend]], [[dauerhaft]], [[andauernd]]
\u2248 [[permanent]], [[kontinuierlich]], [[best\xE4ndig]], [[ununterbrochen]], [[pausenlos]]
\u2260 [[selten]], [[gelegentlich]], [[unregelm\xE4\xDFig]], [[sporadisch]]

---
constantly, continuously, persistently, perpetually
\u043F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u044B\u0439, \u043D\u0435\u043F\u0440\u0435\u0440\u044B\u0432\u043D\u044B\u0439, \u0431\u0435\u0441\u043F\u0440\u0435\u0441\u0442\u0430\u043D\u043D\u044B\u0439

---
[[stehen]], [[St\xE4ndigkeit]], [[zust\xE4ndig]], [[anst\xE4ndig]], [[best\xE4ndig]], [[aufst\xE4ndig]]</agent_output>
</example>

<example>
<german_word>zweiteres</german_word>
<agent_output>2\uFE0F\u20E3 [[zwei]], [t\u0361sva\u026A\u032F]  

---

---
= [[doppelt]], [[beide]], [[paar]]  
\u2248 [[ein paar]], [[mehrere]], [[einige]]  
\u2260 [[eins]], [[drei]], [[keiner]]  

---
two  
\u0434\u0432\u0430  

---
[[zwei]]  

---
N: [[zwei]]  
A: [[zwei]]  
G: [[zweier]]  
D: [[zweien]]  

---
\u{1F4CF} **Konjugierte Ordinalzahlen**  
N: [[zweite]], [[zweiter]], [[zweites]], [[zweiten]]  
A: [[zweiten]], [[zweiteren]], [[zweiten]]  
G: [[zweiten]], [[zweiterer]], [[zweiten]]  
D: [[zweitem]], [[zweiterem]], [[zweiten]]  
F: [[zweite]], [[zweitere]], [[zweiteste]]  
N: [[zweites]], [[zweiteres]], [[zweitestes]]  
P: [[zweiten]], [[zweiteren]], [[zweitesten]]  

---
\u{1F4CA} **Konjugierte Indefinitzahlen** *(if applicable)*  
(none for zwei)  

---
[[zweitens]], [[zweifach]], [[zwilling]], [[zweierlei]], [[zweiundzwanzig]], [[der Zweite]], [[zweitweise]], [[zweimalig]]</agent_output>
</example>


<example>
<german_word>einzigsten</german_word>
<agent_output>1\uFE0F\u20E3 [[eins]], [a\u026A\u032Fns] | [[ein]], [a\u026A\u032Fn]  

---
= [[einziger]], [[einer]], [[einmal]]  
\u2248 [[gewisser]], [[irgendein]], [[ein paar]]  
\u2260 [[null]], [[zwei]], [[kein]]  

---
one, a/an, single  
\u043E\u0434\u0438\u043D, \u043D\u0435\u043A\u0438\u0439, \u043A\u0430\u043A\u043E\u0439-\u0442\u043E  

---
[[ein]]  

---
N: [[ein]], [[eins]]  
A: [[ein]]  
G: [[eines]]  
D: [[einem]]  

---
\u{1F4CF} **Konjugierte Ordinalzahlen**  
N: [[erste]], [[erster]], [[erstes]], [[ersten]]  
A: [[ersten]], [[ersteren]], [[ersten]]  
G: [[ersten]], [[ersterer]], [[ersten]]  
D: [[erstem]], [[ersterem]], [[ersten]]  
F: [[erste]], [[erstere]], [[ersteste]]  
N: [[erstes]], [[ersteres]], [[erstestes]]  
P: [[ersten]], [[ersteren]], [[erstesten]]  

---
\u{1F4CA} **Konjugierte Indefinitzahlen**  
N: [[einige]], [[einer]], [[einziges]], [[einigen]]  
A: [[einigen]], [[einiger]], [[einzigsten]]  
G: [[einiger]], [[einigerer]], [[einzigster]]  
D: [[einigem]], [[einigerem]], [[einzigstem]]  
F: [[einige]], [[einige]], [[einzigste]]  
N: [[einiges]], [[einigeres]], [[einzigstes]]  
P: [[einigen]], [[einigeren]], [[einzigsten]]  

---
[[einmal]], [[einzig]], [[einer]], [[einige]], [[erstens]], [[einheit]], [[einzel]], [[einzigartig]], [[einmalig]]</agent_output>
</example>

<example>
<german_word>traurig</german_word>
<agent_output>\u{1F622} [[traurig]], [\u02C8t\u0281a\u028A\u032F\u0281\u026A\xE7]
nicht [[fr\xF6hlich]]

---


---
= [[betr\xFCbt]], [[bek\xFCmmert]], [[niedergeschlagen]]
\u2248 [[melancholisch]], [[wehm\xFCtig]], [[bedr\xFCckt]]
\u2260 [[fr\xF6hlich]], [[gl\xFCcklich]], [[heiter]], [[vergn\xFCgt]]

---
sad, sorrowful
\u0433\u0440\u0443\u0441\u0442\u043D\u044B\u0439, \u043F\u0435\u0447\u0430\u043B\u044C\u043D\u044B\u0439

---
[[Trauer]], [[trauern]], [[Traurigkeit]], [[betrauern]], [[trauernd]]</agent_output>
</example>
<example>
<german_word>obwohl</german_word>
<agent_output>\u{1F517} [[obwohl]], [\u0254p\u02C8vo\u02D0l]

---


---
= [[obgleich]], [[wenngleich]], [[obschon]]
\u2248 [[dennoch]], [[gleichwohl]], [[trotzdem]], [[nichtsdestotrotz]]
\u2260 [[weil]], [[denn]], [[deshalb]], [[daher]]

---
although, even though, despite
\u0445\u043E\u0442\u044F, \u043D\u0435 \u0441\u043C\u043E\u0442\u0440\u044F \u043D\u0430 

---
[[ob]]|[[wohl]]

---
[[trotz]], [[obschon]], [[obzwar]], [[wiewohl]], [[obgleich]]</agent_output>
</example>
<example>
<german_word>Rechercheergebnisse</german_word>
<agent_output>\u{1F4C4} \u{1F7E2} das [[Rechercheergbenis]], [re\u02C8\u0283\u025Br\u0283\u0259\u0294\u025B\u0250\u032F\u0261e\u02D0pn\u026As]
die [[Rechercheergbnisse]]

---


---
= [[Untersuchungsergebnis]], [[Forschungsergebnis]]
\u2248 [[Ergebnis]], [[Resultate]], [[Erkenntnisse]], [[Befund]]
\u2260 [[Hypothese]], [[Vermutung]], [[Spekulation]]

---
research result, findings
\u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u0438\u0441\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u043D\u0438\u044F

---
[[recherchieren]], [[Recherche]], [[ergebnisorientiert]], [[Forschung]]</agent_output>
</example>
</examples>

<example>
<german_word>her</german_word>
<agent_output>\u2B06\uFE0F [[her]], [he\u02D0\u0250\u032F]

---

---
= [[hierher]], [[dorthin]]
\u2248 [[hin]], [[dort]], [[hier]]
\u2260 [[hinweg]], [[weg]]

---
here, hither
\u0441\u044E\u0434\u0430

---
[[her]]

---
[[herkommen]], [[heraus]], [[herum]], [[her\xFCber]], [[herunter]], [[herausfinden]], [[herstellen]], [[hergeben]]</agent_output>
</example>
</examples>
`;var Me=`You are a highly advanced linguistic parser trained in **german syntax analysis**. your task is to process sentences by identifying their grammatical structure and annotating key elements using Obsidian links markdown notation.
Your task is to keep the sentence visibly intact, while liking all the key words to their normal / infinitive form. Focus on spotting and correcty identifying the separabe words. See instructions below on how to procesess them.

## <instructions>
1. **normalize all words to their base form**:
- brutzelt \u2192 [[brutzeln|brutzelt]]
- gesorgt \u2192 [[sorgen|gesorgt]]
- sorgen \u2192 [[sorgen]]
- Katze \u2192 [[Katze]]
- Hoffnungen \u2192 [[Hoffnung|Hoffnungen]]
- eisigen \u2192 [[eisig|eisigen]]
- einzigsten \u2192 [[eins|einzigsten]]
- zweiteste \u2192 [[zwei|zweiteste]]
2. **identify and tag verbs** with their infinitive forms, keeping their conjugation visible**, except for *haben, sein,* and *werden*, which remain untagged:
- hat \u2192 hat
- lie\xDF \u2192 [[lassen|lie\xDF]]
- werden verbunden \u2192 werden ... [[verbinden|verbunden]]
3. **handle separable verbs properly** by tagging both parts:
- h\xE4ngst auf \u2192 [[aufh\xE4ngen|h\xE4ngst]] ... [[aufh\xE4ngen|auf]]
- weiterhelfen \u2192 [[weiterhelfen|weiter]] ... [[weiterhelfen|helfen]]
- vorbeikommen \u2192 [[vorbeikommen]]
4. **convert numerals and ordinal numbers properly**:
- zweiteste \u2192 [[zwei]]
- drittes \u2192 [[drei]]
5. **convert abbreviations to their expanded form where applicable**:
- z.B. \u2192 [[zum Beispiel|z.B.]]
6. **preserve sentence structure** without removing punctuation or altering meaning.
7. **ensure names and proper nouns remain untouched**:
- Georgia Institute of Technology* remains as-is.
- *Avoid introducing typos in names** (e.g., *Laupsien* must not become *Laupien*).
8. **do not enclose pronouns or function words** (e.g., *mein, mich, dein, unser, ihr* remain untagged).
9. **plural nouns must be linked to their singular forms**:
- Krabbenschalen \u2192 [[Krabbenschale|Krabbenschalen]]
- Baumfasern \u2192 [[Baumfaser|Baumfasern]]
- Ausgangsmaterialien \u2192 [[Ausgangsmaterial|Ausgangsmaterialien]]
10. all conjugated verbs must be linked to their infinitive base form, including past tense:
\u2022	verwendeten \u2192 [[verwenden|verwendeten]]
\u2022	nahm \u2192 [[nehmen|nahm]]
\u2022	dachten \u2192 [[denken|dachten]]

## <examples>
### Example 1
#### <user_input>
Vincke: Oh sch\xF6n, sehr sch\xF6n. Da wird sich Leon freuen. Wann k\xF6nnen wir denn mal vorbeikommen?
#### <ideal_output>
Vincke: Oh [[sch\xF6n]], sehr [[sch\xF6n]]. Da wird sich Leon [[freuen|freuen]]. Wann [[k\xF6nnen|k\xF6nnen]] wir denn mal [[vorbeikommen]]?

### Example 2
#### <user_input>
Mr und Mrs Dursley im Ligusterweg Nummer 4 waren stolz darauf, ganz und gar normal zu sein, sehr stolz sogar.
#### <ideal_output>
Mr und Mrs Dursley im Ligusterweg [[Nummer]] 4 waren [[stolz]] darauf, [[ganz und gar]] normal zu sein, [[sehr]] [[stolz]] [[sogar]].

### Example 3
#### <user_input>
So hat jeder seine Sorgen... Ehe ich's vergesse: heute Abend l\xE4\xDFt du dir von Tante Martha einen Kleiderb\xFCgel geben und h\xE4ngst den Anzug ordentlich auf.
#### <ideal_output>
So hat jeder seine [[Sorgen]]... [[Ehe]] ich's [[vergessen|vergesse]]: [[heute]] [[Abend]] [[geben lassen|l\xE4\xDFt]] du dir von Tante Martha einen [[Kleiderb\xFCgel]] [[geben lassen|geben]] und [[aufh\xE4ngen|h\xE4ngst]] den [[Anzug]] [[ordentlich]] [[aufh\xE4ngen|auf]].

## **additional notes**
- *pronouns and function words** (e.g., *ich, du, wir, dass, weil, mein, dein, unser, mich, dich*) **are not tagged**.
- *negations** (*nicht, kein*) remain untagged.
- *modal verbs** (*k\xF6nnen, m\xFCssen, sollen*) should be tagged when conjugated:
- kann gehen \u2192 [[k\xF6nnen|kann]] [[gehen]]
- *separable verbs must be tagged in both parts**, even when split:
- weiterhelfen \u2192 [[weiterhelfen|weiter]] ... [[weiterhelfen|helfen]]
- *haben, sein, and werden** remain **untagged**, regardless of conjugation.
- *plural nouns must be tagged with their singular form**.

### Example 3
#### <user_input>
Wenn Schwesterlein zur Arbeit muss
Schlie\xDFt mich im Zimmer ein 
#### <ideal_output>
Wenn [[Schwesterlein]] zur [[Arbeit]] [[m\xFCssen|muss]]  
[[einschlie\xDFen|Schlie\xDFt]] mich im [[Zimmer]] [[einschlie\xDFen|ein]] 

## Example 5
#### <user_input>
Bei der Herstellung der Plastikalternative werden Chitinschichten aus Krabbenschalen und Zellulose von Baumfasern miteinander verbunden.   
#### <ideal_output>
Bei der [[Herstellung]] der [[Plastikalternative]] werden [[Chitinschale|Chitinschichten]] aus [[Krabbenschale|Krabbenschalen]] und [[Zellulose]] von [[Baumfaser|Baumfasern]] [[miteinander]] [[verbinden|verbunden]].

## Example 6
#### <user_input>
**Laupsien:** Das ist doch sch\xF6n. Tiere sind f\xFCr Kinder immer gut, f\xF6rdern Sozialkompetenz, Verantwortungsbewusstsein ...
#### <ideal_output>
[[Laupsien]]: Das ist doch [[sch\xF6n]]. [[Tier|Tiere]] sind f\xFCr [[Kind|Kinder]] [[gut]], [[f\xF6rdern]] [[Sozialkompetenz]], [[Verantwortungsbewusstsein]]...

## Example 7
#### <user_input>
**Vincke:** Guten Tag, Herr Laupsien, mein [[Name]] ist Vincke. Ich habe ein Problem, vielleicht k\xF6nnen Sie mir da weiterhelfen.
#### <ideal_output>
Vincke: [[Guten Tag]], Herr Laupsien, mein [[Name]] ist Vincke. Ich habe ein [[Problem]], [[vielleicht]] [[k\xF6nnen|k\xF6nnen]] Sie mir da [[weiterhelfen]].

## Example 8
#### <user_input>
Einen interessanten Ansatz haben z.B. Forscher des Georgia Institute of Technology. Sie verwendeten als Ausgangsmaterialien f\xFCr ihr neues Produkt Krabbenschalen und Baumfasern.
#### <ideal_output>
Einen [[interessant|interessanten]] [[Ansatz]] haben [[zum Beispiel|z.B.]] [[Forscher]] des Georgia Institute of Technology. Sie [[verwenden|verwendeten]] als [[Ausgangsmaterial|Ausgangsmaterialien]] f\xFCr ihr [[neu|neues]] [[Produkt]] [[Krabbenschale|Krabbenschalen]] und [[Baumfaser|Baumfasern]].

## Example 8
#### <user_input>
Steh auf!  
Steh wieder auf!  
#### <ideal_output>
[[aufstehen|Steh]] [[aufstehen|auf]]!  
[[aufstehen|Steh]] [[wieder]] [[aufstehen|auf]]!  

## Example 9
#### <user_input>
Und der Hut fliegt weit voran,  
st\xF6\xDFt zuletzt am Himmel an. 
#### <ideal_output>
Und der [[Hut]] [[fliegen|fliegt]] [[weit]] [[voran]],  
[[ansto\xDFen|st\xF6\xDFt]] [[zuletzt]] am [[Himmel]] [[ansto\xDFen|an]]. 

## Example 10
#### <user_input>
--Gr\xFC\xDFe sie alle sch\xF6n von mir. Und pa\xDF gut auf. In Berlin geht es anders zu als bei uns in Neustadt. Und am Sonntag gehst du mit Onkel Robert ins KaiserFriedrich-Museum. Und benimm dich anst\xE4ndig, damit es nicht hei\xDFt, wir hier w\xFC\xDFten nicht, was sich geh\xF6rt.
#### <ideal_output>
--[[Gr\xFC\xDFen|Gr\xFC\xDFe]] sie alle [[sch\xF6n]] von mir. Und [[aufpassen|pa\xDF]] [[gut]] [[aufpassen|auf]]. In Berlin [[gehen|geht]] es [[anders]] zu als bei uns in [[Neustadt]]. Und am [[Sonntag]] [[gehen|gehst]] du mit [[Onkel]] Robert ins KaiserFriedrich-Museum. Und  [[benehmen|benimm]] dich [[anst\xE4ndig]], damit es nicht [[hei\xDFen|hei\xDFt]], wir hier [[wissen|w\xFC\xDFten]] nicht, was sich [[geh\xF6ren|geh\xF6rt]].

## Example 11
#### <user_input>
In der Regel l\xF6se ich meine Punkte dann in Wertkupons ein und gehe dann damit einmal einkaufen.
#### <ideal_output>
In der [[Regel]] [[einl\xF6sen|l\xF6se]] ich meine [[Punkt|Punkte]] dann in [[Wertkupon|Wertkupons]] [[einl\xF6sen|ein]] und [[gehen|gehe]] dann damit einmal [[einkaufen]].

## Example 11
#### <user_input>
Wir schauen uns mal an, wie das funktioniert.
#### <ideal_output>
Wir [[anschauen|schauen]] uns mal [[anschauen|an]], wie das [[funktionieren|funktioniert]].
`;var Fe=`Translate the given German text to English. When possible, keep Obsidan-flavored markdown formatting semi-consistent between original and translation. If it requires you to bend english grammar a bit -- so be it. If there is no [[]] or ==...== in the sentence, translate it as naturally-sounging as possible.
<examples>
<example>
<user_input>Wir treffen uns [[entweder]] im Restaurant, [[oder]] im *Kino*.</user_input>
<agent_input>We'll meet [[either]] at the restaurant [[or]] at the *cinema*.<agent_input>
</example>
<example>
<user_input>Er ist zwar noch jung, [[aber]] schon sehr ==ber\xFChmt==.</user_input>
<agent_input>He is indeed still young, [[but]] already very ==famous==.<agent_input>
</example>
<example>
<user_input>Es kam aber den V\xF6geln [[in den Sinn]], sie wollten nicht l\xE4nger ohne Herrn sein und einen unter sich zu ihrem K\xF6nig w\xE4hlen.</user_input>
<agent_input>But it [[occurred]] to the birds that they no longer wanted to be without a master and wanted to choose one among themselves to be their king.<agent_input>
</example>
<example>
<user_input>Du willst dein Lebtag nicht wieder allein vom Wege [[ab]] in den Wald laufen, wenn dir's die Mutter verboten hat.</user_input>
<agent_input>You will never again stray [[away]] from the path into the forest alone in your life if your mother has forbidden it.<agent_input>
</example>

<example>
<user_input>Die Dursleys besa\xDFen alles, was sie wollten, doch sie hatten auch ein Geheimnis, und dass [[es]] jemand aufdecken k\xF6nnte, war ihre gr\xF6\xDFte Sorge.</user_input>
<agent_input>The Dursleys possessed everything they wanted, but they also had a secret, and their greatest fear was that somebody would uncover [[it]].<agent_input>
</example>

<example>
<user_input>[[Es]] besteht die M\xF6glichkeit ==einer== Katastrophe.</user_input>
<agent_input>[[There]] is a possibility ==of the== disaster.<agent_input>
</example>
</examples>
`;var T=require("obsidian"),w="\u2014";function Q(e,n,t){return e=e.replace(/[\s\n]+$/,""),`${`[[${n}#^${t}|^]]`} ${e} ^${t}
`}async function H(e,n,t){try{let i=(0,T.normalizePath)(n),r=e.getAbstractFileByPath(i);if((!r||!(r instanceof T.TFile))&&(await e.create(i,""),r=e.getAbstractFileByPath(i),!r||!(r instanceof T.TFile))){console.error(`Failed to create file "${i}".`);return}await e.process(r,a=>a+t)}catch(i){throw console.error(`Failed to append to file ${n}: ${i}`),i}}async function L(e,n,t){try{let i=(0,T.normalizePath)(n),r=e.getAbstractFileByPath(i);return!r||!(r instanceof T.TFile)?null:(await e.read(r)).includes(t)}catch(i){return console.error(`Failed to check file content ${n}: ${i}`),null}}var Pn="###### [[verfeinden]] *[[sich]]* `mit` jM\n- `Mit` wem [[hast]] du *[[sich|dich]]* [[verfeindet]]?\n- `Mit` meinem ehemaligen Freund.\n\n- Warum [[hat]] sie *[[sich|sich]]* `mit` ihm [[verfeindet]]?\n",Kn=`###### rennen
- Wohin rennst du?
- Zum Bus.

- Mit wem rennen wir?
- Mit unseren Freunden.

- Wie lange bist du schon gerannt?
- Seit f\xFCnf Minuten.`,jn=`###### [[hoffen]] \`auf\` jN
- \`Worauf\` [[hoffst]] du?
- \`Auf\` gutes Wetter.

- \`Auf\` wen [[hoffen]] sie?
- \`Auf\` ihren Trainer.

- Wie lange [[hast]] du \`darauf\` [[gehofft]]?
- Seit einer Woche.

---
###### [[hoffen]]
- Was [[hoffst]] du?
- Einen guten Ausgang.

- Warum [[hoffen]] wir?
- Weil wir an das Beste glauben.

- Wie lange [[hast]] du [[gehofft]]?
- Dein Leben lang.`,Bn=`###### [[stellen]] jN jM [[vor]]
- Wen [[stellst]] du mir [[vor]]?
- Meinen Freund.

- Wem [[stellen]] wir euch [[vor]]?
- Meinem Chef.

- Warum [[hat]] er mich ihr [[vorgestellt]]?
- Um euch miteinander bekannt zu machen.

---
###### [[stellen]] *[[sich]]* jN [[vor]]
- Wen [[stellst]] du *[[sich|dir]]* [[vor]]?
- Einen ber\xFChmten Schauspieler.

- Was [[stellen]] wir *[[sich|uns]]* [[vor]]?
- Unsere Reise nach Japan.

- Warum [[hat]] er *[[sich|sich]]* das nicht [[vorgestellt]]?
- Weil es zu unrealistisch war.`,Pe="###### [[erfahren]] (`von` jM / `durch` jN) **von** jN\n- **Wovon** [[erf\xE4hrst]] du?\n- **Von** einer neuen Regelung.\n\n- `Von` wem [[haben]] wir das [[erfahren]]?\n- `Von` unserem Lehrer.\n\n- Wie [[hat]] sie **davon** [[erfahren]]?\n- Sie [[hat]] **davon** `durch` einen Freund  [[erfahren]]\n\n---\n###### [[erfahren]] `\xFCber` jN\n- `Wor\xFCber` [[erf\xE4hrst]] du in dem Kurs?\n- `\xDCber` die Geschichte Europas.\n\n- `\xDCber` welches Thema haben wir mehr [[erfahren]]?\n- `\xDCber` moderne Technologien.\n\n- Warum [[hat]] er `dar\xFCber` nichts [[erfahren]]?\n- Weil er nicht zugeh\xF6rt hat.",Gn="###### [[aufpassen]] `auf` jN\n- `Worauf` [[passt]] du [[auf]]?\n- `Auf` den Verkehr.\n\n- `Auf` wen [[passt]] du [[auf]]?\n- `Auf` mein kleines Geschwisterchen.\n\n- Wie lange [[hast]] du `darauf` [[aufgepasst]]?\n- Den ganzen Tag.",Wn="###### [[gew\xF6hnen]] *[[sich]]* `an` jN\n- `Woran` [[gew\xF6hnst]] du *[[sich|dich]]*?\n- `An` das kalte Wetter.\n\n- `An` wen [[hat]] sie *[[sich|sich]]* [[gew\xF6hnt]]?\n- `An` ihren neuen Kollegen.\n\n- Wie lange [[hast]] du *[[sich|dich]]* `daran` [[gew\xF6hnt]]?\n- Ein paar Monate.",Hn=`###### [[darstellen]] jN
- Wen [[stellt]] der Schauspieler [[dar]]?
- Einen ber\xFChmten K\xF6nig.

- Was [[stellen]] wir [[dar]]?
- Eine Gefahr f\xFCr das \xD6kosystem.

- Wie lange [[hat]] sie diese Figur [[dargestellt]]?
- Mehr als zehn Jahre.
`,Ke=`<assistant_role>You are an advanced linguistic assistant specializing in German verb syntax and grammar. Your task is to generate structured Markdown-formatted valence dictionary entries for given German verbs following a precise syntax notation.</assistant_role>

<instructions>
0. You are given a konjugated german word. If it is a form of a verb, proceed with genetaring valence blocks for it's infinitive. If it is not a form of a verb, reply with "${w}". 
1. Determine Reflexivity  
   - If the verb is only reflexive, generate a block for its reflexive usage.  
   - If the verb can be used both reflexively and non-reflexively, generate two separate blocks.  
   - If the verb is never reflexive, only generate the non-reflexive block.  

2. Identify Governed Prepositions  
   - If the verb requires a *governed preposition, mark it using backticks (\`...\`) in the block title and questions.  
   - If the verb has both a governed and a free preposition, the first governed preposition is marked with \`...\`, and the second governed preposition is marked with **....**  

3. Syntax Formatting:  
- start every block with a title
- Reflexive pronouns (e.g., *sich, dir, mir*) are wrapped inside *[[...]]*.  
- Verb stems (conjugated and participle forms) are wrapped inside [[...]].  
- Governed prepositions are wrapped inside backticks  \`...\` .  
- First governed preposition in the response is wrapped inside \`...\`.  
- Second governed preposition (if present) is wrapped inside double asterisks **...**.

4. If there are Governed Preposition, Every block shall include dialogs with wo{Governed Preposition}, da{Governed Preposition} and Governed Preposition. No more then 3 dialogs per block.
</instructions>

<examples>
<exapmle>
<german_word>verfeinden</german_word>
<ideal_output>${Pn}</ideal_output>
</exapmle>

<exapmle>
<german_word>rennen</german_word>
<ideal_output>${Kn}</ideal_output>
</exapmle>

<exapmle>
<german_word>hoffe</german_word>
<ideal_output>${jn}</ideal_output>
</exapmle>

<exapmle>
<german_word>vorgestellt</german_word>
<ideal_output>${Bn}</ideal_output>
</exapmle>

<exapmle>
<german_word>aufgepasst</german_word>
<ideal_output>${Gn}</ideal_output>
</exapmle>

<exapmle>
<german_word>gew\xF6hnen</german_word>
<ideal_output>${Wn}</ideal_output>
</exapmle>

<exapmle>
<german_word>darstellen</german_word>
<ideal_output>${Hn}</ideal_output>
</exapmle>

<exapmle>
<german_word>erf\xFChre</german_word>
<ideal_output>${Pe}</ideal_output>
</exapmle>

<exapmle>
<german_word>erfahren</german_word>
<ideal_output>${Pe}</ideal_output>
</exapmle>

<exapmle>
<german_word>normale</german_word>
<ideal_output>${w}</ideal_output>
</exapmle>

<exapmle>
<german_word>Frau</german_word>
<ideal_output>${w}</ideal_output>
</exapmle>

<exapmle>
<german_word>liebsten</german_word>
<ideal_output>${w}</ideal_output>
</exapmle>
<examples>`;var je=`<assistant_role>You are an advanced linguistic assistant specializing in German syntax and grammar. Your task is to generate structured Markdown-formatted konjugation/deklination table entries for a given German word, following a precise syntax notation.</assistant_role>
<instructions>
1. Identify the part of speech of the normal from of the word. In this context, Partizip 1's normal from is an infinitive of a corresponding verb. 
2. If it's a verb:
- Determine if it's trennbar (separable) or untrennbar (inseparable).
- Identify its tense forms (present, past, perfect).
- Note any irregular conjugations. 
- Fill the list of cojugations (Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I, Konjunktiv II) 

3. For nouns:
- Identify the gender (masculine, feminine, or neuter).
- Determine the declension pattern.

4. For adjectives:
- Note the comparative and superlative forms.
</instructions>

Present only your final entry. Do not write to the user your thought process. Do not include tags in the output
<examples>
<example>
<german_word>verfeinden</german_word>
<agent_output>Person, Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I,  Konjunktiv II 
ich, [[verfeind]] / [[verfeinde]], [[verfeindete]], [[verfeinde]], [[verfeindete]], -
du, [[verfeindest]], [[verfeindetest]], [[verfeindest]], [[verfeindetest]], [[verfeind]] / [[verfeinde]]
er, [[verfeindet]], [[verfeindete]], [[verfeinde]], [[verfeindete]], -
wir, [[verfeinden]], [[verfeindeten]], [[verfeinden]], [[verfeindeten]], [[verfeinden]]
ihr, [[verfeindet]], [[verfeindetet]], [[verfeindet]], [[verfeindetet]], [[verfeindet]]
sie, [[verfeinden]], [[verfeindeten]], [[verfeinden]], [[verfeindeten]], [[verfeinden]]

*Zu + Inf*: zu [[verfeinden]], *P2*: [[verfeindet]]
Adjektive: [[verfeindend]], [[verfeindender]], [[verfeindendst]]</agent_output>
</example>

<example>
<german_word>tanztest</german_word>
<agent_output>Person, Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I,  Konjunktiv II 
ich, [[tanz]] / [[tanze]], [[tanzte]], [[tanze]], [[tanzte]], -
du, [[tanzt]], [[tanztest]], [[tanzest]], [[tanztest]], [[tanz]] / [[tanze]]
er, [[tanzt]], [[tanzte]], [[tanze]], [[tanzte]], -
wir, [[tanzen]], [[tanzten]], [[tanzen]], [[tanzten]], [[tanzen]]
ihr, [[tanzt]], [[tanztet]], [[tanzet]], [[tanztet]], [[tanzt]]
sie, [[tanzen]], [[tanzten]], [[tanzen]], [[tanzten]], [[tanzen]]

*Zu + Inf*: zu [[tanzen]], *P2*: [[getanzt]
Adjektive: [[tanzend]], [[tanzender]], [[tanzendst]]]</agent_output>
</example>

<example>
<german_word>Hoffnung</german_word>
<agent_output>N: die [[Hoffnung]], die [[Hoffnungen]]  
A: die [[Hoffnung]], die [[Hoffnungen]]  
G: der [[Hoffnung]], der [[Hoffnungen]]  
D: der [[Hoffnung]], den [[Hoffnungen]]</agent_output>
</example>

<example>
<german_word>Busch</german_word>
<agent_output>N: der [[Busch]], die [[B\xFCsche]]  
A: den [[Busch]], die [[B\xFCsche]]  
G: des [[Busches]], der [[B\xFCsche]]  
D: dem [[Busch]], den [[B\xFCschen]]</agent_output>
</example>

<example>
<german_word>klein</german_word>
<agent_output>Adjektive: [[klein]], [[kleiner]], [[kleinster]]  
</example>

<example>
<german_word>anzurufen</german_word>
<agent_output>ich, [[ruf an]] / [[rufe an]], [[rief an]], [[rufe an]], [[riefe an]], -
du, [[rufst an]], [[riefst an]], [[rufest an]], [[riefest an]], [[ruf an]] / [[rufe an]]
er, [[ruft an]], [[rief an]], [[rufe an]], [[riefe an]], -
wir, [[rufen an]], [[riefen an]], [[rufen an]], [[riefen an]], [[rufen an]]
ihr, [[ruft an]], [[rieft an]], [[rufet an]], [[riefet an]], [[ruft an]]
sie, [[rufen an]], [[riefen an]], [[rufen an]], [[riefen an]], [[rufen an]]

*Zu + Inf*: [[anzurufen]], *P2*: [[angerufen]]
Adjektive: [[anrufend]], [[anrufender]], [[anrufendst]]</agent_output>
</example>
<example>
<german_word>st\xE4ndigen</german_word>
<agent_output>Adjektive: [[st\xE4ndig]], [[st\xE4ndiger]], [[st\xE4ndigst]]</agent_output>
</example>

<example>
<german_word>zweiteres</german_word>
<agent_output>N: [[zwei]]  
A: [[zwei]]  
G: [[zweier]]  
D: [[zweien]]

---
\u{1F4CF} **Konjugierte Ordinalzahlen**  
N: [[zweite]], [[zweiter]], [[zweites]], [[zweiten]]  
A: [[zweiten]], [[zweiteren]], [[zweiten]]  
G: [[zweiten]], [[zweiterer]], [[zweiten]]  
D: [[zweitem]], [[zweiterem]], [[zweiten]]  
F: [[zweite]], [[zweitere]], [[zweiteste]]  
N: [[zweites]], [[zweiteres]], [[zweitestes]]  
P: [[zweiten]], [[zweiteren]], [[zweitesten]]  

---
\u{1F4CA} **Konjugierte Indefinitzahlen** *(if applicable)*  
(none for zwei)</agent_output>
</example>


<example>
<german_word>einzigsten</german_word>
<agent_output>N: [[ein]], [[eins]]  
A: [[ein]]  
G: [[eines]]  
D: [[einem]]  

---
\u{1F4CF} **Konjugierte Ordinalzahlen**  
N: [[erste]], [[erster]], [[erstes]], [[ersten]]  
A: [[ersten]], [[ersteren]], [[ersten]]  
G: [[ersten]], [[ersterer]], [[ersten]]  
D: [[erstem]], [[ersterem]], [[ersten]]  
F: [[erste]], [[erstere]], [[ersteste]]  
N: [[erstes]], [[ersteres]], [[erstestes]]  
P: [[ersten]], [[ersteren]], [[erstesten]]  

---
\u{1F4CA} **Konjugierte Indefinitzahlen**  
N: [[einige]], [[einer]], [[einziges]], [[einigen]]  
A: [[einigen]], [[einiger]], [[einzigsten]]  
G: [[einiger]], [[einigerer]], [[einzigster]]  
D: [[einigem]], [[einigerem]], [[einzigstem]]  
F: [[einige]], [[einige]], [[einzigste]]  
N: [[einiges]], [[einigeres]], [[einzigstes]]  
P: [[einigen]], [[einigeren]], [[einzigsten]]</agent_output>
</example>

<example>
<german_word>traurig</german_word>
<agent_output>Adjektive: [[traurig]], [[trauriger]], [[traurigst]]</agent_output>
</example>
<example>
<german_word>obwohl</german_word>
<agent_output>${w}</agent_output>
</example>
<example>
<german_word>Rechercheergebnisse</german_word>
<agent_output>N: das [[Rechercheergbenis]], die [[Rechercheergbnisse]]  
A: das [[Rechercheergbenis]], die [[Rechercheergbnisse]]  
G: des [[Rechercheergbnis\xADses]], der [[Rechercheergbnisse]]  
D: dem [[Rechercheergbnis]], den [[Rechercheergbnissen]]</agent_output>
</example>
</examples>

<example>
<german_word>her</german_word>
<agent_output>${w}</agent_output>
</example>

<example>
<german_word>verstopft</german_word>
<agent_output>Person, Pr\xE4sens, Pr\xE4teritum, Imperativ, Konjunktiv I, Konjunktiv II
ich, [[verstopf]] / [[verstopfe]], [[verstopfte]], [[verstopfe]], [[verstopfte]], -
du, [[verstopfst]], [[verstopftest]], [[verstopfst]], [[verstopftest]], [[verstopf]] / [[verstopfe]]
er, [[verstopft]], [[verstopfte]], [[verstopfe]], [[verstopfte]], -
wir, [[verstopfen]], [[verstopften]], [[verstopfen]], [[verstopften]], [[verstopfen]]
ihr, [[verstopft]], [[verstopftet]], [[verstopfet]], [[verstopftet]], [[verstopft]]
sie, [[verstopfen]], [[verstopften]], [[verstopfen]], [[verstopften]], [[verstopfen]]

*Zu + Inf*: zu [[verstopfen]], *P2*: [[verstopft]]
Adjektive: [[verstopfend]], [[verstopfender]], [[verstopfendst]]</agent_output>
</example>
`;var Be=`<assistant_role>You are a German morphological analysis assistant that provides morphological analysis and structured segmentation for compound words.  Your task is to take any given German word and generate two segmentation formats for its normal from following a precise syntax notation.</assistant_role>
<instructions>
0. Identify the normal from of the given word. In this context, Partizip 1's normal from is an infinitive of a corresponding verb.

1. **Fine-grained morphological breakdown**:
   - Break the word into **smallest meaningful morphemes**, including prefixes, roots, suffixes, and linking elements.
   - Wrap each segment in Obsidian-style "[[...]]" links.
   - Separate morphemes with a "|" symbol.

2. **Lexical/structured breakdown**:
   - Merge smaller morphemes into **larger meaningful lexical units** where possible.
   - Maintain linking morphemes ("-s-", "-e-", etc.) separately.
   - Wrap each larger unit in "[[...]]" and separate with " + ".

**Rules:**
- Break down the normal form
- If both breakdowns are **identical**, return only one format.
- If a word has a **linking morpheme (-s-, -e-, etc.)**, it should appear explicitly in both formats.
- The **lexical breakdown** should prioritize full words that a speaker would recognize.
</instructions>

<examples>

<example>
<german_word>Bindungsurlaubes</german_word>
<agent_output>[[Bind]]|[[ung]]|[[s]]|[[ur|laub]]
[[Bindung]] + [[urlaub]]</agent_output>
</example>

<example>
<german_word>Rechercheergebnisse</german_word>
<agent_output>[[Recherche]]|[[e]]|[[er]]|[[geb]]|[[nis]]
[[Recherche]] + [[ergebnis]]</agent_output>
</example>

<example>
<german_word>verfeinden</german_word>
<agent_output>[[ver]]|[[feind]]|[[en]]
[[ver]] + [[feinden]]</agent_output>
</example>

<example>
<german_word>tanztest</german_word>
<agent_output>[[tanz]]|[[en]]</agent_output>
</example>

<example>
<german_word>B\xFCsche</german_word>
<agent_output>[[Busch]]</agent_output>
</example>

<example>
<german_word>standig</german_word>
<agent_output>[[stand]]|[[ig]]</agent_output>
</example>

<example>
<german_word>stehend</german_word>
<agent_output>[[steh]]|[[en]]</agent_output>
</example>

<example>
<german_word>verstehen</german_word>
<agent_output>[[ver]]|[[steh]]|[[en]]
[[ver]] + [[stehen]]</agent_output>
</example>

<example>
<german_word>Geschichtsb\xFCcher</german_word>
<agent_output>[[Ge]][[schicht]]|[[s]]|[[buch]]
[[Geschichte]] + [[Buch]]</agent_output>
</example>

<example>
<german_word>Schweinehund</german_word>
<agent_output>[[Schwein]]|[[e]]|[[hund]]
[[Schwein]] + [[Hund]]</agent_output>
</example>

<example>
<german_word>standhalten</german_word>
<agent_output>[[stand]]|[[halt]]|[[en]]
[[stand]]+[[halten]]
</example>


</examples>`;var Ge=`## Korrekturanweisungen (erweitert)

### 1. Grammatische Fehler in bestehenden W\xF6rtern
- **Markiere grammatische Fehler direkt im Wort** mit ==...==.
  - **Beispiel** (falsche Endung):
    - Original: *"f\xFCr dies Aufgabe"*
    - Korrektur: *"f\xFCr dies==e== Aufgabe"*
    - Erkl\xE4rung: "dies**e**" wird als Wort mit einer falschen Endung erkannt, also wird nur der falsch verwendete Teil markiert.

### 2. Fehlende W\xF6rter hinzuf\xFCgen
- **F\xFCge fehlende W\xF6rter** hinzu, indem du sie komplett in ==...== setzt.
  - **Beispiel**:
    - Original: *"Pass auf dich"*
    - Korrektur: *"Pass auf dich ==auf=="*
    - Erkl\xE4rung: "auf" war komplett fehlend.

### 3. Falsch platzierte oder umzustellende W\xF6rter
- **Markiere falsch platzierte oder umzustellende W\xF6rter** mit *...*.
  - **Beispiel**:
    - Original: *"Ich komme nach Hause, um zu spielen mit meinen Kindern."*
    - Korrektur: *"Ich komme nach Hause, um mit meinen Kindern *zu* *spielen*."*
    - Erkl\xE4rung: "zu spielen" muss hier umgestellt werden (bzw. "mit meinen Kindern" sollte nach "um" stehen).

### 4. Passenderes Wort auf C1-Niveau
- **Wenn du ein passenderes Wort auf C1-Niveau findest**, markiere es mit \`...\` (Backticks).
  - **Beispiel**:
    - Original: *"Heute wird strittig dar\xFCber diskutiert."*
    - Korrektur: *"\`Heutzutage\` wird \`kontrovers\` dar\xFCber diskutiert."*
    - Erkl\xE4rung: "strittig" wird durch ein treffenderes Synonym ("kontrovers") ersetzt.  "Heute" wird durch ein treffenderes Synonym ("Heutzutage") ersetzt.

---

## H\xE4ufige Zweifelsf\xE4lle & Edge Cases

1. **Fehlendes Wort mitten im Satz ("was \u2026 Kriterien" \u2192 "was f\xFCr Kriterien")**
   - Wenn eindeutig ein Wort fehlt, setze es in ==...==.
     - Beispiel:  
       - *Original:* "Heute wird kontrovers dar\xFCber diskutiert, was Kriterien Schulabg\xE4ngerinnen und Schulabg\xE4nger ber\xFCcksichtigen sollten \u2026"  
       - *Korrektur:* "Heute wird \`kontrovers\` dar\xFCber diskutiert, was ==f\xFCr== Kriterien Schulabg\xE4ngerinnen und Schulabg\xE4nger ber\xFCcksichtigen sollten \u2026"  
       - **Hinweis:** Das Wort "f\xFCr" wurde **nicht** f\xE4lschlich geschrieben, sondern fehlte komplett. Daher steht es in ==...== statt ==f\xFC==r\`.

2. **Falsches Wort / falscher Wortteil ("richtig Entscheidung" \u2192 "richtig**e** Entscheidung")**
   - Wenn nur die Wortform falsch ist, markiere ausschlie\xDFlich den falschen Teil im Wort mit ==...==.
     - Beispiel:  
       - *Original:* "um die richtig Entscheidung zu treffen."  
       - *Korrektur:* "um die richtig==e== Entscheidung zu treffen."  

3. **Wort ist zwar sichtbar, aber grammatisch unpassend ("was f\xFCr Kriterien" vs. "was nach Kriterien")**
   - Handelt es sich um ein komplett anderes Wort, setze das **korrekte** Wort in ==...== und l\xF6sche das falsche Wort im Text.  
   - Beispiel:  
     - *Original:* "was nach Kriterien ber\xFCcksichtigt werden sollte"  
     - *Korrektur:* "was ==f\xFCr== Kriterien ber\xFCcksichtigt werden sollte"  
     - **Hinweis:** "nach" wird entfernt, stattdessen "==f\xFCr==" wird eingesetzt.

4. **Synonyme auf h\xF6herem Sprachniveau**  
   - Ersetze bei Bedarf (immer nur, wenn sinnvoll) durch ein C1-Wort und markiere es mit Backticks.  
     - Beispiel:  
       - *Original:* "Heute wird viel dar\xFCber gesprochen, \u2026"  
       - *Korrektur:* "Heute wird \`ausf\xFChrlich\` dar\xFCber gesprochen, \u2026"  

5. **Unterschied zwischen "falscher Wortteil" und "fehlt ein Teil"**
   - **Falscher Wortteil:** Das Wort ist prinzipiell vorhanden, aber grammatisch inkorrekt \u2192 Markiere nur den abweichenden Buchstaben/das Suffix in ==...==.  
   - **Fehlender Wortteil:** Ein notwendiges Suffix oder Pr\xE4fix fehlt komplett \u2192 Setze das fehlende Element in ==...== (ggf. an die passende Stelle im Wort).

6. **Beibehaltung von Satzbau und Struktur**
   - Formuliere **keine neuen S\xE4tze**, sondern verbessere **nur** mithilfe der vier Markierungstypen:
     1. ==...== (falscher Teil oder komplett fehlendes Wort)  
     2. *...* (umstellen/versetzen)  
     3. \`...\` (besseres Wort)  
     4. (ggf. Entfernen eines eindeutig falschen Wortes, wenn das Korrekte eingef\xFCgt wird)

7. **Kein Vermischen der Markierungen**
   - Verwende ausschlie\xDFlich **eine** der obigen Markierungsarten je Korrekturfall, z. B. kein ==...== *und* *...* auf demselben Wort.
`.replaceAll("\\","");var b={generate_dictionary_entry:De,generate_forms:je,morphems:Be,determine_infinitive_and_pick_emoji:Oe,normalize:Me,translate_de_to_eng:Fe,keymaker:Re,c1Richter:Ge,generate_valence_block:Ke};var $=class{constructor(n,t){this.settings=n;this.vault=t;this.genAI=null;this.model="gemini-2.0-flash-lite";this.chatSessions={};try{this.settings.apiProvider==="deepseek"||this.settings.apiProvider==="google"&&(this.genAI=new D(this.settings.googleApiKey))}catch(i){new U.Notice(`Error initializing API service: ${i.message}`)}}async generateContent(n,t){try{let i=null;if(n=n.replace(/^\t+/gm,""),this.settings.apiProvider==="deepseek"){if(!this.settings.deepseekApiKey)throw new Error("DeepSeek API key not configured.");let a="https://api.deepseek.com/v1/generation/inference",s={model:"deepseek-chat",messages:[{role:"system",content:n},{role:"user",content:t}],stream:!1},u=await(0,U.requestUrl)({url:a,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.settings.deepseekApiKey}`},body:JSON.stringify(s)});if(u.status!==200)throw new Error(`HTTP error! status: ${u.status}`);i=u.json.choices[0].message.content}else if(this.settings.apiProvider==="google"){if(!this.settings.googleApiKey)throw new Error("Google API key not configured.");this.genAI||(this.genAI=new D(this.settings.googleApiKey));let a={temperature:0,topP:.95,topK:64,maxOutputTokens:8192},s=n;if(!this.chatSessions[s]){let d=this.genAI.getGenerativeModel({model:this.model,systemInstruction:n});this.chatSessions[s]=d.startChat({generationConfig:a,history:[]})}i=(await this.chatSessions[s].sendMessage(t)).response.text()}else throw new Error("API provider not configured correctly.");return i===null?"":i}catch(i){throw console.error("Error generating content:",i),new Error(i.message)}}async fetchTemplate(n){let[t,i]=await Promise.all([this.generateContent(b.generate_dictionary_entry,n),this.generateContent(b.generate_valence_block,n)]);return`${t.replace("<agent_output>","").replace("</agent_output>","")}

---
${i}`}async determineInfinitiveAndEmoji(n){return this.generateContent(b.determine_infinitive_and_pick_emoji,n)}async normalize(n){return this.generateContent(b.normalize,n)}async translateText(n){return this.generateContent(b.translate_de_to_eng,n)}async consultKeymaker(n){return this.generateContent(b.keymaker,n)}async consultC1Richter(n){return this.generateContent(b.c1Richter,n)}};var V=class{constructor(n){this.vault=n}async appendToFile(n,t){return H(this.vault,n,t)}async doesFileContainContent(n,t){return L(this.vault,n,t)}};var We=require("obsidian");function He(e){let n=e.match(/\[\[([^\]]+)\]\]/);return n?n[1]:null}function Ln(e){let n=/(?<!\[)\[(?!\[)(.*?)(?<!\])\](?!\])/g,t=[],i;for(;(i=n.exec(e))!==null;)t.push([i.index,n.lastIndex-1]);return t.length?t[0]:null}function $n(e){let n=Ln(e),t=He(e);return!n||!t?e:e.slice(0,n[1]+1)+`(https://youglish.com/pronounce/${t}/german)`+e.slice(n[1]+1)}async function Un(e){try{let n=await navigator.clipboard.readText(),[t,...i]=e.split("---");return i.length>=1?t+`---
`+n.trim()+i.map(r=>r.trim()).join(`

---
`)+`
`:e}catch(n){return console.error("Failed to read clipboard:",n),e}}async function ee(e,n,t,i){let r=t.basename;try{let[a,s,u,l]=await Promise.all([e.apiService.generateContent(b.generate_dictionary_entry,r),e.apiService.generateContent(b.generate_forms,r),e.apiService.generateContent(b.morphems,r),e.apiService.generateContent(b.generate_valence_block,r)]),d=Yn(s),g=`${a.replace("<agent_output>","").replace("</agent_output>","")}`,h=await Un($n(g)),c=u.replace(`
`,"")===w?"":`${u}
`,o=l.replace(`
`,"")===w?"":`${l}`,p=s.replace(`
`,"")===w?"":`${s}`,x=d.replace(`
`,"")===w?"":`${d}`,m=[h,c,o,p,x];console.log("baseBlock, morphemsBlock, valenceBlock, fromsBlock, adjFormsBlock",m);let k=m.filter(Boolean).join(`
---
`),y=He(h);(y==null?void 0:y.toLocaleLowerCase())===r.toLocaleLowerCase()?await e.fileService.appendToFile(t.path,k):(await e.fileService.appendToFile(t.path,`[[${y}]]`),console.log("entrie to cb",[k]),await navigator.clipboard.writeText(k))}catch(a){new We.Notice(`Error: ${a.message}`)}}function Vn(e){let n=e.match(/Adjektive:\s*\[\[(.*?)\]\],\s*\[\[(.*?)\]\],\s*\[\[(.*?)\]\]/);if(!n)return null;let[t,i,r,a]=n;return[i,r,a]}function Yn(e){let n=Vn(e);if(!n)return w;let t=["er","es","e","en","em"],i=[];for(let r of n)for(let a of t)i.push(`[[${r+a}]]`);return i.join(", ")}var Le=require("obsidian");async function ne(e,n,t){let i=t.basename;try{let r=await e.apiService.determineInfinitiveAndEmoji(i);r&&(r=r.replace(/^\n+/,""),r=r.trim(),await e.fileService.appendToFile(t.path,r+`
`))}catch(r){new Le.Notice(`Error: ${r.message}`)}}var $e=require("obsidian");async function te(e,n,t,i){try{let r=await e.apiService.normalize(i);r&&n.replaceSelection(r)}catch(r){new $e.Notice(`Error: ${r.message}`)}}var Ue=require("obsidian");async function ie(e,n,t){try{let i=n.getCursor(),r=await e.apiService.translateText(t);r&&(n.replaceSelection(t+`

`+r+`
`),n.setCursor({line:i.line,ch:i.ch+t.length}))}catch(i){new Ue.Notice(`Error: ${i.message}`)}}var en=un(Qe());async function ue(e,n,t,i){let r=t.basename,a=(0,en.sentences)(i,{preserve_whitespace:!1,newline_boundaries:!1,html_boundaries:!1,sanitize:!0});try{let s=n.getValue(),l=e.findHighestNumber(s)+1,d="";a.length<=2?d=Q(i,r,l):d=a.map((g,h)=>Q(g,r,l+h)).join(`
`),await navigator.clipboard.writeText(`${d}`),n.replaceSelection(`${d}`)}catch(s){console.error("Error formatting selection with number:",s)}}var S=require("obsidian");async function le(e,n,t,i,r){var a;try{let s=i.getFileCache(e),u=(a=s==null?void 0:s.links)!=null?a:[];console.log("links",u);let l=[];for(let d of u){let g=d.link,h=i.getFirstLinkpathDest(g,e.path);h instanceof S.TFile?l.push({name:g,path:h.path}):l.push({name:g,path:null})}for(let d of l)try{let g,h=`[[${n}]]`;if(d.path)g=d.path;else{let o=d.name[0].toUpperCase(),p=(0,S.normalizePath)(`Worter/${o}`);t.getFolderByPath(p)||await t.createFolder(p),g=(0,S.normalizePath)(`${p}/${d.name}.md`)}await L(t,g,h)||await H(t,g,`, ${h}`)}catch(g){new S.Notice(`Error processing link ${d.name}: ${g.message}`)}r.refresh()}catch(s){new S.Notice(`Error processing backlinks: ${s.message}`)}}async function ce(e,n,t){try{let i=await e.apiService.consultC1Richter(t);i&&n.replaceSelection(t+`
`+i+`
`)}catch(i){console.error("Error in C1 Richter command:",i)}}var Y=class extends J.Plugin{async onload(){try{await this.loadPlugin(),this.addSettingTab(new j(this.app,this))}catch(t){console.error("Error during plugin initialization:",t),new J.Notice(`Plugin failed to load: ${t.message}`)}}async loadPlugin(){await this.loadSettings(),this.apiService=new $(this.settings,this.app.vault),this.fileService=new V(this.app.vault),this.addCommand({id:"backlink-all-to-current-file",name:"[P] All referenced files with a backlink to the current file",editorCheckCallback:(t,i,r)=>{var u,l;let a=(u=r.file)==null?void 0:u.name,s=(l=r.file)==null?void 0:l.basename;return console.log("view.file, fileName, backlink",r.file,a,s),r.file&&a&&s?(t||le(r.file,s,this.app.vault,this.app.metadataCache,i),!0):!1}}),this.addCommand({id:"fill-template",name:"[G] Generate a dictionary entry for the word in the title of the file",editorCheckCallback:(t,i,r)=>r.file?(t||ee(this,i,r.file),!0):!1}),this.addCommand({id:"get-infinitive-and-emoji",name:"[I] [Redundant] Get infinitive/normal form and emoji for current word",editorCheckCallback:(t,i,r)=>r.file?(t||ne(this,i,r.file),!0):!1}),this.addCommand({id:"duplicate-selection",name:"[WIP] Add links to normal/inf forms to selected text",editorCheckCallback:(t,i,r)=>{let a=i.getSelection();return a&&r.file?(t||te(this,i,r.file,a),!0):!1}}),this.addCommand({id:"translate-selection",name:"[D] Translate selecteD text",editorCheckCallback:(t,i)=>{let r=i.getSelection();return r?(t||ie(this,i,r),!0):!1}}),this.addCommand({id:"format-selection-with-number",name:"[S] Split selection into linked blocks",editorCheckCallback:(t,i,r)=>{let a=i.getSelection();return a&&r.file?(t||ue(this,i,r.file,a),!0):!1}}),this.addCommand({id:"check-ru-de-translation",name:"[K] Keymaker",editorCheckCallback:(t,i)=>{let r=i.getSelection();return r?(t||ce(this,i,r),!0):!1}})}async loadSettings(){this.settings=Object.assign({},he,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}findHighestNumber(t){let i=t.match(/#\^(\d+)/g);if(!i)return 0;let r=i.map(a=>{let s=a.replace("#^","");return parseInt(s,10)});return Math.max(0,...r)}};
/*! Bundled license information:

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/
